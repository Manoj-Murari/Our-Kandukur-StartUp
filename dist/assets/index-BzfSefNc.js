(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Jy={exports:{}},Zl={},Zy={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=Symbol.for("react.element"),Ax=Symbol.for("react.portal"),Cx=Symbol.for("react.fragment"),Rx=Symbol.for("react.strict_mode"),Px=Symbol.for("react.profiler"),jx=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Vx=Symbol.for("react.forward_ref"),Ox=Symbol.for("react.suspense"),Mx=Symbol.for("react.memo"),Lx=Symbol.for("react.lazy"),cp=Symbol.iterator;function Fx(t){return t===null||typeof t!="object"?null:(t=cp&&t[cp]||t["@@iterator"],typeof t=="function"?t:null)}var e0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t0=Object.assign,n0={};function ri(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}ri.prototype.isReactComponent={};ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r0(){}r0.prototype=ri.prototype;function yh(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}var vh=yh.prototype=new r0;vh.constructor=yh;t0(vh,ri.prototype);vh.isPureReactComponent=!0;var dp=Array.isArray,s0=Object.prototype.hasOwnProperty,_h={current:null},i0={key:!0,ref:!0,__self:!0,__source:!0};function o0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)s0.call(e,r)&&!i0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Mo,type:t,key:i,ref:o,props:s,_owner:_h.current}}function Ux(t,e){return{$$typeof:Mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mo}function zx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hp=/\/+/g;function hc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zx(""+t.key):e.toString(36)}function Ba(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mo:case Ax:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+hc(o,0):r,dp(s)?(n="",t!=null&&(n=t.replace(hp,"$&/")+"/"),Ba(s,e,n,"",function(h){return h})):s!=null&&(wh(s)&&(s=Ux(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dp(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+hc(i,u);o+=Ba(i,e,n,c,s)}else if(c=Fx(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+hc(i,u++),o+=Ba(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function va(t,e,n){if(t==null)return t;var r=[],s=0;return Ba(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Bx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},$a={transition:null},$x={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:$a,ReactCurrentOwner:_h};function a0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:va,forEach:function(t,e,n){va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return va(t,function(){e++}),e},toArray:function(t){return va(t,function(e){return e})||[]},only:function(t){if(!wh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ri;te.Fragment=Cx;te.Profiler=Px;te.PureComponent=yh;te.StrictMode=Rx;te.Suspense=Ox;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x;te.act=a0;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=t0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=_h.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)s0.call(e,c)&&!i0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Mo,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Dx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jx,_context:t},t.Consumer=t};te.createElement=o0;te.createFactory=function(t){var e=o0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Vx,render:t}};te.isValidElement=wh;te.lazy=function(t){return{$$typeof:Lx,_payload:{_status:-1,_result:t},_init:Bx}};te.memo=function(t,e){return{$$typeof:Mx,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=$a.transition;$a.transition={};try{t()}finally{$a.transition=e}};te.unstable_act=a0;te.useCallback=function(t,e){return ct.current.useCallback(t,e)};te.useContext=function(t){return ct.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};te.useEffect=function(t,e){return ct.current.useEffect(t,e)};te.useId=function(){return ct.current.useId()};te.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ct.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};te.useRef=function(t){return ct.current.useRef(t)};te.useState=function(t){return ct.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ct.current.useTransition()};te.version="18.3.1";Zy.exports=te;var M=Zy.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=M,Hx=Symbol.for("react.element"),Wx=Symbol.for("react.fragment"),Gx=Object.prototype.hasOwnProperty,Kx=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qx={key:!0,ref:!0,__self:!0,__source:!0};function l0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gx.call(e,r)&&!Qx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hx,type:t,key:i,ref:o,props:s,_owner:Kx.current}}Zl.Fragment=Wx;Zl.jsx=l0;Zl.jsxs=l0;Jy.exports=Zl;var l=Jy.exports,u0={exports:{}},Nt={},c0={exports:{}},d0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Z=$.length;$.push(Q);e:for(;0<Z;){var _e=Z-1>>>1,ue=$[_e];if(0<s(ue,Q))$[_e]=Q,$[Z]=ue,Z=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Z=$.pop();if(Z!==Q){$[0]=Z;e:for(var _e=0,ue=$.length,Ne=ue>>>1;_e<Ne;){var hn=2*(_e+1)-1,fn=$[hn],mn=hn+1,pn=$[mn];if(0>s(fn,Z))mn<ue&&0>s(pn,fn)?($[_e]=pn,$[mn]=Z,_e=mn):($[_e]=fn,$[hn]=Z,_e=hn);else if(mn<ue&&0>s(pn,Z))$[_e]=pn,$[mn]=Z,_e=mn;else break e}}return Q}function s($,Q){var Z=$.sortIndex-Q.sortIndex;return Z!==0?Z:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],f=1,p=null,g=3,E=!1,k=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=$)r(h),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(h)}}function D($){if(A=!1,I($),!k)if(n(c)!==null)k=!0,vi(F);else{var Q=n(h);Q!==null&&dn(D,Q.startTime-$)}}function F($,Q){k=!1,A&&(A=!1,T(v),v=-1),E=!0;var Z=g;try{for(I(Q),p=n(c);p!==null&&(!(p.expirationTime>Q)||$&&!b());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,g=p.priorityLevel;var ue=_e(p.expirationTime<=Q);Q=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(c)&&r(c),I(Q)}else r(c);p=n(c)}if(p!==null)var Ne=!0;else{var hn=n(h);hn!==null&&dn(D,hn.startTime-Q),Ne=!1}return Ne}finally{p=null,g=Z,E=!1}}var U=!1,_=null,v=-1,x=5,S=-1;function b(){return!(t.unstable_now()-S<x)}function R(){if(_!==null){var $=t.unstable_now();S=$;var Q=!0;try{Q=_(!0,$)}finally{Q?N():(U=!1,_=null)}}else U=!1}var N;if(typeof w=="function")N=function(){w(R)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Nr=At.port2;At.port1.onmessage=R,N=function(){Nr.postMessage(null)}}else N=function(){P(R,0)};function vi($){_=$,U||(U=!0,N())}function dn($,Q){v=P(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||E||(k=!0,vi(F))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Z=g;g=Q;try{return $()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=g;g=$;try{return Q()}finally{g=Z}},t.unstable_scheduleCallback=function($,Q,Z){var _e=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?_e+Z:_e):Z=_e,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,$={id:f++,callback:Q,priorityLevel:$,startTime:Z,expirationTime:ue,sortIndex:-1},Z>_e?($.sortIndex=Z,e(h,$),n(c)===null&&$===n(h)&&(A?(T(v),v=-1):A=!0,dn(D,Z-_e))):($.sortIndex=ue,e(c,$),k||E||(k=!0,vi(F))),$},t.unstable_shouldYield=b,t.unstable_wrapCallback=function($){var Q=g;return function(){var Z=g;g=Q;try{return $.apply(this,arguments)}finally{g=Z}}}})(d0);c0.exports=d0;var Xx=c0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=M,St=Xx;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h0=new Set,uo={};function es(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(uo[t]=e,t=0;t<e.length;t++)h0.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jc=Object.prototype.hasOwnProperty,Jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fp={},mp={};function Zx(t){return Jc.call(mp,t)?!0:Jc.call(fp,t)?!1:Jx.test(t)?mp[t]=!0:(fp[t]=!0,!1)}function eE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tE(t,e,n,r){if(e===null||typeof e>"u"||eE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xh=/[\-:]([a-z])/g;function Eh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xh,Eh);We[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xh,Eh);We[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xh,Eh);We[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Th(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tE(e,n,s,r)&&(n=null),r||s===null?Zx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vn=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),vs=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Ih=Symbol.for("react.strict_mode"),Zc=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),ed=Symbol.for("react.suspense"),td=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),pp=Symbol.iterator;function Pi(t){return t===null||typeof t!="object"?null:(t=pp&&t[pp]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,fc;function Ui(t){if(fc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fc=e&&e[1]||""}return`
`+fc+t}var mc=!1;function pc(t,e){if(!t||mc)return"";mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{mc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ui(t):""}function nE(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=pc(t.type,!1),t;case 11:return t=pc(t.type.render,!1),t;case 1:return t=pc(t.type,!0),t;default:return""}}function nd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case vs:return"Portal";case Zc:return"Profiler";case Ih:return"StrictMode";case ed:return"Suspense";case td:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m0:return(t.displayName||"Context")+".Consumer";case f0:return(t._context.displayName||"Context")+".Provider";case Sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:nd(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return nd(t(e))}catch{}}return null}function rE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nd(e);case 8:return e===Ih?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sE(t){var e=g0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wa(t){t._valueTracker||(t._valueTracker=sE(t))}function y0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=g0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function v0(t,e){e=e.checked,e!=null&&Th(t,"checked",e,!1)}function sd(t,e){v0(t,e);var n=hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,n):e.hasOwnProperty("defaultValue")&&id(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function id(t,e,n){(e!=="number"||cl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zi=Array.isArray;function Cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(zi(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function _0(t,e){var n=hr(e.value),r=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _p(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xa,x0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iE=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){iE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function E0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function T0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=E0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var oE=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ld(t,e){if(e){if(oE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dd=null,Rs=null,Ps=null;function wp(t){if(t=Uo(t)){if(typeof dd!="function")throw Error(L(280));var e=t.stateNode;e&&(e=su(e),dd(t.stateNode,t.type,e))}}function I0(t){Rs?Ps?Ps.push(t):Ps=[t]:Rs=t}function S0(){if(Rs){var t=Rs,e=Ps;if(Ps=Rs=null,wp(t),e)for(t=0;t<e.length;t++)wp(e[t])}}function k0(t,e){return t(e)}function N0(){}var gc=!1;function b0(t,e,n){if(gc)return t(e,n);gc=!0;try{return k0(t,e,n)}finally{gc=!1,(Rs!==null||Ps!==null)&&(N0(),S0())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=su(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var hd=!1;if(Nn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){hd=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{hd=!1}function aE(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Qi=!1,dl=null,hl=!1,fd=null,lE={onError:function(t){Qi=!0,dl=t}};function uE(t,e,n,r,s,i,o,u,c){Qi=!1,dl=null,aE.apply(lE,arguments)}function cE(t,e,n,r,s,i,o,u,c){if(uE.apply(this,arguments),Qi){if(Qi){var h=dl;Qi=!1,dl=null}else throw Error(L(198));hl||(hl=!0,fd=h)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xp(t){if(ts(t)!==t)throw Error(L(188))}function dE(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xp(s),t;if(i===r)return xp(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function C0(t){return t=dE(t),t!==null?R0(t):null}function R0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R0(t);if(e!==null)return e;t=t.sibling}return null}var P0=St.unstable_scheduleCallback,Ep=St.unstable_cancelCallback,hE=St.unstable_shouldYield,fE=St.unstable_requestPaint,Ae=St.unstable_now,mE=St.unstable_getCurrentPriorityLevel,bh=St.unstable_ImmediatePriority,j0=St.unstable_UserBlockingPriority,fl=St.unstable_NormalPriority,pE=St.unstable_LowPriority,D0=St.unstable_IdlePriority,eu=null,tn=null;function gE(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(eu,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:_E,yE=Math.log,vE=Math.LN2;function _E(t){return t>>>=0,t===0?32:31-(yE(t)/vE|0)|0}var Ea=64,Ta=4194304;function Bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Bi(u):(i&=o,i!==0&&(r=Bi(i)))}else o=n&~s,o!==0?r=Bi(o):i!==0&&(r=Bi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),s=1<<n,r|=t[n],e&=~s;return r}function wE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ht(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=wE(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function md(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V0(){var t=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),t}function yc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function EE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ht(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ah(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var le=0;function O0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M0,Ch,L0,F0,U0,pd=!1,Ia=[],Zn=null,er=null,tr=null,fo=new Map,mo=new Map,Hn=[],TE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tp(t,e){switch(t){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uo(e),e!==null&&Ch(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IE(t,e,n,r,s){switch(e){case"focusin":return Zn=Di(Zn,t,e,n,r,s),!0;case"dragenter":return er=Di(er,t,e,n,r,s),!0;case"mouseover":return tr=Di(tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mo.set(i,Di(mo.get(i)||null,t,e,n,r,s)),!0}return!1}function z0(t){var e=Vr(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,U0(t.priority,function(){L0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return e=Uo(n),e!==null&&Ch(e),t.blockedOn=n,!1;e.shift()}return!0}function Ip(t,e,n){qa(t)&&n.delete(e)}function SE(){pd=!1,Zn!==null&&qa(Zn)&&(Zn=null),er!==null&&qa(er)&&(er=null),tr!==null&&qa(tr)&&(tr=null),fo.forEach(Ip),mo.forEach(Ip)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,SE)))}function po(t){function e(s){return Vi(s,t)}if(0<Ia.length){Vi(Ia[0],t);for(var n=1;n<Ia.length;n++){var r=Ia[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zn!==null&&Vi(Zn,t),er!==null&&Vi(er,t),tr!==null&&Vi(tr,t),fo.forEach(e),mo.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)z0(n),n.blockedOn===null&&Hn.shift()}var js=Vn.ReactCurrentBatchConfig,pl=!0;function kE(t,e,n,r){var s=le,i=js.transition;js.transition=null;try{le=1,Rh(t,e,n,r)}finally{le=s,js.transition=i}}function NE(t,e,n,r){var s=le,i=js.transition;js.transition=null;try{le=4,Rh(t,e,n,r)}finally{le=s,js.transition=i}}function Rh(t,e,n,r){if(pl){var s=gd(t,e,n,r);if(s===null)Nc(t,e,r,gl,n),Tp(t,r);else if(IE(s,t,e,n,r))r.stopPropagation();else if(Tp(t,r),e&4&&-1<TE.indexOf(t)){for(;s!==null;){var i=Uo(s);if(i!==null&&M0(i),i=gd(t,e,n,r),i===null&&Nc(t,e,r,gl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nc(t,e,r,null,n)}}var gl=null;function gd(t,e,n,r){if(gl=null,t=Nh(r),t=Vr(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gl=t,null}function B0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mE()){case bh:return 1;case j0:return 4;case fl:case pE:return 16;case D0:return 536870912;default:return 16}default:return 16}}var Xn=null,Ph=null,Ha=null;function $0(){if(Ha)return Ha;var t,e=Ph,n=e.length,r,s="value"in Xn?Xn.value:Xn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ha=s.slice(t,1<r?1-r:void 0)}function Wa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sa(){return!0}function Sp(){return!1}function bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sa:Sp,this.isPropagationStopped=Sp,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),e}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=bt(si),Fo=Ee({},si,{view:0,detail:0}),bE=bt(Fo),vc,_c,Oi,tu=Ee({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(vc=t.screenX-Oi.screenX,_c=t.screenY-Oi.screenY):_c=vc=0,Oi=t),vc)},movementY:function(t){return"movementY"in t?t.movementY:_c}}),kp=bt(tu),AE=Ee({},tu,{dataTransfer:0}),CE=bt(AE),RE=Ee({},Fo,{relatedTarget:0}),wc=bt(RE),PE=Ee({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),jE=bt(PE),DE=Ee({},si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VE=bt(DE),OE=Ee({},si,{data:0}),Np=bt(OE),ME={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FE[t])?!!e[t]:!1}function Dh(){return UE}var zE=Ee({},Fo,{key:function(t){if(t.key){var e=ME[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(t){return t.type==="keypress"?Wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BE=bt(zE),$E=Ee({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=bt($E),qE=Ee({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),HE=bt(qE),WE=Ee({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=bt(WE),KE=Ee({},tu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QE=bt(KE),XE=[9,13,27,32],Vh=Nn&&"CompositionEvent"in window,Xi=null;Nn&&"documentMode"in document&&(Xi=document.documentMode);var YE=Nn&&"TextEvent"in window&&!Xi,q0=Nn&&(!Vh||Xi&&8<Xi&&11>=Xi),Ap=" ",Cp=!1;function H0(t,e){switch(t){case"keyup":return XE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function JE(t,e){switch(t){case"compositionend":return W0(e);case"keypress":return e.which!==32?null:(Cp=!0,Ap);case"textInput":return t=e.data,t===Ap&&Cp?null:t;default:return null}}function ZE(t,e){if(ws)return t==="compositionend"||!Vh&&H0(t,e)?(t=$0(),Ha=Ph=Xn=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q0&&e.locale!=="ko"?null:e.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eT[t.type]:e==="textarea"}function G0(t,e,n,r){I0(r),e=yl(e,"onChange"),0<e.length&&(n=new jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,go=null;function tT(t){sv(t,0)}function nu(t){var e=Ts(t);if(y0(e))return t}function nT(t,e){if(t==="change")return e}var K0=!1;if(Nn){var xc;if(Nn){var Ec="oninput"in document;if(!Ec){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),Ec=typeof Pp.oninput=="function"}xc=Ec}else xc=!1;K0=xc&&(!document.documentMode||9<document.documentMode)}function jp(){Yi&&(Yi.detachEvent("onpropertychange",Q0),go=Yi=null)}function Q0(t){if(t.propertyName==="value"&&nu(go)){var e=[];G0(e,go,t,Nh(t)),b0(tT,e)}}function rT(t,e,n){t==="focusin"?(jp(),Yi=e,go=n,Yi.attachEvent("onpropertychange",Q0)):t==="focusout"&&jp()}function sT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nu(go)}function iT(t,e){if(t==="click")return nu(e)}function oT(t,e){if(t==="input"||t==="change")return nu(e)}function aT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:aT;function yo(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jc.call(e,s)||!Kt(t[s],e[s]))return!1}return!0}function Dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vp(t,e){var n=Dp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dp(n)}}function X0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y0(){for(var t=window,e=cl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cl(t.document)}return e}function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lT(t){var e=Y0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X0(n.ownerDocument.documentElement,n)){if(r!==null&&Oh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vp(n,i);var o=Vp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uT=Nn&&"documentMode"in document&&11>=document.documentMode,xs=null,yd=null,Ji=null,vd=!1;function Op(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vd||xs==null||xs!==cl(r)||(r=xs,"selectionStart"in r&&Oh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&yo(Ji,r)||(Ji=r,r=yl(yd,"onSelect"),0<r.length&&(e=new jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xs)))}function ka(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Es={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionend:ka("Transition","TransitionEnd")},Tc={},J0={};Nn&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function ru(t){if(Tc[t])return Tc[t];if(!Es[t])return t;var e=Es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J0)return Tc[t]=e[n];return t}var Z0=ru("animationend"),ev=ru("animationiteration"),tv=ru("animationstart"),nv=ru("transitionend"),rv=new Map,Mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(t,e){rv.set(t,e),es(e,[t])}for(var Ic=0;Ic<Mp.length;Ic++){var Sc=Mp[Ic],cT=Sc.toLowerCase(),dT=Sc[0].toUpperCase()+Sc.slice(1);xr(cT,"on"+dT)}xr(Z0,"onAnimationEnd");xr(ev,"onAnimationIteration");xr(tv,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(nv,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Lp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cE(r,e,void 0,t),t.currentTarget=null}function sv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Lp(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Lp(s,u,h),i=c}}}if(hl)throw t=fd,hl=!1,fd=null,t}function pe(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var r=t+"__bubble";n.has(r)||(iv(e,t,2,!1),n.add(r))}function kc(t,e,n){var r=0;e&&(r|=4),iv(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[Na]){t[Na]=!0,h0.forEach(function(n){n!=="selectionchange"&&(hT.has(n)||kc(n,!1,t),kc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,kc("selectionchange",!1,e))}}function iv(t,e,n,r){switch(B0(e)){case 1:var s=kE;break;case 4:s=NE;break;default:s=Rh}n=s.bind(null,e,n,t),s=void 0,!hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Vr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}b0(function(){var h=i,f=Nh(n),p=[];e:{var g=rv.get(t);if(g!==void 0){var E=jh,k=t;switch(t){case"keypress":if(Wa(n)===0)break e;case"keydown":case"keyup":E=BE;break;case"focusin":k="focus",E=wc;break;case"focusout":k="blur",E=wc;break;case"beforeblur":case"afterblur":E=wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=CE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=HE;break;case Z0:case ev:case tv:E=jE;break;case nv:E=GE;break;case"scroll":E=bE;break;case"wheel":E=QE;break;case"copy":case"cut":case"paste":E=VE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=bp}var A=(e&4)!==0,P=!A&&t==="scroll",T=A?g!==null?g+"Capture":null:g;A=[];for(var w=h,I;w!==null;){I=w;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,T!==null&&(D=ho(w,T),D!=null&&A.push(_o(w,D,I)))),P)break;w=w.return}0<A.length&&(g=new E(g,k,null,n,f),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==cd&&(k=n.relatedTarget||n.fromElement)&&(Vr(k)||k[bn]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=h,k=k?Vr(k):null,k!==null&&(P=ts(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=h),E!==k)){if(A=kp,D="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=bp,D="onPointerLeave",T="onPointerEnter",w="pointer"),P=E==null?g:Ts(E),I=k==null?g:Ts(k),g=new A(D,w+"leave",E,n,f),g.target=P,g.relatedTarget=I,D=null,Vr(f)===h&&(A=new A(T,w+"enter",k,n,f),A.target=I,A.relatedTarget=P,D=A),P=D,E&&k)t:{for(A=E,T=k,w=0,I=A;I;I=fs(I))w++;for(I=0,D=T;D;D=fs(D))I++;for(;0<w-I;)A=fs(A),w--;for(;0<I-w;)T=fs(T),I--;for(;w--;){if(A===T||T!==null&&A===T.alternate)break t;A=fs(A),T=fs(T)}A=null}else A=null;E!==null&&Fp(p,g,E,A,!1),k!==null&&P!==null&&Fp(p,P,k,A,!0)}}e:{if(g=h?Ts(h):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var F=nT;else if(Rp(g))if(K0)F=oT;else{F=sT;var U=rT}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=iT);if(F&&(F=F(t,h))){G0(p,F,n,f);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&id(g,"number",g.value)}switch(U=h?Ts(h):window,t){case"focusin":(Rp(U)||U.contentEditable==="true")&&(xs=U,yd=h,Ji=null);break;case"focusout":Ji=yd=xs=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,Op(p,n,f);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":Op(p,n,f)}var _;if(Vh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ws?H0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(q0&&n.locale!=="ko"&&(ws||v!=="onCompositionStart"?v==="onCompositionEnd"&&ws&&(_=$0()):(Xn=f,Ph="value"in Xn?Xn.value:Xn.textContent,ws=!0)),U=yl(h,v),0<U.length&&(v=new Np(v,t,null,n,f),p.push({event:v,listeners:U}),_?v.data=_:(_=W0(n),_!==null&&(v.data=_)))),(_=YE?JE(t,n):ZE(t,n))&&(h=yl(h,"onBeforeInput"),0<h.length&&(f=new Np("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=_))}sv(p,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=ho(n,i),c!=null&&o.unshift(_o(n,c,u))):s||(c=ho(n,i),c!=null&&o.push(_o(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function Up(t){return(typeof t=="string"?t:""+t).replace(fT,`
`).replace(mT,"")}function ba(t,e,n){if(e=Up(e),Up(t)!==e&&n)throw Error(L(425))}function vl(){}var _d=null,wd=null;function xd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,pT=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(t){return zp.resolve(null).then(t).catch(yT)}:Ed;function yT(t){setTimeout(function(){throw t})}function bc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),po(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);po(e)}function nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ii=Math.random().toString(36).slice(2),en="__reactFiber$"+ii,wo="__reactProps$"+ii,bn="__reactContainer$"+ii,Td="__reactEvents$"+ii,vT="__reactListeners$"+ii,_T="__reactHandles$"+ii;function Vr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bp(t);t!==null;){if(n=t[en])return n;t=Bp(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[en]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function su(t){return t[wo]||null}var Id=[],Is=-1;function Er(t){return{current:t}}function ye(t){0>Is||(t.current=Id[Is],Id[Is]=null,Is--)}function he(t,e){Is++,Id[Is]=t.current,t.current=e}var fr={},st=Er(fr),gt=Er(!1),qr=fr;function Bs(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yt(t){return t=t.childContextTypes,t!=null}function _l(){ye(gt),ye(st)}function $p(t,e,n){if(st.current!==fr)throw Error(L(168));he(st,e),he(gt,n)}function ov(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,rE(t)||"Unknown",s));return Ee({},n,r)}function wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,qr=st.current,he(st,t),he(gt,gt.current),!0}function qp(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=ov(t,e,qr),r.__reactInternalMemoizedMergedChildContext=t,ye(gt),ye(st),he(st,t)):ye(gt),he(gt,n)}var _n=null,iu=!1,Ac=!1;function av(t){_n===null?_n=[t]:_n.push(t)}function wT(t){iu=!0,av(t)}function Tr(){if(!Ac&&_n!==null){Ac=!0;var t=0,e=le;try{var n=_n;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_n=null,iu=!1}catch(s){throw _n!==null&&(_n=_n.slice(t+1)),P0(bh,Tr),s}finally{le=e,Ac=!1}}return null}var Ss=[],ks=0,xl=null,El=0,Ct=[],Rt=0,Hr=null,xn=1,En="";function Pr(t,e){Ss[ks++]=El,Ss[ks++]=xl,xl=t,El=e}function lv(t,e,n){Ct[Rt++]=xn,Ct[Rt++]=En,Ct[Rt++]=Hr,Hr=t;var r=xn;t=En;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var i=32-Ht(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xn=1<<32-Ht(e)+s|n<<s|r,En=i+t}else xn=1<<i|n<<s|r,En=t}function Mh(t){t.return!==null&&(Pr(t,1),lv(t,1,0))}function Lh(t){for(;t===xl;)xl=Ss[--ks],Ss[ks]=null,El=Ss[--ks],Ss[ks]=null;for(;t===Hr;)Hr=Ct[--Rt],Ct[Rt]=null,En=Ct[--Rt],Ct[Rt]=null,xn=Ct[--Rt],Ct[Rt]=null}var It=null,Et=null,ve=!1,Bt=null;function uv(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Et=nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hr!==null?{id:xn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Et=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kd(t){if(ve){var e=Et;if(e){var n=e;if(!Hp(t,e)){if(Sd(t))throw Error(L(418));e=nr(n.nextSibling);var r=It;e&&Hp(t,e)?uv(r,n):(t.flags=t.flags&-4097|2,ve=!1,It=t)}}else{if(Sd(t))throw Error(L(418));t.flags=t.flags&-4097|2,ve=!1,It=t}}}function Wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function Aa(t){if(t!==It)return!1;if(!ve)return Wp(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xd(t.type,t.memoizedProps)),e&&(e=Et)){if(Sd(t))throw cv(),Error(L(418));for(;e;)uv(t,e),e=nr(e.nextSibling)}if(Wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=It?nr(t.stateNode.nextSibling):null;return!0}function cv(){for(var t=Et;t;)t=nr(t.nextSibling)}function $s(){Et=It=null,ve=!1}function Fh(t){Bt===null?Bt=[t]:Bt.push(t)}var xT=Vn.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Ca(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gp(t){var e=t._init;return e(t._payload)}function dv(t){function e(T,w){if(t){var I=T.deletions;I===null?(T.deletions=[w],T.flags|=16):I.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=or(T,w),T.index=0,T.sibling=null,T}function i(T,w,I){return T.index=I,t?(I=T.alternate,I!==null?(I=I.index,I<w?(T.flags|=2,w):I):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function u(T,w,I,D){return w===null||w.tag!==6?(w=Oc(I,T.mode,D),w.return=T,w):(w=s(w,I),w.return=T,w)}function c(T,w,I,D){var F=I.type;return F===_s?f(T,w,I.props.children,D,I.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===$n&&Gp(F)===w.type)?(D=s(w,I.props),D.ref=Mi(T,w,I),D.return=T,D):(D=Za(I.type,I.key,I.props,null,T.mode,D),D.ref=Mi(T,w,I),D.return=T,D)}function h(T,w,I,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Mc(I,T.mode,D),w.return=T,w):(w=s(w,I.children||[]),w.return=T,w)}function f(T,w,I,D,F){return w===null||w.tag!==7?(w=zr(I,T.mode,D,F),w.return=T,w):(w=s(w,I),w.return=T,w)}function p(T,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Oc(""+w,T.mode,I),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _a:return I=Za(w.type,w.key,w.props,null,T.mode,I),I.ref=Mi(T,null,w),I.return=T,I;case vs:return w=Mc(w,T.mode,I),w.return=T,w;case $n:var D=w._init;return p(T,D(w._payload),I)}if(zi(w)||Pi(w))return w=zr(w,T.mode,I,null),w.return=T,w;Ca(T,w)}return null}function g(T,w,I,D){var F=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:u(T,w,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _a:return I.key===F?c(T,w,I,D):null;case vs:return I.key===F?h(T,w,I,D):null;case $n:return F=I._init,g(T,w,F(I._payload),D)}if(zi(I)||Pi(I))return F!==null?null:f(T,w,I,D,null);Ca(T,I)}return null}function E(T,w,I,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(I)||null,u(w,T,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case _a:return T=T.get(D.key===null?I:D.key)||null,c(w,T,D,F);case vs:return T=T.get(D.key===null?I:D.key)||null,h(w,T,D,F);case $n:var U=D._init;return E(T,w,I,U(D._payload),F)}if(zi(D)||Pi(D))return T=T.get(I)||null,f(w,T,D,F,null);Ca(w,D)}return null}function k(T,w,I,D){for(var F=null,U=null,_=w,v=w=0,x=null;_!==null&&v<I.length;v++){_.index>v?(x=_,_=null):x=_.sibling;var S=g(T,_,I[v],D);if(S===null){_===null&&(_=x);break}t&&_&&S.alternate===null&&e(T,_),w=i(S,w,v),U===null?F=S:U.sibling=S,U=S,_=x}if(v===I.length)return n(T,_),ve&&Pr(T,v),F;if(_===null){for(;v<I.length;v++)_=p(T,I[v],D),_!==null&&(w=i(_,w,v),U===null?F=_:U.sibling=_,U=_);return ve&&Pr(T,v),F}for(_=r(T,_);v<I.length;v++)x=E(_,T,v,I[v],D),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?v:x.key),w=i(x,w,v),U===null?F=x:U.sibling=x,U=x);return t&&_.forEach(function(b){return e(T,b)}),ve&&Pr(T,v),F}function A(T,w,I,D){var F=Pi(I);if(typeof F!="function")throw Error(L(150));if(I=F.call(I),I==null)throw Error(L(151));for(var U=F=null,_=w,v=w=0,x=null,S=I.next();_!==null&&!S.done;v++,S=I.next()){_.index>v?(x=_,_=null):x=_.sibling;var b=g(T,_,S.value,D);if(b===null){_===null&&(_=x);break}t&&_&&b.alternate===null&&e(T,_),w=i(b,w,v),U===null?F=b:U.sibling=b,U=b,_=x}if(S.done)return n(T,_),ve&&Pr(T,v),F;if(_===null){for(;!S.done;v++,S=I.next())S=p(T,S.value,D),S!==null&&(w=i(S,w,v),U===null?F=S:U.sibling=S,U=S);return ve&&Pr(T,v),F}for(_=r(T,_);!S.done;v++,S=I.next())S=E(_,T,v,S.value,D),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?v:S.key),w=i(S,w,v),U===null?F=S:U.sibling=S,U=S);return t&&_.forEach(function(R){return e(T,R)}),ve&&Pr(T,v),F}function P(T,w,I,D){if(typeof I=="object"&&I!==null&&I.type===_s&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case _a:e:{for(var F=I.key,U=w;U!==null;){if(U.key===F){if(F=I.type,F===_s){if(U.tag===7){n(T,U.sibling),w=s(U,I.props.children),w.return=T,T=w;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===$n&&Gp(F)===U.type){n(T,U.sibling),w=s(U,I.props),w.ref=Mi(T,U,I),w.return=T,T=w;break e}n(T,U);break}else e(T,U);U=U.sibling}I.type===_s?(w=zr(I.props.children,T.mode,D,I.key),w.return=T,T=w):(D=Za(I.type,I.key,I.props,null,T.mode,D),D.ref=Mi(T,w,I),D.return=T,T=D)}return o(T);case vs:e:{for(U=I.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(T,w.sibling),w=s(w,I.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=Mc(I,T.mode,D),w.return=T,T=w}return o(T);case $n:return U=I._init,P(T,w,U(I._payload),D)}if(zi(I))return k(T,w,I,D);if(Pi(I))return A(T,w,I,D);Ca(T,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,I),w.return=T,T=w):(n(T,w),w=Oc(I,T.mode,D),w.return=T,T=w),o(T)):n(T,w)}return P}var qs=dv(!0),hv=dv(!1),Tl=Er(null),Il=null,Ns=null,Uh=null;function zh(){Uh=Ns=Il=null}function Bh(t){var e=Tl.current;ye(Tl),t._currentValue=e}function Nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){Il=t,Uh=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(Uh!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(Il===null)throw Error(L(308));Ns=t,Il.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var Or=null;function $h(t){Or===null?Or=[t]:Or.push(t)}function fv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,$h(e)):(n.next=s.next,s.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,An(t,n)}return s=r.interleaved,s===null?(e.next=e,$h(r)):(e.next=s.next,s.next=e),r.interleaved=e,An(t,n)}function Ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}function Kp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sl(t,e,n,r){var s=t.updateQueue;qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==o&&(u===null?f.firstBaseUpdate=h:u.next=h,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=h=c=null,u=i;do{var g=u.lane,E=u.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,A=u;switch(g=e,E=n,A.tag){case 1:if(k=A.payload,typeof k=="function"){p=k.call(E,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=A.payload,g=typeof k=="function"?k.call(E,p,g):k,g==null)break e;p=Ee({},p,g);break e;case 2:qn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else E={eventTime:E,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(h=f=E,c=p):f=f.next=E,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Gr|=o,t.lanes=o,t.memoizedState=p}}function Qp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var zo={},nn=Er(zo),xo=Er(zo),Eo=Er(zo);function Mr(t){if(t===zo)throw Error(L(174));return t}function Hh(t,e){switch(he(Eo,e),he(xo,t),he(nn,zo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ad(e,t)}ye(nn),he(nn,e)}function Hs(){ye(nn),ye(xo),ye(Eo)}function pv(t){Mr(Eo.current);var e=Mr(nn.current),n=ad(e,t.type);e!==n&&(he(xo,t),he(nn,n))}function Wh(t){xo.current===t&&(ye(nn),ye(xo))}var we=Er(0);function kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cc=[];function Gh(){for(var t=0;t<Cc.length;t++)Cc[t]._workInProgressVersionPrimary=null;Cc.length=0}var Ka=Vn.ReactCurrentDispatcher,Rc=Vn.ReactCurrentBatchConfig,Wr=0,xe=null,Ve=null,Fe=null,Nl=!1,Zi=!1,To=0,ET=0;function Je(){throw Error(L(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Qh(t,e,n,r,s,i){if(Wr=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?kT:NT,t=n(r,s),Zi){i=0;do{if(Zi=!1,To=0,25<=i)throw Error(L(301));i+=1,Fe=Ve=null,e.updateQueue=null,Ka.current=bT,t=n(r,s)}while(Zi)}if(Ka.current=bl,e=Ve!==null&&Ve.next!==null,Wr=0,Fe=Ve=xe=null,Nl=!1,e)throw Error(L(300));return t}function Xh(){var t=To!==0;return To=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?xe.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Mt(){if(Ve===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Fe===null?xe.memoizedState:Fe.next;if(e!==null)Fe=e,Ve=t;else{if(t===null)throw Error(L(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Fe===null?xe.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Io(t,e){return typeof e=="function"?e(t):e}function Pc(t){var e=Mt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Ve,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var f=h.lane;if((Wr&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,xe.lanes|=f,Gr|=f}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,Kt(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xe.lanes|=i,Gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jc(t){var e=Mt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Kt(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gv(){}function yv(t,e){var n=xe,r=Mt(),s=e(),i=!Kt(r.memoizedState,s);if(i&&(r.memoizedState=s,pt=!0),r=r.queue,Yh(wv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,So(9,_v.bind(null,n,r,s,e),void 0,null),Ue===null)throw Error(L(349));Wr&30||vv(n,e,s)}return s}function vv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _v(t,e,n,r){e.value=n,e.getSnapshot=r,xv(e)&&Ev(t)}function wv(t,e,n){return n(function(){xv(e)&&Ev(t)})}function xv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function Ev(t){var e=An(t,1);e!==null&&Wt(e,t,1,-1)}function Xp(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=ST.bind(null,xe,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tv(){return Mt().memoizedState}function Qa(t,e,n,r){var s=Jt();xe.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function ou(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if(Ve!==null){var o=Ve.memoizedState;if(i=o.destroy,r!==null&&Kh(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}xe.flags|=t,s.memoizedState=So(1|e,n,i,r)}function Yp(t,e){return Qa(8390656,8,t,e)}function Yh(t,e){return ou(2048,8,t,e)}function Iv(t,e){return ou(4,2,t,e)}function Sv(t,e){return ou(4,4,t,e)}function kv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nv(t,e,n){return n=n!=null?n.concat([t]):null,ou(4,4,kv.bind(null,e,t),n)}function Jh(){}function bv(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Av(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cv(t,e,n){return Wr&21?(Kt(n,e)||(n=V0(),xe.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function TT(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Rc.transition;Rc.transition={};try{t(!1),e()}finally{le=n,Rc.transition=r}}function Rv(){return Mt().memoizedState}function IT(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pv(t))jv(e,n);else if(n=fv(t,e,n,r),n!==null){var s=ut();Wt(n,t,r,s),Dv(n,e,r)}}function ST(t,e,n){var r=ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pv(t))jv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Kt(u,o)){var c=e.interleaved;c===null?(s.next=s,$h(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=fv(t,e,s,r),n!==null&&(s=ut(),Wt(n,t,r,s),Dv(n,e,r))}}function Pv(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function jv(t,e){Zi=Nl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}var bl={readContext:Ot,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},kT={readContext:Ot,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:Yp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qa(4194308,4,kv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qa(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IT.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:Xp,useDebugValue:Jh,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=Xp(!1),e=t[0];return t=TT.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,s=Jt();if(ve){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Ue===null)throw Error(L(349));Wr&30||vv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Yp(wv.bind(null,r,i,t),[t]),r.flags|=2048,So(9,_v.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=Ue.identifierPrefix;if(ve){var n=En,r=xn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ET++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NT={readContext:Ot,useCallback:bv,useContext:Ot,useEffect:Yh,useImperativeHandle:Nv,useInsertionEffect:Iv,useLayoutEffect:Sv,useMemo:Av,useReducer:Pc,useRef:Tv,useState:function(){return Pc(Io)},useDebugValue:Jh,useDeferredValue:function(t){var e=Mt();return Cv(e,Ve.memoizedState,t)},useTransition:function(){var t=Pc(Io)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:Rv,unstable_isNewReconciler:!1},bT={readContext:Ot,useCallback:bv,useContext:Ot,useEffect:Yh,useImperativeHandle:Nv,useInsertionEffect:Iv,useLayoutEffect:Sv,useMemo:Av,useReducer:jc,useRef:Tv,useState:function(){return jc(Io)},useDebugValue:Jh,useDeferredValue:function(t){var e=Mt();return Ve===null?e.memoizedState=t:Cv(e,Ve.memoizedState,t)},useTransition:function(){var t=jc(Io)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:Rv,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var au={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),s=ir(t),i=Sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,s),e!==null&&(Wt(e,t,s,r),Ga(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),s=ir(t),i=Sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,s),e!==null&&(Wt(e,t,s,r),Ga(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=ir(t),s=Sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=rr(t,s,r),e!==null&&(Wt(e,t,r,n),Ga(e,t,r))}};function Jp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function Vv(t,e,n){var r=!1,s=fr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ot(i):(s=yt(e)?qr:st.current,r=e.contextTypes,i=(r=r!=null)?Bs(t,s):fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=au,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&au.enqueueReplaceState(e,e.state,null)}function Ad(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ot(i):(i=yt(e)?qr:st.current,s.context=Bs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&au.enqueueReplaceState(s,s.state,null),Sl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ws(t,e){try{var n="",r=e;do n+=nE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AT=typeof WeakMap=="function"?WeakMap:Map;function Ov(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cl||(Cl=!0,Ud=r),Cd(t,e)},n}function Mv(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cd(t,e),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=$T.bind(null,t,e,n),e.then(t,t))}function tg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ng(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,rr(n,e,1))),n.lanes|=1),t)}var CT=Vn.ReactCurrentOwner,pt=!1;function lt(t,e,n,r){e.child=t===null?hv(e,null,n,r):qs(e,t.child,n,r)}function rg(t,e,n,r,s){n=n.render;var i=e.ref;return Ds(e,s),r=Qh(t,e,n,r,i,s),n=Xh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(ve&&n&&Mh(e),e.flags|=1,lt(t,e,r,s),e.child)}function sg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Lv(t,e,i,r,s)):(t=Za(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return Cn(t,e,s)}return e.flags|=1,t=or(i,r),t.ref=e.ref,t.return=e,e.child=t}function Lv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,Cn(t,e,s)}return Rd(t,e,n,r,s)}function Fv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(As,xt),xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(As,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,he(As,xt),xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,he(As,xt),xt|=r;return lt(t,e,s,n),e.child}function Uv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,s){var i=yt(n)?qr:st.current;return i=Bs(e,i),Ds(e,s),n=Qh(t,e,n,r,i,s),r=Xh(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(ve&&r&&Mh(e),e.flags|=1,lt(t,e,n,s),e.child)}function ig(t,e,n,r,s){if(yt(n)){var i=!0;wl(e)}else i=!1;if(Ds(e,s),e.stateNode===null)Xa(t,e),Vv(e,n,r),Ad(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ot(h):(h=yt(n)?qr:st.current,h=Bs(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Zp(e,o,r,h),qn=!1;var g=e.memoizedState;o.state=g,Sl(e,r,o,s),c=e.memoizedState,u!==r||g!==c||gt.current||qn?(typeof f=="function"&&(bd(e,n,f,r),c=e.memoizedState),(u=qn||Jp(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mv(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Ut(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=yt(n)?qr:st.current,c=Bs(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Zp(e,o,r,c),qn=!1,g=e.memoizedState,o.state=g,Sl(e,r,o,s);var k=e.memoizedState;u!==p||g!==k||gt.current||qn?(typeof E=="function"&&(bd(e,n,E,r),k=e.memoizedState),(h=qn||Jp(e,n,h,r,g,k,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Pd(t,e,n,r,i,s)}function Pd(t,e,n,r,s,i){Uv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qp(e,n,!1),Cn(t,e,i);r=e.stateNode,CT.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,i),e.child=qs(e,null,u,i)):lt(t,e,u,i),e.memoizedState=r.state,s&&qp(e,n,!0),e.child}function zv(t){var e=t.stateNode;e.pendingContext?$p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$p(t,e.context,!1),Hh(t,e.containerInfo)}function og(t,e,n,r,s){return $s(),Fh(s),e.flags|=256,lt(t,e,n,r),e.child}var jd={dehydrated:null,treeContext:null,retryLane:0};function Dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bv(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),he(we,s&1),t===null)return kd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cu(o,r,0,null),t=zr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Dd(n),e.memoizedState=jd,t):Zh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return RT(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=or(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=or(u,i):(i=zr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jd,r}return i=t.child,t=i.sibling,r=or(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zh(t,e){return e=cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ra(t,e,n,r){return r!==null&&Fh(r),qs(e,t.child,null,n),t=Zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Dc(Error(L(422))),Ra(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cu({mode:"visible",children:r.children},s,0,null),i=zr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=Dd(o),e.memoizedState=jd,i);if(!(e.mode&1))return Ra(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(L(419)),r=Dc(i,r,void 0),Ra(t,e,o,r)}if(u=(o&t.childLanes)!==0,pt||u){if(r=Ue,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,An(t,s),Wt(r,t,s,-1))}return of(),r=Dc(Error(L(421))),Ra(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Et=nr(s.nextSibling),It=e,ve=!0,Bt=null,t!==null&&(Ct[Rt++]=xn,Ct[Rt++]=En,Ct[Rt++]=Hr,xn=t.id,En=t.overflow,Hr=e),e=Zh(e,r.children),e.flags|=4096,e)}function ag(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nd(t.return,e,n)}function Vc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $v(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ag(t,n,e);else if(t.tag===19)ag(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vc(e,!0,n,null,i);break;case"together":Vc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PT(t,e,n){switch(e.tag){case 3:zv(e),$s();break;case 5:pv(e);break;case 1:yt(e.type)&&wl(e);break;case 4:Hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;he(Tl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?Bv(t,e,n):(he(we,we.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);he(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $v(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,Fv(t,e,n)}return Cn(t,e,n)}var qv,Vd,Hv,Wv;qv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vd=function(){};Hv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mr(nn.current);var i=null;switch(n){case"input":s=rd(t,s),r=rd(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=od(t,s),r=od(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vl)}ld(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(uo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(uo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&pe("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Wv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Li(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jT(t,e,n){var r=e.pendingProps;switch(Lh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return yt(e.type)&&_l(),Ze(e),null;case 3:return r=e.stateNode,Hs(),ye(gt),ye(st),Gh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&($d(Bt),Bt=null))),Vd(t,e),Ze(e),null;case 5:Wh(e);var s=Mr(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Hv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ze(e),null}if(t=Mr(nn.current),Aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[en]=e,r[wo]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)pe($i[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":gp(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":vp(r,i),pe("invalid",r)}ld(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&ba(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&ba(r.textContent,u,t),s=["children",""+u]):uo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":wa(r),yp(r,i,!0);break;case"textarea":wa(r),_p(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[en]=e,t[wo]=r,qv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ud(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)pe($i[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":gp(t,r),s=rd(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),pe("invalid",t);break;case"textarea":vp(t,r),s=od(t,r),pe("invalid",t);break;default:s=r}ld(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?T0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&x0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&co(t,c):typeof c=="number"&&co(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&pe("scroll",t):c!=null&&Th(t,i,c,o))}switch(n){case"input":wa(t),yp(t,r,!1);break;case"textarea":wa(t),_p(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)Wv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Mr(Eo.current),Mr(nn.current),Aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(i=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ba(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return Ze(e),null;case 13:if(ye(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Et!==null&&e.mode&1&&!(e.flags&128))cv(),$s(),e.flags|=98560,i=!1;else if(i=Aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[en]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Bt!==null&&($d(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Oe===0&&(Oe=3):of())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return Hs(),Vd(t,e),t===null&&vo(e.stateNode.containerInfo),Ze(e),null;case 10:return Bh(e.type._context),Ze(e),null;case 17:return yt(e.type)&&_l(),Ze(e),null;case 19:if(ye(we),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Li(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kl(t),o!==null){for(e.flags|=128,Li(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Gs&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304)}else{if(!r)if(t=kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return Ze(e),null}else 2*Ae()-i.renderingStartTime>Gs&&n!==1073741824&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=we.current,he(we,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function DT(t,e){switch(Lh(e),e.tag){case 1:return yt(e.type)&&_l(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hs(),ye(gt),ye(st),Gh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wh(e),null;case 13:if(ye(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));$s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(we),null;case 4:return Hs(),null;case 10:return Bh(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Pa=!1,nt=!1,VT=typeof WeakSet=="function"?WeakSet:Set,H=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function Od(t,e,n){try{n()}catch(r){ke(t,e,r)}}var lg=!1;function OT(t,e){if(_d=pl,t=Y0(),Oh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,f=0,p=t,g=null;t:for(;;){for(var E;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++f===r&&(c=o),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},pl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var A=k.memoizedProps,P=k.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?A:Ut(e.type,A),P);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(D){ke(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=lg,lg=!1,k}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Od(e,n,i)}s=s.next}while(s!==r)}}function lu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Md(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gv(t){var e=t.alternate;e!==null&&(t.alternate=null,Gv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[wo],delete e[Td],delete e[vT],delete e[_T])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kv(t){return t.tag===5||t.tag===3||t.tag===4}function ug(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vl));else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}function Fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fd(t,e,n),t=t.sibling;t!==null;)Fd(t,e,n),t=t.sibling}var Be=null,zt=!1;function zn(t,e,n){for(n=n.child;n!==null;)Qv(t,e,n),n=n.sibling}function Qv(t,e,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(eu,n)}catch{}switch(n.tag){case 5:nt||bs(n,e);case 6:var r=Be,s=zt;Be=null,zn(t,e,n),Be=r,zt=s,Be!==null&&(zt?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(zt?(t=Be,n=n.stateNode,t.nodeType===8?bc(t.parentNode,n):t.nodeType===1&&bc(t,n),po(t)):bc(Be,n.stateNode));break;case 4:r=Be,s=zt,Be=n.stateNode.containerInfo,zt=!0,zn(t,e,n),Be=r,zt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Od(n,e,o),s=s.next}while(s!==r)}zn(t,e,n);break;case 1:if(!nt&&(bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ke(n,e,u)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,zn(t,e,n),nt=r):zn(t,e,n);break;default:zn(t,e,n)}}function cg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VT),e.forEach(function(r){var s=HT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Be=u.stateNode,zt=!1;break e;case 3:Be=u.stateNode.containerInfo,zt=!0;break e;case 4:Be=u.stateNode.containerInfo,zt=!0;break e}u=u.return}if(Be===null)throw Error(L(160));Qv(i,o,s),Be=null,zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){ke(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xv(e,t),e=e.sibling}function Xv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Yt(t),r&4){try{eo(3,t,t.return),lu(3,t)}catch(A){ke(t,t.return,A)}try{eo(5,t,t.return)}catch(A){ke(t,t.return,A)}}break;case 1:Ft(e,t),Yt(t),r&512&&n!==null&&bs(n,n.return);break;case 5:if(Ft(e,t),Yt(t),r&512&&n!==null&&bs(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(A){ke(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&v0(s,i),ud(u,o);var h=ud(u,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?T0(s,p):f==="dangerouslySetInnerHTML"?x0(s,p):f==="children"?co(s,p):Th(s,f,p,h)}switch(u){case"input":sd(s,i);break;case"textarea":_0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Cs(s,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?Cs(s,!!i.multiple,i.defaultValue,!0):Cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[wo]=i}catch(A){ke(t,t.return,A)}}break;case 6:if(Ft(e,t),Yt(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){ke(t,t.return,A)}}break;case 3:if(Ft(e,t),Yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{po(e.containerInfo)}catch(A){ke(t,t.return,A)}break;case 4:Ft(e,t),Yt(t);break;case 13:Ft(e,t),Yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nf=Ae())),r&4&&cg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(h=nt)||f,Ft(e,t),nt=h):Ft(e,t),Yt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(g=H,E=g.child,g.tag){case 0:case 11:case 14:case 15:eo(4,g,g.return);break;case 1:bs(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(A){ke(r,n,A)}}break;case 5:bs(g,g.return);break;case 22:if(g.memoizedState!==null){hg(p);continue}}E!==null?(E.return=g,H=E):hg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=E0("display",o))}catch(A){ke(t,t.return,A)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(A){ke(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(e,t),Yt(t),r&4&&cg(t);break;case 21:break;default:Ft(e,t),Yt(t)}}function Yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kv(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=ug(t);Fd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=ug(t);Ld(t,u,o);break;default:throw Error(L(161))}}catch(c){ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MT(t,e,n){H=t,Yv(t)}function Yv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pa;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||nt;u=Pa;var h=nt;if(Pa=o,(nt=c)&&!h)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?fg(s):c!==null?(c.return=o,H=c):fg(s);for(;i!==null;)H=i,Yv(i),i=i.sibling;H=s,Pa=u,nt=h}dg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):dg(t)}}function dg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||lu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qp(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&po(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}nt||e.flags&512&&Md(e)}catch(g){ke(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function hg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function fg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lu(4,e)}catch(c){ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ke(e,s,c)}}var i=e.return;try{Md(e)}catch(c){ke(e,i,c)}break;case 5:var o=e.return;try{Md(e)}catch(c){ke(e,o,c)}}}catch(c){ke(e,e.return,c)}if(e===t){H=null;break}var u=e.sibling;if(u!==null){u.return=e.return,H=u;break}H=e.return}}var LT=Math.ceil,Al=Vn.ReactCurrentDispatcher,ef=Vn.ReactCurrentOwner,Dt=Vn.ReactCurrentBatchConfig,ie=0,Ue=null,Pe=null,He=0,xt=0,As=Er(0),Oe=0,ko=null,Gr=0,uu=0,tf=0,to=null,ft=null,nf=0,Gs=1/0,vn=null,Cl=!1,Ud=null,sr=null,ja=!1,Yn=null,Rl=0,no=0,zd=null,Ya=-1,Ja=0;function ut(){return ie&6?Ae():Ya!==-1?Ya:Ya=Ae()}function ir(t){return t.mode&1?ie&2&&He!==0?He&-He:xT.transition!==null?(Ja===0&&(Ja=V0()),Ja):(t=le,t!==0||(t=window.event,t=t===void 0?16:B0(t.type)),t):1}function Wt(t,e,n,r){if(50<no)throw no=0,zd=null,Error(L(185));Lo(t,n,r),(!(ie&2)||t!==Ue)&&(t===Ue&&(!(ie&2)&&(uu|=n),Oe===4&&Wn(t,He)),vt(t,r),n===1&&ie===0&&!(e.mode&1)&&(Gs=Ae()+500,iu&&Tr()))}function vt(t,e){var n=t.callbackNode;xE(t,e);var r=ml(t,t===Ue?He:0);if(r===0)n!==null&&Ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ep(n),e===1)t.tag===0?wT(mg.bind(null,t)):av(mg.bind(null,t)),gT(function(){!(ie&6)&&Tr()}),n=null;else{switch(O0(r)){case 1:n=bh;break;case 4:n=j0;break;case 16:n=fl;break;case 536870912:n=D0;break;default:n=fl}n=i_(n,Jv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jv(t,e){if(Ya=-1,Ja=0,ie&6)throw Error(L(327));var n=t.callbackNode;if(Vs()&&t.callbackNode!==n)return null;var r=ml(t,t===Ue?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pl(t,r);else{e=r;var s=ie;ie|=2;var i=e_();(Ue!==t||He!==e)&&(vn=null,Gs=Ae()+500,Ur(t,e));do try{zT();break}catch(u){Zv(t,u)}while(!0);zh(),Al.current=i,ie=s,Pe!==null?e=0:(Ue=null,He=0,e=Oe)}if(e!==0){if(e===2&&(s=md(t),s!==0&&(r=s,e=Bd(t,s))),e===1)throw n=ko,Ur(t,0),Wn(t,r),vt(t,Ae()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!FT(s)&&(e=Pl(t,r),e===2&&(i=md(t),i!==0&&(r=i,e=Bd(t,i))),e===1))throw n=ko,Ur(t,0),Wn(t,r),vt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:jr(t,ft,vn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=nf+500-Ae(),10<e)){if(ml(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ed(jr.bind(null,t,ft,vn),e);break}jr(t,ft,vn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ht(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LT(r/1960))-r,10<r){t.timeoutHandle=Ed(jr.bind(null,t,ft,vn),r);break}jr(t,ft,vn);break;case 5:jr(t,ft,vn);break;default:throw Error(L(329))}}}return vt(t,Ae()),t.callbackNode===n?Jv.bind(null,t):null}function Bd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Ur(t,e).flags|=256),t=Pl(t,e),t!==2&&(e=ft,ft=n,e!==null&&$d(e)),t}function $d(t){ft===null?ft=t:ft.push.apply(ft,t)}function FT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~tf,e&=~uu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function mg(t){if(ie&6)throw Error(L(327));Vs();var e=ml(t,0);if(!(e&1))return vt(t,Ae()),null;var n=Pl(t,e);if(t.tag!==0&&n===2){var r=md(t);r!==0&&(e=r,n=Bd(t,r))}if(n===1)throw n=ko,Ur(t,0),Wn(t,e),vt(t,Ae()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,ft,vn),vt(t,Ae()),null}function rf(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(Gs=Ae()+500,iu&&Tr())}}function Kr(t){Yn!==null&&Yn.tag===0&&!(ie&6)&&Vs();var e=ie;ie|=1;var n=Dt.transition,r=le;try{if(Dt.transition=null,le=1,t)return t()}finally{le=r,Dt.transition=n,ie=e,!(ie&6)&&Tr()}}function sf(){xt=As.current,ye(As)}function Ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pT(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Lh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:Hs(),ye(gt),ye(st),Gh();break;case 5:Wh(r);break;case 4:Hs();break;case 13:ye(we);break;case 19:ye(we);break;case 10:Bh(r.type._context);break;case 22:case 23:sf()}n=n.return}if(Ue=t,Pe=t=or(t.current,null),He=xt=e,Oe=0,ko=null,tf=uu=Gr=0,ft=to=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Or=null}return t}function Zv(t,e){do{var n=Pe;try{if(zh(),Ka.current=bl,Nl){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nl=!1}if(Wr=0,Fe=Ve=xe=null,Zi=!1,To=0,ef.current=null,n===null||n.return===null){Oe=1,ko=e,Pe=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=He,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=tg(o);if(E!==null){E.flags&=-257,ng(E,o,u,i,e),E.mode&1&&eg(i,h,e),e=E,c=h;var k=e.updateQueue;if(k===null){var A=new Set;A.add(c),e.updateQueue=A}else k.add(c);break e}else{if(!(e&1)){eg(i,h,e),of();break e}c=Error(L(426))}}else if(ve&&u.mode&1){var P=tg(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ng(P,o,u,i,e),Fh(Ws(c,u));break e}}i=c=Ws(c,u),Oe!==4&&(Oe=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=Ov(i,c,e);Kp(i,T);break e;case 1:u=c;var w=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(sr===null||!sr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Mv(i,u,e);Kp(i,D);break e}}i=i.return}while(i!==null)}n_(n)}catch(F){e=F,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function e_(){var t=Al.current;return Al.current=bl,t===null?bl:t}function of(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ue===null||!(Gr&268435455)&&!(uu&268435455)||Wn(Ue,He)}function Pl(t,e){var n=ie;ie|=2;var r=e_();(Ue!==t||He!==e)&&(vn=null,Ur(t,e));do try{UT();break}catch(s){Zv(t,s)}while(!0);if(zh(),ie=n,Al.current=r,Pe!==null)throw Error(L(261));return Ue=null,He=0,Oe}function UT(){for(;Pe!==null;)t_(Pe)}function zT(){for(;Pe!==null&&!hE();)t_(Pe)}function t_(t){var e=s_(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?n_(t):Pe=e,ef.current=null}function n_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DT(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Pe=null;return}}else if(n=jT(n,e,xt),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Oe===0&&(Oe=5)}function jr(t,e,n){var r=le,s=Dt.transition;try{Dt.transition=null,le=1,BT(t,e,n,r)}finally{Dt.transition=s,le=r}return null}function BT(t,e,n,r){do Vs();while(Yn!==null);if(ie&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(EE(t,i),t===Ue&&(Pe=Ue=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ja||(ja=!0,i_(fl,function(){return Vs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var o=le;le=1;var u=ie;ie|=4,ef.current=null,OT(t,n),Xv(n,t),lT(wd),pl=!!_d,wd=_d=null,t.current=n,MT(n),fE(),ie=u,le=o,Dt.transition=i}else t.current=n;if(ja&&(ja=!1,Yn=t,Rl=s),i=t.pendingLanes,i===0&&(sr=null),gE(n.stateNode),vt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cl)throw Cl=!1,t=Ud,Ud=null,t;return Rl&1&&t.tag!==0&&Vs(),i=t.pendingLanes,i&1?t===zd?no++:(no=0,zd=t):no=0,Tr(),null}function Vs(){if(Yn!==null){var t=O0(Rl),e=Dt.transition,n=le;try{if(Dt.transition=null,le=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Rl=0,ie&6)throw Error(L(331));var s=ie;for(ie|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:eo(8,f,i)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var g=f.sibling,E=f.return;if(Gv(f),f===h){H=null;break}if(g!==null){g.return=E,H=g;break}H=E}}}var k=i.alternate;if(k!==null){var A=k.child;if(A!==null){k.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,H=T;break e}H=i.return}}var w=t.current;for(H=w;H!==null;){o=H;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,H=I;else e:for(o=w;H!==null;){if(u=H,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:lu(9,u)}}catch(F){ke(u,u.return,F)}if(u===o){H=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,H=D;break e}H=u.return}}if(ie=s,Tr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(eu,t)}catch{}r=!0}return r}finally{le=n,Dt.transition=e}}return!1}function pg(t,e,n){e=Ws(n,e),e=Ov(t,e,1),t=rr(t,e,1),e=ut(),t!==null&&(Lo(t,1,e),vt(t,e))}function ke(t,e,n){if(t.tag===3)pg(t,t,n);else for(;e!==null;){if(e.tag===3){pg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){t=Ws(n,t),t=Mv(e,t,1),e=rr(e,t,1),t=ut(),e!==null&&(Lo(e,1,t),vt(e,t));break}}e=e.return}}function $T(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,Ue===t&&(He&n)===n&&(Oe===4||Oe===3&&(He&130023424)===He&&500>Ae()-nf?Ur(t,0):tf|=n),vt(t,e)}function r_(t,e){e===0&&(t.mode&1?(e=Ta,Ta<<=1,!(Ta&130023424)&&(Ta=4194304)):e=1);var n=ut();t=An(t,e),t!==null&&(Lo(t,e,n),vt(t,n))}function qT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r_(t,n)}function HT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),r_(t,n)}var s_;s_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gt.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,PT(t,e,n);pt=!!(t.flags&131072)}else pt=!1,ve&&e.flags&1048576&&lv(e,El,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var s=Bs(e,st.current);Ds(e,n),s=Qh(null,e,r,t,s,n);var i=Xh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(r)?(i=!0,wl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qh(e),s.updater=au,e.stateNode=s,s._reactInternals=e,Ad(e,r,t,n),e=Pd(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&Mh(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=GT(r),t=Ut(r,t),s){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=ig(null,e,r,t,n);break e;case 11:e=rg(null,e,r,t,n);break e;case 14:e=sg(null,e,r,Ut(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),ig(t,e,r,s,n);case 3:e:{if(zv(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mv(t,e),Sl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ws(Error(L(423)),e),e=og(t,e,r,n,s);break e}else if(r!==s){s=Ws(Error(L(424)),e),e=og(t,e,r,n,s);break e}else for(Et=nr(e.stateNode.containerInfo.firstChild),It=e,ve=!0,Bt=null,n=hv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===s){e=Cn(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return pv(e),t===null&&kd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xd(r,s)?o=null:i!==null&&xd(r,i)&&(e.flags|=32),Uv(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&kd(e),null;case 13:return Bv(t,e,n);case 4:return Hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),rg(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,he(Tl,r._currentValue),r._currentValue=o,i!==null)if(Kt(i.value,o)){if(i.children===s.children&&!gt.current){e=Cn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Sn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nd(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Nd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ds(e,n),s=Ot(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),sg(t,e,r,s,n);case 15:return Lv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Xa(t,e),e.tag=1,yt(r)?(t=!0,wl(e)):t=!1,Ds(e,n),Vv(e,r,s),Ad(e,r,s,n),Pd(null,e,r,!0,t,n);case 19:return $v(t,e,n);case 22:return Fv(t,e,n)}throw Error(L(156,e.tag))};function i_(t,e){return P0(t,e)}function WT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,r){return new WT(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GT(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sh)return 11;if(t===kh)return 14}return 2}function or(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Za(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _s:return zr(n.children,s,i,e);case Ih:o=8,s|=8;break;case Zc:return t=jt(12,n,e,s|2),t.elementType=Zc,t.lanes=i,t;case ed:return t=jt(13,n,e,s),t.elementType=ed,t.lanes=i,t;case td:return t=jt(19,n,e,s),t.elementType=td,t.lanes=i,t;case p0:return cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f0:o=10;break e;case m0:o=9;break e;case Sh:o=11;break e;case kh:o=14;break e;case $n:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zr(t,e,n,r){return t=jt(7,t,r,e),t.lanes=n,t}function cu(t,e,n,r){return t=jt(22,t,r,e),t.elementType=p0,t.lanes=n,t.stateNode={isHidden:!1},t}function Oc(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function Mc(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yc(0),this.expirationTimes=yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lf(t,e,n,r,s,i,o,u,c){return t=new KT(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qh(i),t}function QT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function o_(t){if(!t)return fr;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(yt(n))return ov(t,n,e)}return e}function a_(t,e,n,r,s,i,o,u,c){return t=lf(n,r,!0,t,s,i,o,u,c),t.context=o_(null),n=t.current,r=ut(),s=ir(n),i=Sn(r,s),i.callback=e??null,rr(n,i,s),t.current.lanes=s,Lo(t,s,r),vt(t,r),t}function du(t,e,n,r){var s=e.current,i=ut(),o=ir(s);return n=o_(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rr(s,e,o),t!==null&&(Wt(t,s,o,i),Ga(t,s,o)),o}function jl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uf(t,e){gg(t,e),(t=t.alternate)&&gg(t,e)}function XT(){return null}var l_=typeof reportError=="function"?reportError:function(t){console.error(t)};function cf(t){this._internalRoot=t}hu.prototype.render=cf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));du(t,e,null,null)};hu.prototype.unmount=cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kr(function(){du(null,t,null,null)}),e[bn]=null}};function hu(t){this._internalRoot=t}hu.prototype.unstable_scheduleHydration=function(t){if(t){var e=F0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&z0(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yg(){}function YT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=jl(o);i.call(h)}}var o=a_(e,r,t,0,null,!1,!1,"",yg);return t._reactRootContainer=o,t[bn]=o.current,vo(t.nodeType===8?t.parentNode:t),Kr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=jl(c);u.call(h)}}var c=lf(t,0,!1,null,null,!1,!1,"",yg);return t._reactRootContainer=c,t[bn]=c.current,vo(t.nodeType===8?t.parentNode:t),Kr(function(){du(e,c,n,r)}),c}function mu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=jl(o);u.call(c)}}du(e,o,t,s)}else o=YT(n,e,t,s,r);return jl(o)}M0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bi(e.pendingLanes);n!==0&&(Ah(e,n|1),vt(e,Ae()),!(ie&6)&&(Gs=Ae()+500,Tr()))}break;case 13:Kr(function(){var r=An(t,1);if(r!==null){var s=ut();Wt(r,t,1,s)}}),uf(t,1)}};Ch=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=ut();Wt(e,t,134217728,n)}uf(t,134217728)}};L0=function(t){if(t.tag===13){var e=ir(t),n=An(t,e);if(n!==null){var r=ut();Wt(n,t,e,r)}uf(t,e)}};F0=function(){return le};U0=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};dd=function(t,e,n){switch(e){case"input":if(sd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=su(r);if(!s)throw Error(L(90));y0(r),sd(r,s)}}}break;case"textarea":_0(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};k0=rf;N0=Kr;var JT={usingClientEntryPoint:!1,Events:[Uo,Ts,su,I0,S0,rf]},Fi={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZT={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C0(t),t===null?null:t.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||XT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{eu=Da.inject(ZT),tn=Da}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JT;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(L(200));return QT(t,e,null,n)};Nt.createRoot=function(t,e){if(!df(t))throw Error(L(299));var n=!1,r="",s=l_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lf(t,1,!1,null,null,n,!1,r,s),t[bn]=e.current,vo(t.nodeType===8?t.parentNode:t),new cf(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=C0(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Kr(t)};Nt.hydrate=function(t,e,n){if(!fu(e))throw Error(L(200));return mu(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!df(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=l_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=a_(e,null,t,1,n??null,s,!1,i,o),t[bn]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hu(e)};Nt.render=function(t,e,n){if(!fu(e))throw Error(L(200));return mu(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!fu(t))throw Error(L(40));return t._reactRootContainer?(Kr(function(){mu(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};Nt.unstable_batchedUpdates=rf;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fu(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return mu(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function u_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u_)}catch(t){console.error(t)}}u_(),u0.exports=Nt;var eI=u0.exports,c_,vg=eI;c_=vg.createRoot,vg.hydrateRoot;const tI=()=>{};var _g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,E=h&63;c||(E=64,o||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(d_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new rI;const g=i<<2|u>>4;if(r.push(g),h!==64){const E=u<<4&240|h>>2;if(r.push(E),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(t){const e=d_(t);return h_.encodeByteArray(e,!0)},Dl=function(t){return sI(t).replace(/\./g,"")},f_=function(t){try{return h_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=()=>iI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof _g>"u")return;const t=_g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&f_(t[1]);return e&&JSON.parse(e)},pu=()=>{try{return tI()||oI()||aI()||lI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},m_=t=>{var e,n;return(n=(e=pu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uI=t=>{const e=m_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},p_=()=>{var t;return(t=pu())===null||t===void 0?void 0:t.config},g_=t=>{var e;return(e=pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dl(JSON.stringify(n)),Dl(JSON.stringify(o)),""].join(".")}const ro={};function hI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ro))ro[e]?t.emulator.push(e):t.prod.push(e);return t}function fI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wg=!1;function v_(t,e){if(typeof window>"u"||typeof document>"u"||!oi(window.location.host)||ro[t]===e||ro[t]||wg)return;ro[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=hI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{wg=!0,o()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=fI(r),E=n("text"),k=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),P=document.getElementById(A)||document.createElement("a"),T=n("preprendIcon"),w=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;u(I),f(P,A);const D=h();c(w,T),I.append(w,k,P,D),document.body.appendChild(I)}i?(k.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function pI(){var t;const e=(t=pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _I(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wI(){return!pI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xI(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TI,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?II(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new On(s,u,r)}}function II(t,e){return t.replace(SI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SI=/\{\$([^}]+)}/g;function kI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xg(i)&&xg(o)){if(!Qr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function NI(t,e){const n=new bI(t,e);return n.subscribe.bind(n)}class bI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Lc),s.error===void 0&&(s.error=Lc),s.complete===void 0&&(s.complete=Lc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PI(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RI(t){return t===Dr?void 0:t}function PI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const DI={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},VI=ne.INFO,OI={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},MI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hf{constructor(e){this.name=e,this._logLevel=VI,this._logHandler=MI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const LI=(t,e)=>e.some(n=>t instanceof n);let Eg,Tg;function FI(){return Eg||(Eg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UI(){return Tg||(Tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const __=new WeakMap,qd=new WeakMap,w_=new WeakMap,Fc=new WeakMap,ff=new WeakMap;function zI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&__.set(n,t)}).catch(()=>{}),ff.set(e,t),e}function BI(t){if(qd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});qd.set(t,e)}let Hd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $I(t){Hd=t(Hd)}function qI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uc(this),e,...n);return w_.set(r,e.sort?e.sort():[e]),ar(r)}:UI().includes(t)?function(...e){return t.apply(Uc(this),e),ar(__.get(this))}:function(...e){return ar(t.apply(Uc(this),e))}}function HI(t){return typeof t=="function"?qI(t):(t instanceof IDBTransaction&&BI(t),LI(t,FI())?new Proxy(t,Hd):t)}function ar(t){if(t instanceof IDBRequest)return zI(t);if(Fc.has(t))return Fc.get(t);const e=HI(t);return e!==t&&(Fc.set(t,e),ff.set(e,t)),e}const Uc=t=>ff.get(t);function WI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=ar(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ar(o.result),c.oldVersion,c.newVersion,ar(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const GI=["get","getKey","getAll","getAllKeys","count"],KI=["put","add","delete","clear"],zc=new Map;function Ig(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zc.get(e))return zc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GI.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return zc.set(e,i),i}$I(t=>({...t,get:(e,n,r)=>Ig(e,n)||t.get(e,n,r),has:(e,n)=>!!Ig(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",Sg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new hf("@firebase/app"),YI="@firebase/app-compat",JI="@firebase/analytics-compat",ZI="@firebase/analytics",eS="@firebase/app-check-compat",tS="@firebase/app-check",nS="@firebase/auth",rS="@firebase/auth-compat",sS="@firebase/database",iS="@firebase/data-connect",oS="@firebase/database-compat",aS="@firebase/functions",lS="@firebase/functions-compat",uS="@firebase/installations",cS="@firebase/installations-compat",dS="@firebase/messaging",hS="@firebase/messaging-compat",fS="@firebase/performance",mS="@firebase/performance-compat",pS="@firebase/remote-config",gS="@firebase/remote-config-compat",yS="@firebase/storage",vS="@firebase/storage-compat",_S="@firebase/firestore",wS="@firebase/ai",xS="@firebase/firestore-compat",ES="firebase",TS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",IS={[Wd]:"fire-core",[YI]:"fire-core-compat",[ZI]:"fire-analytics",[JI]:"fire-analytics-compat",[tS]:"fire-app-check",[eS]:"fire-app-check-compat",[nS]:"fire-auth",[rS]:"fire-auth-compat",[sS]:"fire-rtdb",[iS]:"fire-data-connect",[oS]:"fire-rtdb-compat",[aS]:"fire-fn",[lS]:"fire-fn-compat",[uS]:"fire-iid",[cS]:"fire-iid-compat",[dS]:"fire-fcm",[hS]:"fire-fcm-compat",[fS]:"fire-perf",[mS]:"fire-perf-compat",[pS]:"fire-rc",[gS]:"fire-rc-compat",[yS]:"fire-gcs",[vS]:"fire-gcs-compat",[_S]:"fire-fst",[xS]:"fire-fst-compat",[wS]:"fire-vertex","fire-js":"fire-js",[ES]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,SS=new Map,Kd=new Map;function kg(t,e){try{t.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(Kd.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,t);for(const n of Vl.values())kg(n,t);for(const n of SS.values())kg(n,t);return!0}function mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Bo("app","Firebase",kS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=TS;function x_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw lr.create("bad-app-name",{appName:String(s)});if(n||(n=p_()),!n)throw lr.create("no-options");const i=Vl.get(s);if(i){if(Qr(n,i.options)&&Qr(r,i.config))return i;throw lr.create("duplicate-app",{appName:s})}const o=new jI(s);for(const c of Kd.values())o.addComponent(c);const u=new NS(n,r,o);return Vl.set(s,u),u}function E_(t=Gd){const e=Vl.get(t);if(!e&&t===Gd&&p_())return x_();if(!e)throw lr.create("no-app",{appName:t});return e}function ur(t,e,n){var r;let s=(r=IS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(u.join(" "));return}Ks(new Xr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firebase-heartbeat-database",AS=1,No="firebase-heartbeat-store";let Bc=null;function T_(){return Bc||(Bc=WI(bS,AS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(No)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),Bc}async function CS(t){try{const n=(await T_()).transaction(No),r=await n.objectStore(No).get(I_(t));return await n.done,r}catch(e){if(e instanceof On)Rn.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function Ng(t,e){try{const r=(await T_()).transaction(No,"readwrite");await r.objectStore(No).put(e,I_(t)),await r.done}catch(n){if(n instanceof On)Rn.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(r.message)}}}function I_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,PS=30;class jS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>PS){const o=OS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bg(),{heartbeatsToSend:r,unsentEntries:s}=DS(this._heartbeatsCache.heartbeats),i=Dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rn.warn(n),""}}}function bg(){return new Date().toISOString().substring(0,10)}function DS(t,e=RS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ag(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ag(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xI()?EI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ag(t){return Dl(JSON.stringify({version:2,heartbeats:t})).length}function OS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){Ks(new Xr("platform-logger",e=>new QI(e),"PRIVATE")),Ks(new Xr("heartbeat",e=>new jS(e),"PRIVATE")),ur(Wd,Sg,t),ur(Wd,Sg,"esm2017"),ur("fire-js","")}MS("");function pf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LS=S_,k_=new Bo("auth","Firebase",S_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new hf("@firebase/auth");function FS(t,...e){Ol.logLevel<=ne.WARN&&Ol.warn(`Auth (${ai}): ${t}`,...e)}function el(t,...e){Ol.logLevel<=ne.ERROR&&Ol.error(`Auth (${ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw yf(t,...e)}function Gt(t,...e){return yf(t,...e)}function gf(t,e,n){const r=Object.assign(Object.assign({},LS()),{[e]:n});return new Bo("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return gf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function US(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&un(t,"argument-error"),gf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return k_.create(t,...e)}function K(t,e,...n){if(!t)throw yf(e,...n)}function Tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw el(e),new Error(e)}function Pn(t,e){t||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zS(){return Cg()==="http:"||Cg()==="https:"}function Cg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zS()||yI()||"connection"in navigator)?navigator.onLine:!0}function $S(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pn(n>e,"Short delay should be less than long delay!"),this.isMobile=mI()||vI()}get(){return BS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t,e){Pn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WS=new qo(3e4,6e4);function _f(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function li(t,e,n,r,s={}){return b_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=$o(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return gI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&oi(t.emulatorConfig.host)&&(h.credentials="include"),N_.fetch()(await A_(t,t.config.apiHost,n,u),h)})}async function b_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qS),e);try{const s=new KS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Va(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Va(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Va(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Va(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gf(t,f,h);un(t,f)}}catch(s){if(s instanceof On)throw s;un(t,"network-request-failed",{message:String(s)})}}async function GS(t,e,n,r,s={}){const i=await li(t,e,n,r,s);return"mfaPendingCredential"in i&&un(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function A_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?vf(t.config,s):`${t.config.apiScheme}://${s}`;return HS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class KS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),WS.get())})}}function Va(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e){return li(t,"POST","/v1/accounts:delete",e)}async function Ml(t,e){return li(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=wf(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:so($c(s.auth_time)),issuedAtTime:so($c(s.iat)),expirationTime:so($c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $c(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{const s=f_(n);return s?JSON.parse(s):(el("Failed to decode base64 JWT payload"),null)}catch(s){return el("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rg(t){const e=wf(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&YS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bo(t,Ml(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?C_(i.providerUserInfo):[],u=e2(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),f=c?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Xd(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function ZS(t){const e=Ge(t);await Ll(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function C_(t){return t.map(e=>{var{providerId:n}=e,r=pf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e){const n=await b_(t,{},async()=>{const r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await A_(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&oi(t.emulatorConfig.host)&&(c.credentials="include"),N_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function n2(t,e){return li(t,"POST","/v2/accounts:revokeToken",_f(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Rg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await t2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Os;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Os,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qt{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Xd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XS(this,e)}reload(){return ZS(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ll(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await bo(this,QS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,h,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,T=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:D,isAnonymous:F,providerData:U,stsTokenManager:_}=n;K(I&&_,e,"internal-error");const v=Os.fromJSON(this.name,_);K(typeof I=="string",e,"internal-error"),Bn(p,e.name),Bn(g,e.name),K(typeof D=="boolean",e,"internal-error"),K(typeof F=="boolean",e,"internal-error"),Bn(E,e.name),Bn(k,e.name),Bn(A,e.name),Bn(P,e.name),Bn(T,e.name),Bn(w,e.name);const x=new qt({uid:I,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:F,photoURL:k,phoneNumber:E,tenantId:A,stsTokenManager:v,createdAt:T,lastLoginAt:w});return U&&Array.isArray(U)&&(x.providerData=U.map(S=>Object.assign({},S))),P&&(x._redirectEventId=P),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Os;s.updateFromServerResponse(n);const i=new qt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ll(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?C_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Os;u.updateFromIdToken(r);const c=new qt({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new Map;function In(t){Pn(t instanceof Function,"Expected a class definition");let e=Pg.get(t);return e?(Pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R_.type="NONE";const jg=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ms{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ml(this.auth,{idToken:e}).catch(()=>{});return n?qt._fromGetAccountInfoResponse(this.auth,n,e):null}return qt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ms(In(jg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||In(jg);const o=tl(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const g=await Ml(e,{idToken:f}).catch(()=>{});if(!g)break;p=await qt._fromGetAccountInfoResponse(e,g,f)}else p=qt._fromJSON(e,f);h!==i&&(u=p),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ms(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ms(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M_(e))return"Blackberry";if(L_(e))return"Webos";if(j_(e))return"Safari";if((e.includes("chrome/")||D_(e))&&!e.includes("edge/"))return"Chrome";if(O_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function P_(t=it()){return/firefox\//i.test(t)}function j_(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D_(t=it()){return/crios\//i.test(t)}function V_(t=it()){return/iemobile/i.test(t)}function O_(t=it()){return/android/i.test(t)}function M_(t=it()){return/blackberry/i.test(t)}function L_(t=it()){return/webos/i.test(t)}function xf(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r2(t=it()){var e;return xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s2(){return _I()&&document.documentMode===10}function F_(t=it()){return xf(t)||O_(t)||L_(t)||M_(t)||/windows phone/i.test(t)||V_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e=[]){let n;switch(t){case"Browser":n=Dg(it());break;case"Worker":n=`${Dg(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e={}){return li(t,"GET","/v2/passwordPolicy",_f(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=6;class l2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:a2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vg(this),this.idTokenSubscription=new Vg(this),this.beforeStateQueue=new i2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=In(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ml(this,{idToken:e}),r=await qt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ll(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$S()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Br(this));const n=e?Ge(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(In(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o2(this),n=new l2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await n2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&In(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[In(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gu(t){return Ge(t)}class Vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=NI(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c2(t){Ef=t}function d2(t){return Ef.loadJS(t)}function h2(){return Ef.gapiScript}function f2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){const n=mf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qr(i,e??{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function p2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(In);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function g2(t,e,n){const r=gu(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=z_(e),{host:o,port:u}=y2(e),c=u===null?"":`:${u}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Qr(h,r.config.emulator)&&Qr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,oi(o)?(y_(`${i}//${o}${c}`),v_("Auth",!0)):v2()}function z_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function y2(t){const e=z_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Og(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Og(o)}}}function Og(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function v2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t,e){return GS(t,"POST","/v1/accounts:signInWithIdp",_f(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="http://localhost";class Yr extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=pf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Yr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ls(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}buildRequest(){const e={requestUri:_2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends Ho{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends Ho{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wn.credential(n,r)}catch{return null}}}wn.GOOGLE_SIGN_IN_METHOD="google.com";wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Ho{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com";Kn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Ho{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qn.credential(n,r)}catch{return null}}}Qn.TWITTER_SIGN_IN_METHOD="twitter.com";Qn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qt._fromIdTokenResponse(e,r,s),o=Mg(r);return new Qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mg(r);return new Qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fl(e,n,r,s)}}function $_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fl._fromErrorAndOperation(t,i,e,r):i})}async function w2(t,e,n=!1){const r=await bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(Br(r));const s="reauthenticate";try{const i=await bo(t,$_(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=wf(i.idToken);K(o,r,"internal-error");const{sub:u}=o;return K(t.uid===u,r,"user-mismatch"),Qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e,n=!1){if($t(t.app))return Promise.reject(Br(t));const r="signIn",s=await $_(t,r,e),i=await Qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function T2(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function I2(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function S2(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function k2(t){return Ge(t).signOut()}const Ul="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ul,"1"),this.storage.removeItem(Ul),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=1e3,b2=10;class H_ extends q_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);s2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H_.type="LOCAL";const A2=H_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends q_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}W_.type="SESSION";const G_=W_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async h=>h(n.origin,i)),c=await C2(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const h=If("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function P2(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function j2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function V2(){return K_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="firebaseLocalStorageDb",O2=1,zl="firebaseLocalStorage",X_="fbase_key";class Wo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vu(t,e){return t.transaction([zl],e?"readwrite":"readonly").objectStore(zl)}function M2(){const t=indexedDB.deleteDatabase(Q_);return new Wo(t).toPromise()}function Yd(){const t=indexedDB.open(Q_,O2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zl,{keyPath:X_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zl)?e(r):(r.close(),await M2(),e(await Yd()))})})}async function Lg(t,e,n){const r=vu(t,!0).put({[X_]:e,value:n});return new Wo(r).toPromise()}async function L2(t,e){const n=vu(t,!1).get(e),r=await new Wo(n).toPromise();return r===void 0?null:r.value}function Fg(t,e){const n=vu(t,!0).delete(e);return new Wo(n).toPromise()}const F2=800,U2=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>U2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(V2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await j2(),!this.activeServiceWorker)return;this.sender=new R2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await Lg(e,Ul,"1"),await Fg(e,Ul),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>L2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vu(s,!1).getAll();return new Wo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const z2=Y_;new qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){return e?In(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ls(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ls(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ls(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B2(t){return E2(t.auth,new Sf(t),t.bypassAuthState)}function $2(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),x2(n,new Sf(t),t.bypassAuthState)}async function q2(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),w2(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B2;case"linkViaPopup":case"linkViaRedirect":return q2;case"reauthViaPopup":case"reauthViaRedirect":return $2;default:un(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new qo(2e3,1e4);async function W2(t,e,n){if($t(t.app))return Promise.reject(Gt(t,"operation-not-supported-in-this-environment"));const r=gu(t);US(t,e,Tf);const s=J_(r,n);return new Lr(r,"signInViaPopup",e,s).executeNotNull()}class Lr extends Z_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Lr.currentPopupAction&&Lr.currentPopupAction.cancel(),Lr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Pn(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H2.get())};e()}}Lr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="pendingRedirect",nl=new Map;class K2 extends Z_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nl.get(this.auth._key());if(!e){try{const r=await Q2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q2(t,e){const n=J2(e),r=Y2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function X2(t,e){nl.set(t._key(),e)}function Y2(t){return In(t._redirectPersistence)}function J2(t){return tl(G2,t.config.apiKey,t.name)}async function Z2(t,e,n=!1){if($t(t.app))return Promise.reject(Br(t));const r=gu(t),s=J_(r,e),o=await new K2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=10*60*1e3;class tk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!e1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ug(e))}saveEventToCache(e){this.cachedEventUids.add(Ug(e)),this.lastProcessedEventTime=Date.now()}}function Ug(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function e1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e={}){return li(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ik=/^https?/;async function ok(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rk(t);for(const n of e)try{if(ak(n))return}catch{}un(t,"unauthorized-domain")}function ak(t){const e=Qd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ik.test(n))return!1;if(sk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new qo(3e4,6e4);function zg(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uk(t){return new Promise((e,n)=>{var r,s,i;function o(){zg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zg(),n(Gt(t,"network-request-failed"))},timeout:lk.get()})}if(!((s=(r=rn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rn().gapi)===null||i===void 0)&&i.load)o();else{const u=f2("iframefcb");return rn()[u]=()=>{gapi.load?o():n(Gt(t,"network-request-failed"))},d2(`${h2()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw rl=null,e})}let rl=null;function ck(t){return rl=rl||uk(t),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new qo(5e3,15e3),hk="__/auth/iframe",fk="emulator/auth/iframe",mk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gk(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vf(e,fk):`https://${t.config.authDomain}/${hk}`,r={apiKey:e.apiKey,appName:t.name,v:ai},s=pk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$o(r).slice(1)}`}async function yk(t){const e=await ck(t),n=rn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:gk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Gt(t,"network-request-failed"),u=rn().setTimeout(()=>{i(o)},dk.get());function c(){rn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_k=500,wk=600,xk="_blank",Ek="http://localhost";class Bg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tk(t,e,n,r=_k,s=wk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},vk),{width:r.toString(),height:s.toString(),top:i,left:o}),h=it().toLowerCase();n&&(u=D_(h)?xk:n),P_(h)&&(e=e||Ek,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[E,k])=>`${g}${E}=${k},`,"");if(r2(h)&&u!=="_self")return Ik(e||"",u),new Bg(null);const p=window.open(e||"",u,f);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Bg(p)}function Ik(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="__/auth/handler",kk="emulator/auth/handler",Nk=encodeURIComponent("fac");async function $g(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ai,eventId:s};if(e instanceof Tf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ho){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),h=c?`#${Nk}=${encodeURIComponent(c)}`:"";return`${bk(t)}?${$o(u).slice(1)}${h}`}function bk({config:t}){return t.emulator?vf(t,kk):`https://${t.authDomain}/${Sk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="webStorageSupport";class Ak{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G_,this._completeRedirectFn=Z2,this._overrideRedirectResult=X2}async _openPopup(e,n,r,s){var i;Pn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await $g(e,n,r,Qd(),s);return Tk(e,o,If())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await $g(e,n,r,Qd(),s);return P2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Pn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yk(e),r=new tk(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qc,{type:qc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[qc];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ok(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F_()||j_()||xf()}}const Ck=Ak;var qg="@firebase/auth",Hg="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jk(t){Ks(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U_(t)},h=new u2(r,s,i,c);return p2(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new Xr("auth-internal",e=>{const n=gu(e.getProvider("auth").getImmediate());return(r=>new Rk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(qg,Hg,Pk(t)),ur(qg,Hg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=5*60,Vk=g_("authIdTokenMaxAge")||Dk;let Wg=null;const Ok=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Vk)return;const s=n==null?void 0:n.token;Wg!==s&&(Wg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mk(t=E_()){const e=mf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=m2(t,{popupRedirectResolver:Ck,persistence:[z2,A2,G_]}),r=g_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Ok(i.toString());I2(n,o,()=>o(n.currentUser)),T2(n,u=>o(u))}}const s=m_("auth");return s&&g2(n,`http://${s}`),n}function Lk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Gt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Lk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jk("Browser");var Gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cr,t1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function x(){}x.prototype=v.prototype,_.D=v.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(S,b,R){for(var N=Array(arguments.length-2),At=2;At<arguments.length;At++)N[At-2]=arguments[At];return v.prototype[b].apply(S,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,v,x){x||(x=0);var S=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)S[b]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(b=0;16>b;++b)S[b]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=_.g[0],x=_.g[1],b=_.g[2];var R=_.g[3],N=v+(R^x&(b^R))+S[0]+3614090360&4294967295;v=x+(N<<7&4294967295|N>>>25),N=R+(b^v&(x^b))+S[1]+3905402710&4294967295,R=v+(N<<12&4294967295|N>>>20),N=b+(x^R&(v^x))+S[2]+606105819&4294967295,b=R+(N<<17&4294967295|N>>>15),N=x+(v^b&(R^v))+S[3]+3250441966&4294967295,x=b+(N<<22&4294967295|N>>>10),N=v+(R^x&(b^R))+S[4]+4118548399&4294967295,v=x+(N<<7&4294967295|N>>>25),N=R+(b^v&(x^b))+S[5]+1200080426&4294967295,R=v+(N<<12&4294967295|N>>>20),N=b+(x^R&(v^x))+S[6]+2821735955&4294967295,b=R+(N<<17&4294967295|N>>>15),N=x+(v^b&(R^v))+S[7]+4249261313&4294967295,x=b+(N<<22&4294967295|N>>>10),N=v+(R^x&(b^R))+S[8]+1770035416&4294967295,v=x+(N<<7&4294967295|N>>>25),N=R+(b^v&(x^b))+S[9]+2336552879&4294967295,R=v+(N<<12&4294967295|N>>>20),N=b+(x^R&(v^x))+S[10]+4294925233&4294967295,b=R+(N<<17&4294967295|N>>>15),N=x+(v^b&(R^v))+S[11]+2304563134&4294967295,x=b+(N<<22&4294967295|N>>>10),N=v+(R^x&(b^R))+S[12]+1804603682&4294967295,v=x+(N<<7&4294967295|N>>>25),N=R+(b^v&(x^b))+S[13]+4254626195&4294967295,R=v+(N<<12&4294967295|N>>>20),N=b+(x^R&(v^x))+S[14]+2792965006&4294967295,b=R+(N<<17&4294967295|N>>>15),N=x+(v^b&(R^v))+S[15]+1236535329&4294967295,x=b+(N<<22&4294967295|N>>>10),N=v+(b^R&(x^b))+S[1]+4129170786&4294967295,v=x+(N<<5&4294967295|N>>>27),N=R+(x^b&(v^x))+S[6]+3225465664&4294967295,R=v+(N<<9&4294967295|N>>>23),N=b+(v^x&(R^v))+S[11]+643717713&4294967295,b=R+(N<<14&4294967295|N>>>18),N=x+(R^v&(b^R))+S[0]+3921069994&4294967295,x=b+(N<<20&4294967295|N>>>12),N=v+(b^R&(x^b))+S[5]+3593408605&4294967295,v=x+(N<<5&4294967295|N>>>27),N=R+(x^b&(v^x))+S[10]+38016083&4294967295,R=v+(N<<9&4294967295|N>>>23),N=b+(v^x&(R^v))+S[15]+3634488961&4294967295,b=R+(N<<14&4294967295|N>>>18),N=x+(R^v&(b^R))+S[4]+3889429448&4294967295,x=b+(N<<20&4294967295|N>>>12),N=v+(b^R&(x^b))+S[9]+568446438&4294967295,v=x+(N<<5&4294967295|N>>>27),N=R+(x^b&(v^x))+S[14]+3275163606&4294967295,R=v+(N<<9&4294967295|N>>>23),N=b+(v^x&(R^v))+S[3]+4107603335&4294967295,b=R+(N<<14&4294967295|N>>>18),N=x+(R^v&(b^R))+S[8]+1163531501&4294967295,x=b+(N<<20&4294967295|N>>>12),N=v+(b^R&(x^b))+S[13]+2850285829&4294967295,v=x+(N<<5&4294967295|N>>>27),N=R+(x^b&(v^x))+S[2]+4243563512&4294967295,R=v+(N<<9&4294967295|N>>>23),N=b+(v^x&(R^v))+S[7]+1735328473&4294967295,b=R+(N<<14&4294967295|N>>>18),N=x+(R^v&(b^R))+S[12]+2368359562&4294967295,x=b+(N<<20&4294967295|N>>>12),N=v+(x^b^R)+S[5]+4294588738&4294967295,v=x+(N<<4&4294967295|N>>>28),N=R+(v^x^b)+S[8]+2272392833&4294967295,R=v+(N<<11&4294967295|N>>>21),N=b+(R^v^x)+S[11]+1839030562&4294967295,b=R+(N<<16&4294967295|N>>>16),N=x+(b^R^v)+S[14]+4259657740&4294967295,x=b+(N<<23&4294967295|N>>>9),N=v+(x^b^R)+S[1]+2763975236&4294967295,v=x+(N<<4&4294967295|N>>>28),N=R+(v^x^b)+S[4]+1272893353&4294967295,R=v+(N<<11&4294967295|N>>>21),N=b+(R^v^x)+S[7]+4139469664&4294967295,b=R+(N<<16&4294967295|N>>>16),N=x+(b^R^v)+S[10]+3200236656&4294967295,x=b+(N<<23&4294967295|N>>>9),N=v+(x^b^R)+S[13]+681279174&4294967295,v=x+(N<<4&4294967295|N>>>28),N=R+(v^x^b)+S[0]+3936430074&4294967295,R=v+(N<<11&4294967295|N>>>21),N=b+(R^v^x)+S[3]+3572445317&4294967295,b=R+(N<<16&4294967295|N>>>16),N=x+(b^R^v)+S[6]+76029189&4294967295,x=b+(N<<23&4294967295|N>>>9),N=v+(x^b^R)+S[9]+3654602809&4294967295,v=x+(N<<4&4294967295|N>>>28),N=R+(v^x^b)+S[12]+3873151461&4294967295,R=v+(N<<11&4294967295|N>>>21),N=b+(R^v^x)+S[15]+530742520&4294967295,b=R+(N<<16&4294967295|N>>>16),N=x+(b^R^v)+S[2]+3299628645&4294967295,x=b+(N<<23&4294967295|N>>>9),N=v+(b^(x|~R))+S[0]+4096336452&4294967295,v=x+(N<<6&4294967295|N>>>26),N=R+(x^(v|~b))+S[7]+1126891415&4294967295,R=v+(N<<10&4294967295|N>>>22),N=b+(v^(R|~x))+S[14]+2878612391&4294967295,b=R+(N<<15&4294967295|N>>>17),N=x+(R^(b|~v))+S[5]+4237533241&4294967295,x=b+(N<<21&4294967295|N>>>11),N=v+(b^(x|~R))+S[12]+1700485571&4294967295,v=x+(N<<6&4294967295|N>>>26),N=R+(x^(v|~b))+S[3]+2399980690&4294967295,R=v+(N<<10&4294967295|N>>>22),N=b+(v^(R|~x))+S[10]+4293915773&4294967295,b=R+(N<<15&4294967295|N>>>17),N=x+(R^(b|~v))+S[1]+2240044497&4294967295,x=b+(N<<21&4294967295|N>>>11),N=v+(b^(x|~R))+S[8]+1873313359&4294967295,v=x+(N<<6&4294967295|N>>>26),N=R+(x^(v|~b))+S[15]+4264355552&4294967295,R=v+(N<<10&4294967295|N>>>22),N=b+(v^(R|~x))+S[6]+2734768916&4294967295,b=R+(N<<15&4294967295|N>>>17),N=x+(R^(b|~v))+S[13]+1309151649&4294967295,x=b+(N<<21&4294967295|N>>>11),N=v+(b^(x|~R))+S[4]+4149444226&4294967295,v=x+(N<<6&4294967295|N>>>26),N=R+(x^(v|~b))+S[11]+3174756917&4294967295,R=v+(N<<10&4294967295|N>>>22),N=b+(v^(R|~x))+S[2]+718787259&4294967295,b=R+(N<<15&4294967295|N>>>17),N=x+(R^(b|~v))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(b+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+b&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,v){v===void 0&&(v=_.length);for(var x=v-this.blockSize,S=this.B,b=this.h,R=0;R<v;){if(b==0)for(;R<=x;)s(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<v;)if(S[b++]=_.charCodeAt(R++),b==this.blockSize){s(this,S),b=0;break}}else for(;R<v;)if(S[b++]=_[R++],b==this.blockSize){s(this,S),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;var x=8*this.o;for(v=_.length-8;v<_.length;++v)_[v]=x&255,x/=256;for(this.u(_),_=Array(16),v=x=0;4>v;++v)for(var S=0;32>S;S+=8)_[x++]=this.g[v]>>>S&255;return _};function i(_,v){var x=u;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=v(_)}function o(_,v){this.h=v;for(var x=[],S=!0,b=_.length-1;0<=b;b--){var R=_[b]|0;S&&R==v||(x[b]=R,S=!1)}this.g=x}var u={};function c(_){return-128<=_&&128>_?i(_,function(v){return new o([v|0],0>v?-1:0)}):new o([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return P(h(-_));for(var v=[],x=1,S=0;_>=x;S++)v[S]=_/x|0,x*=4294967296;return new o(v,0)}function f(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return P(f(_.substring(1),v));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(v,8)),S=p,b=0;b<_.length;b+=8){var R=Math.min(8,_.length-b),N=parseInt(_.substring(b,b+R),v);8>R?(R=h(Math.pow(v,R)),S=S.j(R).add(h(N))):(S=S.j(x),S=S.add(h(N)))}return S}var p=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-P(this).m();for(var _=0,v=1,x=0;x<this.g.length;x++){var S=this.i(x);_+=(0<=S?S:4294967296+S)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(A(this))return"-"+P(this).toString(_);for(var v=h(Math.pow(_,6)),x=this,S="";;){var b=D(x,v).g;x=T(x,b.j(v));var R=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=b,k(x))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=T(this,_),A(_)?-1:k(_)?0:1};function P(_){for(var v=_.g.length,x=[],S=0;S<v;S++)x[S]=~_.g[S];return new o(x,~_.h).add(g)}t.abs=function(){return A(this)?P(this):this},t.add=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],S=0,b=0;b<=v;b++){var R=S+(this.i(b)&65535)+(_.i(b)&65535),N=(R>>>16)+(this.i(b)>>>16)+(_.i(b)>>>16);S=N>>>16,R&=65535,N&=65535,x[b]=N<<16|R}return new o(x,x[x.length-1]&-2147483648?-1:0)};function T(_,v){return _.add(P(v))}t.j=function(_){if(k(this)||k(_))return p;if(A(this))return A(_)?P(this).j(P(_)):P(P(this).j(_));if(A(_))return P(this.j(P(_)));if(0>this.l(E)&&0>_.l(E))return h(this.m()*_.m());for(var v=this.g.length+_.g.length,x=[],S=0;S<2*v;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var b=0;b<_.g.length;b++){var R=this.i(S)>>>16,N=this.i(S)&65535,At=_.i(b)>>>16,Nr=_.i(b)&65535;x[2*S+2*b]+=N*Nr,w(x,2*S+2*b),x[2*S+2*b+1]+=R*Nr,w(x,2*S+2*b+1),x[2*S+2*b+1]+=N*At,w(x,2*S+2*b+1),x[2*S+2*b+2]+=R*At,w(x,2*S+2*b+2)}for(S=0;S<v;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=v;S<2*v;S++)x[S]=0;return new o(x,0)};function w(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function I(_,v){this.g=_,this.h=v}function D(_,v){if(k(v))throw Error("division by zero");if(k(_))return new I(p,p);if(A(_))return v=D(P(_),v),new I(P(v.g),P(v.h));if(A(v))return v=D(_,P(v)),new I(P(v.g),v.h);if(30<_.g.length){if(A(_)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,S=v;0>=S.l(_);)x=F(x),S=F(S);var b=U(x,1),R=U(S,1);for(S=U(S,2),x=U(x,2);!k(S);){var N=R.add(S);0>=N.l(_)&&(b=b.add(x),R=N),S=U(S,1),x=U(x,1)}return v=T(_,b.j(v)),new I(b,v)}for(b=p;0<=_.l(v);){for(x=Math.max(1,Math.floor(_.m()/v.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=h(x),N=R.j(v);A(N)||0<N.l(_);)x-=S,R=h(x),N=R.j(v);k(R)&&(R=g),b=b.add(R),_=T(_,N)}return new I(b,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)&_.i(S);return new o(x,this.h&_.h)},t.or=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)|_.i(S);return new o(x,this.h|_.h)},t.xor=function(_){for(var v=Math.max(this.g.length,_.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)^_.i(S);return new o(x,this.h^_.h)};function F(_){for(var v=_.g.length+1,x=[],S=0;S<v;S++)x[S]=_.i(S)<<1|_.i(S-1)>>>31;return new o(x,_.h)}function U(_,v){var x=v>>5;v%=32;for(var S=_.g.length-x,b=[],R=0;R<S;R++)b[R]=0<v?_.i(R+x)>>>v|_.i(R+x+1)<<32-v:_.i(R+x);return new o(b,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,t1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,cr=o}).apply(typeof Gg<"u"?Gg:typeof self<"u"?self:typeof window<"u"?window:{});var Oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var n1,qi,r1,sl,Jd,s1,i1,o1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,m){return a==Array.prototype||a==Object.prototype||(a[d]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oa=="object"&&Oa];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var C=a[y];if(!(C in m))break e;m=m[C]}a=a[a.length-1],y=m[a],d=d(y),d!=y&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var m=0,y=!1,C={next:function(){if(!y&&m<a.length){var j=m++;return{value:d(j,a[j]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,m){return a.call.apply(a.bind,arguments)}function p(a,d,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),a.apply(d,C)}}return function(){return a.apply(d,arguments)}}function g(a,d,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function E(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function k(a,d){function m(){}m.prototype=d.prototype,a.aa=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,C,j){for(var z=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)z[ce-2]=arguments[ce];return d.prototype[C].apply(y,z)}}function A(a){const d=a.length;if(0<d){const m=Array(d);for(let y=0;y<d;y++)m[y]=a[y];return m}return[]}function P(a,d){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const C=a.length||0,j=y.length||0;a.length=C+j;for(let z=0;z<j;z++)a[C+z]=y[z]}else a.push(y)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var F=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(a,d,m){for(const y in a)d.call(m,a[y],y,a)}function _(a,d){for(const m in a)d.call(void 0,a[m],m,a)}function v(a){const d={};for(const m in a)d[m]=a[m];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let m,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(m in y)a[m]=y[m];for(let j=0;j<x.length;j++)m=x[j],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function b(a){var d=1;a=a.split(":");const m=[];for(;0<d&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function R(a){u.setTimeout(()=>{throw a},0)}function N(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class At{constructor(){this.h=this.g=null}add(d,m){const y=Nr.get();y.set(d,m),this.h?this.h.next=y:this.g=y,this.h=y}}var Nr=new T(()=>new vi,a=>a.reset());class vi{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let dn,$=!1,Q=new At,Z=()=>{const a=u.Promise.resolve(void 0);dn=()=>{a.then(_e)}};var _e=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(m){R(m)}var d=Nr;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var hn=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};u.addEventListener("test",m,d),u.removeEventListener("test",m,d)}catch{}return a}();function fn(a,d){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(F){e:{try{D(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:mn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fn.aa.h.call(this)}}k(fn,Ne);var mn={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pn="closure_listenable_"+(1e6*Math.random()|0),Jw=0;function Zw(a,d,m,y,C){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!y,this.ha=C,this.key=++Jw,this.da=this.fa=!1}function ea(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ta(a){this.src=a,this.g={},this.h=0}ta.prototype.add=function(a,d,m,y,C){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var z=qu(a,d,y,C);return-1<z?(d=a[z],m||(d.fa=!1)):(d=new Zw(d,this.src,j,!!y,C),d.fa=m,a.push(d)),d};function $u(a,d){var m=d.type;if(m in a.g){var y=a.g[m],C=Array.prototype.indexOf.call(y,d,void 0),j;(j=0<=C)&&Array.prototype.splice.call(y,C,1),j&&(ea(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function qu(a,d,m,y){for(var C=0;C<a.length;++C){var j=a[C];if(!j.da&&j.listener==d&&j.capture==!!m&&j.ha==y)return C}return-1}var Hu="closure_lm_"+(1e6*Math.random()|0),Wu={};function dm(a,d,m,y,C){if(Array.isArray(d)){for(var j=0;j<d.length;j++)dm(a,d[j],m,y,C);return null}return m=mm(m),a&&a[pn]?a.K(d,m,h(y)?!!y.capture:!!y,C):ex(a,d,m,!1,y,C)}function ex(a,d,m,y,C,j){if(!d)throw Error("Invalid event type");var z=h(C)?!!C.capture:!!C,ce=Ku(a);if(ce||(a[Hu]=ce=new ta(a)),m=ce.add(d,m,y,z,j),m.proxy)return m;if(y=tx(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)hn||(C=z),C===void 0&&(C=!1),a.addEventListener(d.toString(),y,C);else if(a.attachEvent)a.attachEvent(fm(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function tx(){function a(m){return d.call(a.src,a.listener,m)}const d=nx;return a}function hm(a,d,m,y,C){if(Array.isArray(d))for(var j=0;j<d.length;j++)hm(a,d[j],m,y,C);else y=h(y)?!!y.capture:!!y,m=mm(m),a&&a[pn]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],m=qu(j,m,y,C),-1<m&&(ea(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ku(a))&&(d=a.g[d.toString()],a=-1,d&&(a=qu(d,m,y,C)),(m=-1<a?d[a]:null)&&Gu(m))}function Gu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[pn])$u(d.i,a);else{var m=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(m,y,a.capture):d.detachEvent?d.detachEvent(fm(m),y):d.addListener&&d.removeListener&&d.removeListener(y),(m=Ku(d))?($u(m,a),m.h==0&&(m.src=null,d[Hu]=null)):ea(a)}}}function fm(a){return a in Wu?Wu[a]:Wu[a]="on"+a}function nx(a,d){if(a.da)a=!0;else{d=new fn(d,this);var m=a.listener,y=a.ha||a.src;a.fa&&Gu(a),a=m.call(y,d)}return a}function Ku(a){return a=a[Hu],a instanceof ta?a:null}var Qu="__closure_events_fn_"+(1e9*Math.random()>>>0);function mm(a){return typeof a=="function"?a:(a[Qu]||(a[Qu]=function(d){return a.handleEvent(d)}),a[Qu])}function Qe(){ue.call(this),this.i=new ta(this),this.M=this,this.F=null}k(Qe,ue),Qe.prototype[pn]=!0,Qe.prototype.removeEventListener=function(a,d,m,y){hm(this,a,d,m,y)};function ot(a,d){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Ne(d,a);else if(d instanceof Ne)d.target=d.target||a;else{var C=d;d=new Ne(y,a),S(d,C)}if(C=!0,m)for(var j=m.length-1;0<=j;j--){var z=d.g=m[j];C=na(z,y,!0,d)&&C}if(z=d.g=a,C=na(z,y,!0,d)&&C,C=na(z,y,!1,d)&&C,m)for(j=0;j<m.length;j++)z=d.g=m[j],C=na(z,y,!1,d)&&C}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var m=a.g[d],y=0;y<m.length;y++)ea(m[y]);delete a.g[d],a.h--}}this.F=null},Qe.prototype.K=function(a,d,m,y){return this.i.add(String(a),d,!1,m,y)},Qe.prototype.L=function(a,d,m,y){return this.i.add(String(a),d,!0,m,y)};function na(a,d,m,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,j=0;j<d.length;++j){var z=d[j];if(z&&!z.da&&z.capture==m){var ce=z.listener,ze=z.ha||z.src;z.fa&&$u(a.i,z),C=ce.call(ze,y)!==!1&&C}}return C&&!y.defaultPrevented}function pm(a,d,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function gm(a){a.g=pm(()=>{a.g=null,a.i&&(a.i=!1,gm(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class rx extends ue{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:gm(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(a){ue.call(this),this.h=a,this.g={}}k(_i,ue);var ym=[];function vm(a){U(a.g,function(d,m){this.g.hasOwnProperty(m)&&Gu(d)},a),a.g={}}_i.prototype.N=function(){_i.aa.N.call(this),vm(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xu=u.JSON.stringify,sx=u.JSON.parse,ix=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Yu(){}Yu.prototype.h=null;function _m(a){return a.h||(a.h=a.i())}function wm(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ju(){Ne.call(this,"d")}k(Ju,Ne);function Zu(){Ne.call(this,"c")}k(Zu,Ne);var br={},xm=null;function ra(){return xm=xm||new Qe}br.La="serverreachability";function Em(a){Ne.call(this,br.La,a)}k(Em,Ne);function xi(a){const d=ra();ot(d,new Em(d))}br.STAT_EVENT="statevent";function Tm(a,d){Ne.call(this,br.STAT_EVENT,a),this.stat=d}k(Tm,Ne);function at(a){const d=ra();ot(d,new Tm(d,a))}br.Ma="timingevent";function Im(a,d){Ne.call(this,br.Ma,a),this.size=d}k(Im,Ne);function Ei(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function ox(a,d,m,y,C,j){a.info(function(){if(a.g)if(j)for(var z="",ce=j.split("&"),ze=0;ze<ce.length;ze++){var oe=ce[ze].split("=");if(1<oe.length){var Xe=oe[0];oe=oe[1];var Ye=Xe.split("_");z=2<=Ye.length&&Ye[1]=="type"?z+(Xe+"="+oe+"&"):z+(Xe+"=redacted&")}}else z=null;else z=j;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+d+`
`+m+`
`+z})}function ax(a,d,m,y,C,j,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+d+`
`+m+`
`+j+" "+z})}function us(a,d,m,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+ux(a,m)+(y?" "+y:"")})}function lx(a,d){a.info(function(){return"TIMEOUT: "+d})}Ti.prototype.info=function(){};function ux(a,d){if(!a.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var j=C[0];if(j!="noop"&&j!="stop"&&j!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return Xu(m)}catch{return d}}var sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ec;function ia(){}k(ia,Yu),ia.prototype.g=function(){return new XMLHttpRequest},ia.prototype.i=function(){return{}},ec=new ia;function Ln(a,d,m,y){this.j=a,this.i=d,this.l=m,this.R=y||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new km}function km(){this.i=null,this.g="",this.h=!1}var Nm={},tc={};function nc(a,d,m){a.L=1,a.v=ua(gn(d)),a.m=m,a.P=!0,bm(a,null)}function bm(a,d){a.F=Date.now(),oa(a),a.A=gn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Bm(m.i,"t",y),a.C=0,m=a.j.J,a.h=new km,a.g=op(a.j,m?d:null,!a.m),0<a.O&&(a.M=new rx(g(a.Y,a,a.g),a.O)),d=a.U,m=a.g,y=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(ym[0]=C.toString()),C=ym);for(var j=0;j<C.length;j++){var z=dm(m,C[j],y||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),xi(),ox(a.i,a.u,a.A,a.l,a.R,a.m)}Ln.prototype.ca=function(a){a=a.target;const d=this.M;d&&yn(a)==3?d.j():this.Y(a)},Ln.prototype.Y=function(a){try{if(a==this.g)e:{const Ye=yn(this.g);var d=this.g.Ba();const hs=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||Qm(this.g)))){this.J||Ye!=4||d==7||(d==8||0>=hs?xi(3):xi(2)),rc(this);var m=this.g.Z();this.X=m;t:if(Am(this)){var y=Qm(this.g);a="";var C=y.length,j=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),Ii(this);var z="";break t}this.h.i=new u.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(j&&d==C-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,ax(this.i,this.u,this.A,this.l,this.R,Ye,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,ze=this.g;if((ce=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ce)){var oe=ce;break t}}oe=null}if(m=oe)us(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sc(this,m);else{this.o=!1,this.s=3,at(12),Ar(this),Ii(this);break e}}if(this.P){m=!0;let Lt;for(;!this.J&&this.C<z.length;)if(Lt=cx(this,z),Lt==tc){Ye==4&&(this.s=4,at(14),m=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Nm){this.s=4,at(15),us(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else us(this.i,this.l,Lt,null),sc(this,Lt);if(Am(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||z.length!=0||this.h.h||(this.s=1,at(16),m=!1),this.o=this.o&&m,!m)us(this.i,this.l,z,"[Invalid Chunked Response]"),Ar(this),Ii(this);else if(0<z.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),cc(Xe),Xe.M=!0,at(11))}}else us(this.i,this.l,z,null),sc(this,z);Ye==4&&Ar(this),this.o&&!this.J&&(Ye==4?np(this.j,this):(this.o=!1,oa(this)))}else Nx(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Ar(this),Ii(this)}}}catch{}finally{}};function Am(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function cx(a,d){var m=a.C,y=d.indexOf(`
`,m);return y==-1?tc:(m=Number(d.substring(m,y)),isNaN(m)?Nm:(y+=1,y+m>d.length?tc:(d=d.slice(y,y+m),a.C=y+m,d)))}Ln.prototype.cancel=function(){this.J=!0,Ar(this)};function oa(a){a.S=Date.now()+a.I,Cm(a,a.I)}function Cm(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ei(g(a.ba,a),d)}function rc(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Ln.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(lx(this.i,this.A),this.L!=2&&(xi(),at(17)),Ar(this),this.s=2,Ii(this)):Cm(this,this.S-a)};function Ii(a){a.j.G==0||a.J||np(a.j,a)}function Ar(a){rc(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,vm(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function sc(a,d){try{var m=a.j;if(m.G!=0&&(m.g==a||ic(m.h,a))){if(!a.K&&ic(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)pa(m),fa(m);else break e;uc(m),at(18)}}else m.za=C[1],0<m.za-m.T&&37500>C[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ei(g(m.Za,m),6e3));if(1>=jm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Rr(m,11)}else if((a.K||m.g==a)&&pa(m),!w(d))for(C=m.Da.g.parse(d),d=0;d<C.length;d++){let oe=C[d];if(m.T=oe[0],oe=oe[1],m.G==2)if(oe[0]=="c"){m.K=oe[1],m.ia=oe[2];const Xe=oe[3];Xe!=null&&(m.la=Xe,m.j.info("VER="+m.la));const Ye=oe[4];Ye!=null&&(m.Aa=Ye,m.j.info("SVER="+m.Aa));const hs=oe[5];hs!=null&&typeof hs=="number"&&0<hs&&(y=1.5*hs,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Lt=a.g;if(Lt){const ya=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var j=y.h;j.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(oc(j,j.h),j.h=null))}if(y.D){const dc=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;dc&&(y.ya=dc,me(y.I,y.D,dc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var z=a;if(y.qa=ip(y,y.J?y.ia:null,y.W),z.K){Dm(y.h,z);var ce=z,ze=y.L;ze&&(ce.I=ze),ce.B&&(rc(ce),oa(ce)),y.g=z}else ep(y);0<m.i.length&&ma(m)}else oe[0]!="stop"&&oe[0]!="close"||Rr(m,7);else m.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Rr(m,7):lc(m):oe[0]!="noop"&&m.l&&m.l.ta(oe),m.v=0)}}xi(4)}catch{}}var dx=class{constructor(a,d){this.g=a,this.map=d}};function Rm(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jm(a){return a.h?1:a.g?a.g.size:0}function ic(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function oc(a,d){a.g?a.g.add(d):a.h=d}function Dm(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Rm.prototype.cancel=function(){if(this.i=Vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Vm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const m of a.g.values())d=d.concat(m.D);return d}return A(a.i)}function hx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],m=a.length,y=0;y<m;y++)d.push(a[y]);return d}d=[],m=0;for(y in a)d[m++]=a[y];return d}function fx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var m=0;m<a;m++)d.push(m);return d}d=[],m=0;for(const y in a)d[m++]=y;return d}}}function Om(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var m=fx(a),y=hx(a),C=y.length,j=0;j<C;j++)d.call(void 0,y[j],m&&m[j],a)}var Mm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mx(a,d){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),C=null;if(0<=y){var j=a[m].substring(0,y);C=a[m].substring(y+1)}else j=a[m];d(j,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Cr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Cr){this.h=a.h,aa(this,a.j),this.o=a.o,this.g=a.g,la(this,a.s),this.l=a.l;var d=a.i,m=new Ni;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Lm(this,m),this.m=a.m}else a&&(d=String(a).match(Mm))?(this.h=!1,aa(this,d[1]||"",!0),this.o=Si(d[2]||""),this.g=Si(d[3]||"",!0),la(this,d[4]),this.l=Si(d[5]||"",!0),Lm(this,d[6]||"",!0),this.m=Si(d[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Cr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ki(d,Fm,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ki(d,Fm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(ki(m,m.charAt(0)=="/"?yx:gx,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",ki(m,_x)),a.join("")};function gn(a){return new Cr(a)}function aa(a,d,m){a.j=m?Si(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function la(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Lm(a,d,m){d instanceof Ni?(a.i=d,wx(a.i,a.h)):(m||(d=ki(d,vx)),a.i=new Ni(d,a.h))}function me(a,d,m){a.i.set(d,m)}function ua(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Si(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ki(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,px),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function px(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fm=/[#\/\?@]/g,gx=/[#\?:]/g,yx=/[#\?]/g,vx=/[#\?@]/g,_x=/#/g;function Ni(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&mx(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Ni.prototype,t.add=function(a,d){Fn(this),this.i=null,a=cs(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function Um(a,d){Fn(a),d=cs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function zm(a,d){return Fn(a),d=cs(a,d),a.g.has(d)}t.forEach=function(a,d){Fn(this),this.g.forEach(function(m,y){m.forEach(function(C){a.call(d,C,y,this)},this)},this)},t.na=function(){Fn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let y=0;y<d.length;y++){const C=a[y];for(let j=0;j<C.length;j++)m.push(d[y])}return m},t.V=function(a){Fn(this);let d=[];if(typeof a=="string")zm(this,a)&&(d=d.concat(this.g.get(cs(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)d=d.concat(a[m])}return d},t.set=function(a,d){return Fn(this),this.i=null,a=cs(this,a),zm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Bm(a,d,m){Um(a,d),0<m.length&&(a.i=null,a.g.set(cs(a,d),A(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var y=d[m];const j=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var C=j;z[y]!==""&&(C+="="+encodeURIComponent(String(z[y]))),a.push(C)}}return this.i=a.join("&")};function cs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function wx(a,d){d&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(m,y){var C=y.toLowerCase();y!=C&&(Um(this,y),Bm(this,C,m))},a)),a.j=d}function xx(a,d){const m=new Ti;if(u.Image){const y=new Image;y.onload=E(Un,m,"TestLoadImage: loaded",!0,d,y),y.onerror=E(Un,m,"TestLoadImage: error",!1,d,y),y.onabort=E(Un,m,"TestLoadImage: abort",!1,d,y),y.ontimeout=E(Un,m,"TestLoadImage: timeout",!1,d,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function Ex(a,d){const m=new Ti,y=new AbortController,C=setTimeout(()=>{y.abort(),Un(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(j=>{clearTimeout(C),j.ok?Un(m,"TestPingServer: ok",!0,d):Un(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Un(m,"TestPingServer: error",!1,d)})}function Un(a,d,m,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(m)}catch{}}function Tx(){this.g=new ix}function Ix(a,d,m){const y=m||"";try{Om(a,function(C,j){let z=C;h(C)&&(z=Xu(C)),d.push(y+j+"="+encodeURIComponent(z))})}catch(C){throw d.push(y+"type="+encodeURIComponent("_badmap")),C}}function ca(a){this.l=a.Ub||null,this.j=a.eb||!1}k(ca,Yu),ca.prototype.g=function(){return new da(this.l,this.j)},ca.prototype.i=function(a){return function(){return a}}({});function da(a,d){Qe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(da,Qe),t=da.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ai(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$m(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function $m(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bi(this):Ai(this),this.readyState==3&&$m(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,bi(this))},t.Qa=function(a){this.g&&(this.response=a,bi(this))},t.ga=function(){this.g&&bi(this)};function bi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ai(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function Ai(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function qm(a){let d="";return U(a,function(m,y){d+=y,d+=":",d+=m,d+=`\r
`}),d}function ac(a,d,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=qm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):me(a,d,m))}function Se(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Se,Qe);var Sx=/^https?$/i,kx=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ec.g(),this.v=this.o?_m(this.o):_m(ec),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Hm(this,j);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)m.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const j of y.keys())m.set(j,y.get(j));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),C=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(kx,d,void 0))||y||C||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,z]of m)this.g.setRequestHeader(j,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Km(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Hm(this,j)}};function Hm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Wm(a),ha(a)}function Wm(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gm(this):this.bb())},t.bb=function(){Gm(this)};function Gm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yn(a)!=4||a.Z()!=2)){if(a.u&&yn(a)==4)pm(a.Ea,0,a);else if(ot(a,"readystatechange"),yn(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var y;if(y=z===0){var C=String(a.D).match(Mm)[1]||null;!C&&u.self&&u.self.location&&(C=u.self.location.protocol.slice(0,-1)),y=!Sx.test(C?C.toLowerCase():"")}m=y}if(m)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var j=2<yn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Wm(a)}}finally{ha(a)}}}}function ha(a,d){if(a.g){Km(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{m.onreadystatechange=y}catch{}}}function Km(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function yn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),sx(d)}};function Qm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Nx(a){const d={};a=(a.g&&2<=yn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var m=b(a[y]);const C=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=d[C]||[];d[C]=j,j.push(m)}_(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function Xm(a){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,a),this.cb=Ci("retryDelaySeedMs",1e4,a),this.Wa=Ci("forwardChannelMaxRetries",2,a),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Rm(a&&a.concurrentRequestLimit),this.Da=new Tx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xm.prototype,t.la=8,t.G=1,t.connect=function(a,d,m,y){at(0),this.W=a,this.H=d||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=ip(this,null,this.W),ma(this)};function lc(a){if(Ym(a),a.G==3){var d=a.U++,m=gn(a.I);if(me(m,"SID",a.K),me(m,"RID",d),me(m,"TYPE","terminate"),Ri(a,m),d=new Ln(a,a.j,d),d.L=2,d.v=ua(gn(m)),m=!1,u.navigator&&u.navigator.sendBeacon)try{m=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&u.Image&&(new Image().src=d.v,m=!0),m||(d.g=op(d.j,null),d.g.ea(d.v)),d.F=Date.now(),oa(d)}sp(a)}function fa(a){a.g&&(cc(a),a.g.cancel(),a.g=null)}function Ym(a){fa(a),a.u&&(u.clearTimeout(a.u),a.u=null),pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function ma(a){if(!Pm(a.h)&&!a.s){a.s=!0;var d=a.Ga;dn||Z(),$||(dn(),$=!0),Q.add(d,a),a.B=0}}function bx(a,d){return jm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ei(g(a.Ga,a,d),rp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Ln(this,this.j,a);let j=this.o;if(this.S&&(j?(j=v(j),S(j,this.S)):j=this.S),this.m!==null||this.O||(C.H=j,j=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Zm(this,C,d),m=gn(this.I),me(m,"RID",a),me(m,"CVER",22),this.D&&me(m,"X-HTTP-Session-Id",this.D),Ri(this,m),j&&(this.O?d="headers="+encodeURIComponent(String(qm(j)))+"&"+d:this.m&&ac(m,this.m,j)),oc(this.h,C),this.Ua&&me(m,"TYPE","init"),this.P?(me(m,"$req",d),me(m,"SID","null"),C.T=!0,nc(C,m,null)):nc(C,m,d),this.G=2}}else this.G==3&&(a?Jm(this,a):this.i.length==0||Pm(this.h)||Jm(this))};function Jm(a,d){var m;d?m=d.l:m=a.U++;const y=gn(a.I);me(y,"SID",a.K),me(y,"RID",m),me(y,"AID",a.T),Ri(a,y),a.m&&a.o&&ac(y,a.m,a.o),m=new Ln(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Zm(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),oc(a.h,m),nc(m,y,d)}function Ri(a,d){a.H&&U(a.H,function(m,y){me(d,y,m)}),a.l&&Om({},function(m,y){me(d,y,m)})}function Zm(a,d,m){m=Math.min(a.i.length,m);var y=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let j=-1;for(;;){const z=["count="+m];j==-1?0<m?(j=C[0].g,z.push("ofs="+j)):j=0:z.push("ofs="+j);let ce=!0;for(let ze=0;ze<m;ze++){let oe=C[ze].g;const Xe=C[ze].map;if(oe-=j,0>oe)j=Math.max(0,C[ze].g-100),ce=!1;else try{Ix(Xe,z,"req"+oe+"_")}catch{y&&y(Xe)}}if(ce){y=z.join("&");break e}}}return a=a.i.splice(0,m),d.D=a,y}function ep(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;dn||Z(),$||(dn(),$=!0),Q.add(d,a),a.v=0}}function uc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ei(g(a.Fa,a),rp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,tp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ei(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),fa(this),tp(this))};function cc(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function tp(a){a.g=new Ln(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=gn(a.qa);me(d,"RID","rpc"),me(d,"SID",a.K),me(d,"AID",a.T),me(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(d,"TO",a.ja),me(d,"TYPE","xmlhttp"),Ri(a,d),a.m&&a.o&&ac(d,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ua(gn(d)),m.m=null,m.P=!0,bm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,fa(this),uc(this),at(19))};function pa(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function np(a,d){var m=null;if(a.g==d){pa(a),cc(a),a.g=null;var y=2}else if(ic(a.h,d))m=d.D,Dm(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var C=a.B;y=ra(),ot(y,new Im(y,m)),ma(a)}else ep(a);else if(C=d.s,C==3||C==0&&0<d.X||!(y==1&&bx(a,d)||y==2&&uc(a)))switch(m&&0<m.length&&(d=a.h,d.i=d.i.concat(m)),C){case 1:Rr(a,5);break;case 4:Rr(a,10);break;case 3:Rr(a,6);break;default:Rr(a,2)}}}function rp(a,d){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*d}function Rr(a,d){if(a.j.info("Error code "+d),d==2){var m=g(a.fb,a),y=a.Xa;const C=!y;y=new Cr(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||aa(y,"https"),ua(y),C?xx(y.toString(),m):Ex(y.toString(),m)}else at(2);a.G=0,a.l&&a.l.sa(d),sp(a),Ym(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function sp(a){if(a.G=0,a.ka=[],a.l){const d=Vm(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function ip(a,d,m){var y=m instanceof Cr?gn(m):new Cr(m);if(y.g!="")d&&(y.g=d+"."+y.g),la(y,y.s);else{var C=u.location;y=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var j=new Cr(null);y&&aa(j,y),d&&(j.g=d),C&&la(j,C),m&&(j.l=m),y=j}return m=a.D,d=a.ya,m&&d&&me(y,m,d),me(y,"VER",a.la),Ri(a,y),y}function op(a,d,m){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Se(new ca({eb:m})):new Se(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ap(){}t=ap.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ga(){}ga.prototype.g=function(a,d){return new wt(a,d)};function wt(a,d){Qe.call(this),this.g=new Xm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ds(this)}k(wt,Qe),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){lc(this.g)},wt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Xu(a),a=m);d.i.push(new dx(d.Ya++,a)),d.G==3&&ma(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,wt.aa.N.call(this)};function lp(a){Ju.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}k(lp,Ju);function up(){Zu.call(this),this.status=1}k(up,Zu);function ds(a){this.g=a}k(ds,ap),ds.prototype.ua=function(){ot(this.g,"a")},ds.prototype.ta=function(a){ot(this.g,new lp(a))},ds.prototype.sa=function(a){ot(this.g,new up)},ds.prototype.ra=function(){ot(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,o1=function(){return new ga},i1=function(){return ra()},s1=br,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,sl=sa,Sm.COMPLETE="complete",r1=Sm,wm.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,qi=wm,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,n1=Se}).apply(typeof Oa<"u"?Oa:typeof self<"u"?self:typeof window<"u"?window:{});const Kg="@firebase/firestore",Qg="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new hf("@firebase/firestore");function ms(){return Jr.logLevel}function q(t,...e){if(Jr.logLevel<=ne.DEBUG){const n=e.map(kf);Jr.debug(`Firestore (${ui}): ${t}`,...n)}}function jn(t,...e){if(Jr.logLevel<=ne.ERROR){const n=e.map(kf);Jr.error(`Firestore (${ui}): ${t}`,...n)}}function mr(t,...e){if(Jr.logLevel<=ne.WARN){const n=e.map(kf);Jr.warn(`Firestore (${ui}): ${t}`,...n)}}function kf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,a1(t,r,n)}function a1(t,e,n){let r=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw jn(r),new Error(r)}function ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||a1(e,s,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class Uk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zk{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new l1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new tt(e)}}class Bk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $k{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Hk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function Zd(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ee(r,s);{const i=u1(),o=Wk(i.encode(Yg(t,n)),i.encode(Yg(e,n)));return o!==0?o:ee(r,s)}}n+=r>65535?2:1}return ee(t.length,e.length)}function Yg(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Wk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function Xs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="__name__";class Zt{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Zt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ee(e.length,n.length)}static compareSegments(e,n){const r=Zt.isNumericId(e),s=Zt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Zt.extractNumericId(e).compare(Zt.extractNumericId(n)):Zd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}}class de extends Zt{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const Gk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends Zt{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return Gk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jg}static keyField(){return new qe([Jg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new B(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new B(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(de.fromString(e))}static fromName(e){return new W(de.fromString(e).popFirst(5))}static empty(){return new W(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new de(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t,e,n){if(!n)throw new B(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kk(t,e,n,r){if(e===!0&&r===!0)throw new B(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zg(t){if(!W.isDocumentKey(t))throw new B(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ey(t){if(W.isDocumentKey(t))throw new B(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _u(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function Qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_u(t);throw new B(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e){const n={typeString:t};return e&&(n.value=e),n}function Go(t,e){if(!d1(t))throw new B(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-62135596800,ny=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ny);return new ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ty)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ny}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Go(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:De("string",ge._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ge(0,0))}static max(){return new X(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=-1;function Qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new pr(s,W.empty(),e)}function Xk(t){return new pr(t.readTime,t.key,Ao)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(X.min(),W.empty(),Ao)}static max(){return new pr(X.max(),W.empty(),Ao)}}function Yk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Jk)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(f=>{o[h]=f,++u,u===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function eN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function di(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function xu(t){return t==null}function Bl(t){return t===0&&1/t==-1/0}function tN(t){return typeof t=="number"&&Number.isInteger(t)&&!Bl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="";function nN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ry(e)),e=rN(t.get(n),e);return ry(e)}function rN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case h1:n+="";break;default:n+=i}}return n}function ry(t){return t+h1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}}class Ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$e.RED,this.left=s??$e.EMPTY,this.right=i??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $e(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $e.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $e(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Tt([])}unionWith(e){let n=new Me(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m1("Invalid base64 string: "+i):i}}(e);return new Ke(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ke(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const sN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=sN.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="server_timestamp",g1="__type__",y1="__previous_value__",v1="__local_write_time__";function Af(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[g1])===null||n===void 0?void 0:n.stringValue)===p1}function Eu(t){const e=t.mapValue.fields[y1];return Af(e)?Eu(e):e}function Co(t){const e=gr(t.mapValue.fields[v1].timestampValue);return new ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,r,s,i,o,u,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const $l="(default)";class Ro{constructor(e,n){this.projectId=e,this.database=n||$l}static empty(){return new Ro("","")}get isDefaultDatabase(){return this.database===$l}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__type__",w1="__max__",La={mapValue:{fields:{__type__:{stringValue:w1}}}},x1="__vector__",ql="value";function vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Af(t)?4:aN(t)?9007199254740991:oN(t)?10:11:G(28295,{value:t})}function cn(t,e){if(t===e)return!0;const n=vr(t);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Co(t).isEqual(Co(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gr(s.timestampValue),u=gr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return yr(s.bytesValue).isEqual(yr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return be(s.geoPointValue.latitude)===be(i.geoPointValue.latitude)&&be(s.geoPointValue.longitude)===be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return be(s.integerValue)===be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=be(s.doubleValue),u=be(i.doubleValue);return o===u?Bl(o)===Bl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Xs(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(sy(o)!==sy(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!cn(o[c],u[c])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function Po(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=vr(t),r=vr(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=be(i.integerValue||i.doubleValue),c=be(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return oy(t.timestampValue,e.timestampValue);case 4:return oy(Co(t),Co(e));case 5:return Zd(t.stringValue,e.stringValue);case 6:return function(i,o){const u=yr(i),c=yr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const f=ee(u[h],c[h]);if(f!==0)return f}return ee(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ee(be(i.latitude),be(o.latitude));return u!==0?u:ee(be(i.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ay(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,h,f;const p=i.fields||{},g=o.fields||{},E=(u=p[ql])===null||u===void 0?void 0:u.arrayValue,k=(c=g[ql])===null||c===void 0?void 0:c.arrayValue,A=ee(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:ay(E,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===La.mapValue&&o===La.mapValue)return 0;if(i===La.mapValue)return 1;if(o===La.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=Zd(c[p],f[p]);if(g!==0)return g;const E=Ys(u[c[p]],h[f[p]]);if(E!==0)return E}return ee(c.length,f.length)}(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function oy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=gr(t),r=gr(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function ay(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ys(n[s],r[s]);if(i)return i}return ee(n.length,r.length)}function Js(t){return eh(t)}function eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=eh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${eh(n.fields[o])}`;return s+"}"}(t.mapValue):G(61005,{value:t})}function il(t){switch(vr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eu(t);return e?16+il(e):16;case 5:return 2*t.stringValue.length;case 6:return yr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+il(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ir(r.fields,(i,o)=>{s+=i.length+il(o)}),s}(t.mapValue);default:throw G(13486,{value:t})}}function ly(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function th(t){return!!t&&"integerValue"in t}function Cf(t){return!!t&&"arrayValue"in t}function uy(t){return!!t&&"nullValue"in t}function cy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ol(t){return!!t&&"mapValue"in t}function oN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_1])===null||n===void 0?void 0:n.stringValue)===x1}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===w1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ol(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=io(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ol(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ol(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new mt(io(this.value))}}function E1(t){const e=[];return Ir(t.fields,(n,r)=>{const s=new qe([n]);if(ol(r)){const i=E1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new rt(e,0,X.min(),X.min(),X.min(),mt.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,X.min(),X.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,X.min(),X.min(),mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.position=e,this.inclusive=n}}function dy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function lN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{}class je extends T1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cN(e,n,r):n==="array-contains"?new fN(e,r):n==="in"?new mN(e,r):n==="not-in"?new pN(e,r):n==="array-contains-any"?new gN(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dN(e,r):new hN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ys(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends T1{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Xt(e,n)}matches(e){return I1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function I1(t){return t.op==="and"}function S1(t){return uN(t)&&I1(t)}function uN(t){for(const e of t.filters)if(e instanceof Xt)return!1;return!0}function nh(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Js(t.value);if(S1(t))return t.filters.map(e=>nh(e)).join(",");{const e=t.filters.map(n=>nh(n)).join(",");return`${t.op}(${e})`}}function k1(t,e){return t instanceof je?function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(t,e):t instanceof Xt?function(r,s){return s instanceof Xt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&k1(o,s.filters[u]),!0):!1}(t,e):void G(19439)}function N1(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Js(n.value)}`}(t):t instanceof Xt?function(n){return n.op.toString()+" {"+n.getFilters().map(N1).join(" ,")+"}"}(t):"Filter"}class cN extends je{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class dN extends je{constructor(e,n){super(e,"in",n),this.keys=b1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hN extends je{constructor(e,n){super(e,"not-in",n),this.keys=b1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class fN extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cf(n)&&Po(n.arrayValue,this.value)}}class mN extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Po(this.value.arrayValue,n)}}class pN extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Po(this.value.arrayValue,n)}}class gN extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Pe=null}}function fy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yN(t,e,n,r,s,i,o)}function Rf(t){const e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Js(r)).join(",")),e.Pe=n}return e.Pe}function Pf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!k1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hy(t.startAt,e.startAt)&&hy(t.endAt,e.endAt)}function rh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function vN(t,e,n,r,s,i,o,u){return new hi(t,e,n,r,s,i,o,u)}function jf(t){return new hi(t)}function my(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A1(t){return t.collectionGroup!==null}function oo(t){const e=J(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Me(qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new jo(i,r))}),n.has(qe.keyField().canonicalString())||e.Te.push(new jo(qe.keyField(),r))}return e.Te}function sn(t){const e=J(t);return e.Ie||(e.Ie=_N(e,oo(t))),e.Ie}function _N(t,e){if(t.limitType==="F")return fy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new jo(s.field,i)});const n=t.endAt?new Hl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hl(t.startAt.position,t.startAt.inclusive):null;return fy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sh(t,e){const n=t.filters.concat([e]);return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ih(t,e,n){return new hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tu(t,e){return Pf(sn(t),sn(e))&&t.limitType===e.limitType}function C1(t){return`${Rf(sn(t))}|lt:${t.limitType}`}function ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>N1(s)).join(", ")}]`),xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Js(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Js(s)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Iu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=dy(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,oo(r),s)||r.endAt&&!function(o,u,c){const h=dy(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,oo(r),s))}(t,e)}function wN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R1(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=xN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xN(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Ys(c,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return f1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Te(W.comparator);function Dn(){return EN}const P1=new Te(W.comparator);function Hi(...t){let e=P1;for(const n of t)e=e.insert(n.key,n);return e}function j1(t){let e=P1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fr(){return ao()}function D1(){return ao()}function ao(){return new ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const TN=new Te(W.comparator),IN=new Me(W.comparator);function re(...t){let e=IN;for(const n of t)e=e.add(n);return e}const SN=new Me(ee);function kN(){return SN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function V1(t){return{integerValue:""+t}}function NN(t,e){return tN(e)?V1(e):Df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function bN(t,e,n){return t instanceof Do?function(s,i){const o={fields:{[g1]:{stringValue:p1},[v1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Af(i)&&(i=Eu(i)),i&&(o.fields[y1]=i),{mapValue:o}}(n,e):t instanceof Vo?M1(t,e):t instanceof Oo?L1(t,e):function(s,i){const o=O1(s,i),u=py(o)+py(s.Ee);return th(o)&&th(s.Ee)?V1(u):Df(s.serializer,u)}(t,e)}function AN(t,e,n){return t instanceof Vo?M1(t,e):t instanceof Oo?L1(t,e):n}function O1(t,e){return t instanceof Wl?function(r){return th(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Do extends Su{}class Vo extends Su{constructor(e){super(),this.elements=e}}function M1(t,e){const n=F1(e);for(const r of t.elements)n.some(s=>cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oo extends Su{constructor(e){super(),this.elements=e}}function L1(t,e){let n=F1(e);for(const r of t.elements)n=n.filter(s=>!cn(s,r));return{arrayValue:{values:n}}}class Wl extends Su{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function py(t){return be(t.integerValue||t.doubleValue)}function F1(t){return Cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.field=e,this.transform=n}}function RN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vo&&s instanceof Vo||r instanceof Oo&&s instanceof Oo?Xs(r.elements,s.elements,cn):r instanceof Wl&&s instanceof Wl?cn(r.Ee,s.Ee):r instanceof Do&&s instanceof Do}(t.transform,e.transform)}class PN{constructor(e,n){this.version=e,this.transformResults=n}}class Vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function al(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ku{}function U1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vf(t.key,Vt.none()):new Ko(t.key,t.data,Vt.none());{const n=t.data,r=mt.empty();let s=new Me(qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Sr(t.key,r,new Tt(s.toArray()),Vt.none())}}function jN(t,e,n){t instanceof Ko?function(s,i,o){const u=s.value.clone(),c=yy(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Sr?function(s,i,o){if(!al(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=yy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(z1(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Ko?function(i,o,u,c){if(!al(i.precondition,o))return u;const h=i.value.clone(),f=vy(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sr?function(i,o,u,c){if(!al(i.precondition,o))return u;const h=vy(i.fieldTransforms,c,o),f=o.data;return f.setAll(z1(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return al(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function DN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=O1(r.transform,s||null);i!=null&&(n===null&&(n=mt.empty()),n.set(r.field,i))}return n||null}function gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xs(r,s,(i,o)=>RN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ko extends ku{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Sr extends ku{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function z1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yy(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,AN(o,u,n[s]))}return r}function vy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bN(i,o,e))}return r}class Vf extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VN extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=U1(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(n,r)=>gy(n,r))&&Xs(this.baseMutations,e.baseMutations,(n,r)=>gy(n,r))}}class Of{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return TN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Of(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,se;function FN(t){switch(t){case V.OK:return G(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function B1(t){if(t===void 0)return jn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Re.OK:return V.OK;case Re.CANCELLED:return V.CANCELLED;case Re.UNKNOWN:return V.UNKNOWN;case Re.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Re.INTERNAL:return V.INTERNAL;case Re.UNAVAILABLE:return V.UNAVAILABLE;case Re.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Re.NOT_FOUND:return V.NOT_FOUND;case Re.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Re.ABORTED:return V.ABORTED;case Re.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Re.DATA_LOSS:return V.DATA_LOSS;default:return G(39323,{code:t})}}(se=Re||(Re={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new cr([4294967295,4294967295],0);function _y(t){const e=u1().encode(t),n=new t1;return n.update(e),new Uint8Array(n.digest())}function wy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new cr([n,r],0),new cr([s,i],0)]}class Mf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=cr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(cr.fromNumber(r)));return s.compare(UN)===1&&(s=new cr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=_y(e),[r,s]=wy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Mf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.fe===0)return;const n=_y(e),[r,s]=wy(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nu(X.min(),s,new Te(ee),Dn(),re())}}class Qo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qo(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class $1{constructor(e,n){this.targetId=e,this.De=n}}class q1{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xy{constructor(){this.ve=0,this.Ce=Ey(),this.Fe=Ke.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=re(),n=re(),r=re();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G(38017,{changeType:i})}}),new Qo(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Ey()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class zN{constructor(e){this.We=e,this.Ge=new Map,this.ze=Dn(),this.je=Fa(),this.Je=Fa(),this.He=new Te(ee)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(rh(i))if(r===0){const o=new W(i.path);this.Xe(n,o,rt.newNoDocument(o,X.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const u=this._t(e),c=u?this.ut(u,e,o):1;if(c!==0){this.rt(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=yr(r).toUint8Array()}catch(c){if(c instanceof m1)return mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Mf(o,s,i)}catch(c){return mr(c instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const u=this.st(o);if(u){if(i.current&&rh(u.target)){const c=new W(u.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,rt.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=re();this.Je.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.st(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Nu(e,n,this.He,this.ze,r);return this.ze=Dn(),this.je=Fa(),this.Je=Fa(),this.He=new Te(ee),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new xy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Me(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Me(ee),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new xy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Fa(){return new Te(W.comparator)}function Ey(){return new Te(W.comparator)}const BN={asc:"ASCENDING",desc:"DESCENDING"},$N={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qN={and:"AND",or:"OR"};class HN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oh(t,e){return t.useProto3Json||xu(e)?e:{value:e}}function Gl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WN(t,e){return Gl(t,e.toTimestamp())}function on(t){return ae(!!t,49232),X.fromTimestamp(function(n){const r=gr(n);return new ge(r.seconds,r.nanos)}(t))}function Lf(t,e){return ah(t,e).canonicalString()}function ah(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function W1(t){const e=de.fromString(t);return ae(Y1(e),10190,{key:e.toString()}),e}function lh(t,e){return Lf(t.databaseId,e.path)}function Hc(t,e){const n=W1(e);if(n.get(1)!==t.databaseId.projectId)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(K1(n))}function G1(t,e){return Lf(t.databaseId,e)}function GN(t){const e=W1(t);return e.length===4?de.emptyPath():K1(e)}function uh(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K1(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ty(t,e,n){return{name:lh(t,e),fields:n.value.mapValue.fields}}function KN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ae(f===void 0||typeof f=="string",58123),Ke.fromBase64String(f||"")):(ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const f=h.code===void 0?V.UNKNOWN:B1(h.code);return new B(f,h.message||"")}(o);n=new q1(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hc(t,r.document.name),i=on(r.document.updateTime),o=r.document.createTime?on(r.document.createTime):X.min(),u=new mt({mapValue:{fields:r.document.fields}}),c=rt.newFoundDocument(s,i,o,u),h=r.targetIds||[],f=r.removedTargetIds||[];n=new ll(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hc(t,r.document),i=r.readTime?on(r.readTime):X.min(),o=rt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new ll([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hc(t,r.document),i=r.removedTargetIds||[];n=new ll([],i,s,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new LN(s,i),u=r.targetId;n=new $1(u,o)}}return n}function QN(t,e){let n;if(e instanceof Ko)n={update:Ty(t,e.key,e.value)};else if(e instanceof Vf)n={delete:lh(t,e.key)};else if(e instanceof Sr)n={update:Ty(t,e.key,e.data),updateMask:sb(e.fieldMask)};else{if(!(e instanceof VN))return G(16599,{Rt:e.type});n={verify:lh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Do)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Oo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Wl)return{fieldPath:o.field.canonicalString(),increment:u.Ee};throw G(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:WN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G(27497)}(t,e.precondition)),n}function XN(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?on(s.updateTime):on(i);return o.isEqual(X.min())&&(o=on(i)),new PN(o,s.transformResults||[])}(n,e))):[]}function YN(t,e){return{documents:[G1(t,e.path)]}}function JN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G1(t,s);const i=function(h){if(h.length!==0)return X1(Xt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:gs(g.field),direction:tb(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=oh(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:s}}function ZN(t){let e=GN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=Q1(p);return g instanceof Xt&&S1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new jo(ys(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,xu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,E=p.values||[];return new Hl(E,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,E=p.values||[];return new Hl(E,g)}(n.endAt)),vN(e,s,o,i,u,"F",c,h)}function eb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ys(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ys(n.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ys(n.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ys(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return je.create(ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xt.create(n.compositeFilter.filters.map(r=>Q1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function tb(t){return BN[t]}function nb(t){return $N[t]}function rb(t){return qN[t]}function gs(t){return{fieldPath:t.canonicalString()}}function ys(t){return qe.fromServerFormat(t.fieldPath)}function X1(t){return t instanceof je?function(n){if(n.op==="=="){if(cy(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NAN"}};if(uy(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cy(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NAN"}};if(uy(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(n.field),op:nb(n.op),value:n.value}}}(t):t instanceof Xt?function(n){const r=n.getFilters().map(s=>X1(s));return r.length===1?r[0]:{compositeFilter:{op:rb(n.op),filters:r}}}(t):G(54877,{filter:t})}function sb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r,s,i=X.min(),o=X.min(),u=Ke.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.gt=e}}function ob(t){const e=ZN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.Dn=new lb}addToCollectionParentIndex(e,n){return this.Dn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(pr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class lb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Me(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Me(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},J1=41943040;class ht{static withCacheSize(e){return new ht(e,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(J1,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Zs(0)}static ur(){return new Zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="LruGarbageCollector",ub=1048576;function ky([t,e],[n,r]){const s=ee(t,n);return s===0?ee(e,r):s}class cb{constructor(e){this.Tr=e,this.buffer=new Me(ky),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ky(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class db{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){q(Sy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){di(n)?q(Sy,"Ignoring IndexedDB error during garbage collection: ",n):await ci(n)}await this.Rr(3e5)})}}class hb{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(wu.ue);const r=new cb(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Iy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,u,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ms()<=ne.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function fb(t,e){return new hb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.changes=new ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lo(r.mutation,s,Tt.empty(),ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=Fr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Hi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Dn();const o=ao(),u=function(){return ao()}();return n.forEach((c,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Sr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),lo(f.mutation,h,f.mutation.getFieldMask(),ge.now())):o.set(h.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return u.set(h,new pb(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ao();let s=new Te((o,u)=>o-u),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=r.get(c)||Tt.empty();f=u.applyToLocalView(h,f),r.set(c,f);const p=(s.get(u.batchId)||re()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,f=c.value,p=D1();f.forEach(g=>{if(!i.has(g)){const E=U1(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):A1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Fr());let u=Ao,c=i;return o.next(h=>O.forEach(h,(f,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,re())).next(f=>({batchId:u,changes:j1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Hi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Hi();return this.indexManager.getCollectionParents(e,i).next(u=>O.forEach(u,c=>{const h=function(p,g){return new hi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,rt.newInvalidDocument(f)))});let u=Hi();return o.forEach((c,h)=>{const f=i.get(c);f!==void 0&&lo(f.mutation,h,Tt.empty(),ge.now()),Iu(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return O.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:on(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:ob(s.bundledQuery),readTime:on(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.overlays=new Te(W.comparator),this.kr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Fr(),i=n.length+1,o=new W(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Te((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Fr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const u=Fr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>u.set(h,f)),!(u.size()>=s)););return O.resolve(u)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new MN(n,r));let i=this.kr.get(n);i===void 0&&(i=re(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.qr=new Me(Le.Qr),this.$r=new Me(Le.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Le(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Le(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new W(new de([])),r=new Le(n,e),s=new Le(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new W(new de([])),r=new Le(n,e),s=new Le(n,e+1);let i=re();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Le(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Le{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return W.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Me(Le.Qr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ON(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Yr=this.Yr.add(new Le(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?bf:this.er-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Le(n,0),s=new Le(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const u=this.Zr(o.Hr);i.push(u)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(ee);return n.forEach(s=>{const i=new Le(s,0),o=new Le(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],u=>{r=r.add(u.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Le(new W(i),0);let u=new Me(ee);return this.Yr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Hr)),!0)},o),O.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ae(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(n.mutations,s=>{const i=new Le(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Le(n,0),s=this.Yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.ni=e,this.docs=function(){return new Te(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=Dn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Dn();const o=n.path,u=new W(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Yk(Xk(f),r)<=0||(s.has(f.key)||Iu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G(9500)}ri(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Eb(this)}getSize(e){return O.resolve(this.size)}}class Eb extends mb{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.persistence=e,this.ii=new ns(n=>Rf(n),Pf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new Ff,this.targetCount=0,this._i=Zs.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),O.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Zs(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.hr(n),O.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.ai={},this.overlays={},this.ui=new wu(0),this.ci=!1,this.ci=!0,this.li=new _b,this.referenceDelegate=e(this),this.hi=new Tb(this),this.indexManager=new ab,this.remoteDocumentCache=function(s){return new xb(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new ib(n),this.Ti=new yb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new wb(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new Ib(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Ib extends Zk{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Ai=new Ff,this.Ri=null}static Vi(e){return new Uf(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{const s=W.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return O.or([()=>O.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kl{constructor(e,n){this.persistence=e,this.gi=new ns(r=>nN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fb(this,n)}static Vi(e,n){return new Kl(e,n)}Ii(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return O.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?O.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(u=>{u||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),O.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=il(e.data.value)),n}Sr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return wI()?8:eN(it())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Sb;return this.ws(e,n,o).next(u=>{if(i.result=u,this.Rs)return this.Ss(e,n,o,u.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ms()<=ne.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(ms()<=ne.DEBUG&&q("QueryEngine","Query:",ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ms()<=ne.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):O.resolve())}ps(e,n){if(my(n))return O.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ih(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.gs.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.bs(n,u);return this.Ds(n,h,o,c.readTime)?this.ps(e,ih(n,null,"F")):this.vs(e,h,n,c)}))})))}ys(e,n,r,s){return my(n)||s.isEqual(X.min())?O.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?O.resolve(null):(ms()<=ne.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ps(n)),this.vs(e,o,n,Qk(s,Ao)).next(u=>u))})}bs(e,n){let r=new Me(R1(e));return n.forEach((s,i)=>{Iu(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return ms()<=ne.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ps(n)),this.gs.getDocumentsMatchingQuery(e,n,pr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="LocalStore",Nb=3e8;class bb{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Te(ee),this.Ms=new ns(i=>Rf(i),Pf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Ab(t,e,n,r){return new bb(t,e,n,r)}async function ew(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=re();for(const h of s){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){u.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:u}))})})}function Cb(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,c,h,f){const p=h.batch,g=p.keys();let E=O.resolve();return g.forEach(k=>{E=E.next(()=>f.getEntry(c,k)).next(A=>{const P=h.docVersions.get(k);ae(P!==null,48541),A.version.compareTo(P)<0&&(p.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),f.addEntry(A)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=re();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tw(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Rb(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const u=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;u.push(n.hi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,p)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(Ke.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),function(A,P,T){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Nb?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,E,f)&&u.push(n.hi.updateTargetData(i,E))});let c=Dn(),h=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(Pb(i,o,e.documentUpdates).next(f=>{c=f.Ls,h=f.ks})),!r.isEqual(X.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(f)}return O.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Fs=s,i))}function Pb(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Dn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):q(Bf,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function jb(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Db(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Jn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ch(t,e,n){const r=J(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!di(o))throw o;q(Bf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Ny(t,e,n){const r=J(t);let s=X.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,f){const p=J(c),g=p.Ms.get(f);return g!==void 0?O.resolve(p.Fs.get(g)):p.hi.getTargetData(h,f)}(r,o,sn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:re())).next(u=>(Vb(r,wN(e),u),{documents:u,qs:i})))}function Vb(t,e,n){let r=t.xs.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class by{constructor(){this.activeTargetIds=kN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ob{constructor(){this.Fo=new by,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new by,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="ConnectivityMonitor";class Cy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){q(Ay,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){q(Ay,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua=null;function dh(){return Ua===null?Ua=function(){return 268435456+Math.round(2147483648*Math.random())}():Ua++,"0x"+Ua.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="RestConnection",Lb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fb{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===$l?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=dh(),u=this.Go(e,n.toUriEncodedString());q(Wc,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:h}=new URL(u),f=oi(h);return this.jo(e,u,c,r,f).then(p=>(q(Wc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw mr(Wc,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ui}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Lb[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class zb extends Fb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=dh();return new Promise((u,c)=>{const h=new n1;h.setWithCredentials(!0),h.listenOnce(r1.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case sl.NO_ERROR:const p=h.getResponseJson();q(et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case sl.TIMEOUT:q(et,`RPC '${e}' ${o} timed out`),c(new B(V.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:const g=h.getStatus();if(q(et,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const A=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(k.status);c(new B(A,k.message))}else c(new B(V.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new B(V.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{q(et,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);q(et,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",f,r,15)})}P_(e,n,r){const s=dh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=o1(),u=i1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");q(et,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);this.T_(p);let g=!1,E=!1;const k=new Ub({Ho:P=>{E?q(et,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(q(et,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),q(et,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Yo:()=>p.close()}),A=(P,T,w)=>{P.listen(T,I=>{try{w(I)}catch(D){setTimeout(()=>{throw D},0)}})};return A(p,qi.EventType.OPEN,()=>{E||(q(et,`RPC '${e}' stream ${s} transport opened.`),k.s_())}),A(p,qi.EventType.CLOSE,()=>{E||(E=!0,q(et,`RPC '${e}' stream ${s} transport closed`),k.__(),this.I_(p))}),A(p,qi.EventType.ERROR,P=>{E||(E=!0,mr(et,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.__(new B(V.UNAVAILABLE,"The operation could not be completed")))}),A(p,qi.EventType.MESSAGE,P=>{var T;if(!E){const w=P.data[0];ae(!!w,16349);const I=w,D=(I==null?void 0:I.error)||((T=I[0])===null||T===void 0?void 0:T.error);if(D){q(et,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let U=function(x){const S=Re[x];if(S!==void 0)return B1(S)}(F),_=D.message;U===void 0&&(U=V.INTERNAL,_="Unknown error status: "+F+" with message "+D.message),E=!0,k.__(new B(U,_)),p.close()}else q(et,`RPC '${e}' stream ${s} received:`,w),k.a_(w)}}),A(u,s1.STAT_EVENT,P=>{P.stat===Jd.PROXY?q(et,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Jd.NOPROXY&&q(et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Gc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return new HN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="PersistentStream";class rw{constructor(e,n,r,s,i,o,u,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nw(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(jn(n.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new B(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return q(Ry,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(q(Ry,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bb extends rw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=KN(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?on(o.readTime):X.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=uh(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=rh(c)?{documents:YN(i,c)}:{query:JN(i,c).Vt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=H1(i,o.resumeToken);const h=oh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){u.readTime=Gl(i,o.snapshotVersion.toTimestamp());const h=oh(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=eb(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=uh(this.serializer),n.removeTarget=e,this.k_(n)}}class $b extends rw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=XN(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=uh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QN(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{}class Hb extends qb{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,ah(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(V.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Jo(e,ah(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(V.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Wb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(jn(n),this._a=!1):q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class Gb{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{rs(this)&&(q(Zr,"Restarting streams for network reachability change."),await async function(c){const h=J(c);h.Ia.add(4),await Xo(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Au(h)}(this))})}),this.Aa=new Wb(r,s)}}async function Au(t){if(rs(t))for(const e of t.da)await e(!0)}async function Xo(t){for(const e of t.da)await e(!1)}function sw(t,e){const n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Wf(n)?Hf(n):fi(n).x_()&&qf(n,e))}function $f(t,e){const n=J(t),r=fi(n);n.Ta.delete(e),r.x_()&&iw(n,e),n.Ta.size===0&&(r.x_()?r.B_():rs(n)&&n.Aa.set("Unknown"))}function qf(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fi(t).H_(e)}function iw(t,e){t.Ra.$e(e),fi(t).Y_(e)}function Hf(t){t.Ra=new zN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),fi(t).start(),t.Aa.aa()}function Wf(t){return rs(t)&&!fi(t).M_()&&t.Ta.size>0}function rs(t){return J(t).Ia.size===0}function ow(t){t.Ra=void 0}async function Kb(t){t.Aa.set("Online")}async function Qb(t){t.Ta.forEach((e,n)=>{qf(t,e)})}async function Xb(t,e){ow(t),Wf(t)?(t.Aa.la(e),Hf(t)):t.Aa.set("Unknown")}async function Yb(t,e,n){if(t.Aa.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ta.delete(u),s.Ra.removeTarget(u))}(t,e)}catch(r){q(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ql(t,r)}else if(e instanceof ll?t.Ra.Ye(e):e instanceof $1?t.Ra.it(e):t.Ra.et(e),!n.isEqual(X.min()))try{const r=await tw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Ra.Pt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ta.get(h);f&&i.Ta.set(h,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const f=i.Ta.get(c);if(!f)return;i.Ta.set(c,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),iw(i,c);const p=new Jn(f.target,c,h,f.sequenceNumber);qf(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){q(Zr,"Failed to raise snapshot:",r),await Ql(t,r)}}async function Ql(t,e,n){if(!di(e))throw e;t.Ia.add(1),await Xo(t),t.Aa.set("Offline"),n||(n=()=>tw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Zr,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Au(t)})}function aw(t,e){return e().catch(n=>Ql(t,n,e))}async function Cu(t){const e=J(t),n=_r(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:bf;for(;Jb(e);)try{const s=await jb(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,Zb(e,s)}catch(s){await Ql(e,s)}lw(e)&&uw(e)}function Jb(t){return rs(t)&&t.Pa.length<10}function Zb(t,e){t.Pa.push(e);const n=_r(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function lw(t){return rs(t)&&!_r(t).M_()&&t.Pa.length>0}function uw(t){_r(t).start()}async function eA(t){_r(t).na()}async function tA(t){const e=_r(t);for(const n of t.Pa)e.X_(n.mutations)}async function nA(t,e,n){const r=t.Pa.shift(),s=Of.from(r,e,n);await aw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cu(t)}async function rA(t,e){e&&_r(t).Z_&&await async function(r,s){if(function(o){return FN(o)&&o!==V.ABORTED}(s.code)){const i=r.Pa.shift();_r(r).N_(),await aw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Cu(r)}}(t,e),lw(t)&&uw(t)}async function Py(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),q(Zr,"RemoteStore received new credentials");const r=rs(n);n.Ia.add(3),await Xo(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Au(n)}async function sA(t,e){const n=J(t);e?(n.Ia.delete(2),await Au(n)):e||(n.Ia.add(2),await Xo(n),n.Aa.set("Unknown"))}function fi(t){return t.Va||(t.Va=function(n,r,s){const i=J(n);return i.ia(),new Bb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Kb.bind(null,t),e_:Qb.bind(null,t),n_:Xb.bind(null,t),J_:Yb.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Wf(t)?Hf(t):t.Aa.set("Unknown")):(await t.Va.stop(),ow(t))})),t.Va}function _r(t){return t.ma||(t.ma=function(n,r,s){const i=J(n);return i.ia(),new $b(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:eA.bind(null,t),n_:rA.bind(null,t),ea:tA.bind(null,t),ta:nA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Cu(t)):(await t.ma.stop(),t.Pa.length>0&&(q(Zr,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Gf(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kf(t,e){if(jn("AsyncQueue",`${e}: ${t}`),di(t))return new B(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{static emptySet(e){return new Fs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Hi(),this.sortedSet=new Te(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.fa=new Te(W.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ei{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new ei(e,n,Fs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oA{constructor(){this.queries=Dy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=Dy(),i.forEach((o,u)=>{for(const c of u.wa)c.onError(r)})})(this,new B(V.ABORTED,"Firestore shutting down"))}}function Dy(){return new ns(t=>C1(t),Tu)}async function cw(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new iA,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Kf(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&Qf(n)}async function dw(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aA(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.wa)u.Ca(s)&&(r=!0);o.ya=s}}r&&Qf(n)}function lA(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function Qf(t){t.Da.forEach(e=>{e.next()})}var hh,Vy;(Vy=hh||(hh={})).Fa="default",Vy.Cache="cache";class hw{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ei(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ei.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.key=e}}class mw{constructor(e){this.key=e}}class uA{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=re(),this.mutatedKeys=re(),this.Xa=R1(e),this.eu=new Fs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new jy,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),E=Iu(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;g&&E?g.data.isEqual(E.data)?k!==A&&(r.track({type:3,doc:E}),P=!0):this.iu(g,E)||(r.track({type:2,doc:E}),P=!0,(c&&this.Xa(E,c)>0||h&&this.Xa(E,h)<0)&&(u=!0)):!g&&E?(r.track({type:0,doc:E}),P=!0):g&&!E&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(E?(o=o.add(E),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:u,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,p)=>function(E,k){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:P})}};return A(E)-A(k)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),s=s!=null&&s;const u=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,h=c!==this.Ya;return this.Ya=c,o.length!==0||h?{snapshot:new ei(this.query,e.eu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new jy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=re(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new mw(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new fw(r))}),n}uu(e){this.Ha=e.qs,this.Za=re();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ei.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Xf="SyncEngine";class cA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dA{constructor(e){this.key=e,this.lu=!1}}class hA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ns(u=>C1(u),Tu),this.Tu=new Map,this.Iu=new Set,this.du=new Te(W.comparator),this.Eu=new Map,this.Au=new Ff,this.Ru={},this.Vu=new Map,this.mu=Zs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fA(t,e,n=!0){const r=ww(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await pw(r,e,n,!0),s}async function mA(t,e){const n=ww(t);await pw(n,e,!0,!1)}async function pw(t,e,n,r){const s=await Db(t.localStore,sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await pA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&sw(t.remoteStore,s),u}async function pA(t,e,n,r,s){t.gu=(p,g,E)=>async function(A,P,T,w){let I=P.view.nu(T);I.Ds&&(I=await Ny(A.localStore,P.query,!1).then(({documents:_})=>P.view.nu(_,I)));const D=w&&w.targetChanges.get(P.targetId),F=w&&w.targetMismatches.get(P.targetId)!=null,U=P.view.applyChanges(I,A.isPrimaryClient,D,F);return My(A,P.targetId,U._u),U.snapshot}(t,p,g,E);const i=await Ny(t.localStore,e,!0),o=new uA(e,i.qs),u=o.nu(i.documents),c=Qo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);My(t,n,h._u);const f=new cA(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function gA(t,e,n){const r=J(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Tu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ch(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$f(r.remoteStore,s.targetId),fh(r,s.targetId)}).catch(ci)):(fh(r,s.targetId),await ch(r.localStore,s.targetId,!0))}async function yA(t,e){const n=J(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$f(n.remoteStore,r.targetId))}async function vA(t,e,n){const r=SA(t);try{const s=await function(o,u){const c=J(o),h=ge.now(),f=u.reduce((E,k)=>E.add(k.key),re());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=Dn(),A=re();return c.Os.getEntries(E,f).next(P=>{k=P,k.forEach((T,w)=>{w.isValidDocument()||(A=A.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(P=>{p=P;const T=[];for(const w of u){const I=DN(w,p.get(w.key).overlayedDocument);I!=null&&T.push(new Sr(w.key,I,E1(I.value.mapValue),Vt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,T,u)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(E,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:j1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Ru[o.currentUser.toKey()];h||(h=new Te(ee)),h=h.insert(u,c),o.Ru[o.currentUser.toKey()]=h}(r,s.batchId,n),await Yo(r,s.changes),await Cu(r.remoteStore)}catch(s){const i=Kf(s,"Failed to persist write");n.reject(i)}}async function gw(t,e){const n=J(t);try{const r=await Rb(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?ae(o.lu,14607):s.removedDocuments.size>0&&(ae(o.lu,42227),o.lu=!1))}),await Yo(n,r,e)}catch(r){await ci(r)}}function Oy(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=J(o);c.onlineState=u;let h=!1;c.queries.forEach((f,p)=>{for(const g of p.wa)g.va(u)&&(h=!0)}),h&&Qf(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _A(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Te(W.comparator);o=o.insert(i,rt.newNoDocument(i,X.min()));const u=re().add(i),c=new Nu(X.min(),new Map,new Te(ee),o,u);await gw(r,c),r.du=r.du.remove(i),r.Eu.delete(e),Yf(r)}else await ch(r.localStore,e,!1).then(()=>fh(r,e,n)).catch(ci)}async function wA(t,e){const n=J(t),r=e.batch.batchId;try{const s=await Cb(n.localStore,e);vw(n,r,null),yw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yo(n,s)}catch(s){await ci(s)}}async function xA(t,e,n){const r=J(t);try{const s=await function(o,u){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(ae(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);vw(r,e,n),yw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yo(r,s)}catch(s){await ci(s)}}function yw(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function vw(t,e,n){const r=J(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||_w(t,r)})}function _w(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($f(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Yf(t))}function My(t,e,n){for(const r of n)r instanceof fw?(t.Au.addReference(r.key,e),EA(t,r)):r instanceof mw?(q(Xf,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||_w(t,r.key)):G(19791,{yu:r})}function EA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(q(Xf,"New document in limbo: "+n),t.Iu.add(r),Yf(t))}function Yf(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new W(de.fromString(e)),r=t.mu.next();t.Eu.set(r,new dA(n)),t.du=t.du.insert(n,r),sw(t.remoteStore,new Jn(sn(jf(n.path)),r,"TargetPurposeLimboResolution",wu.ue))}}async function Yo(t,e,n){const r=J(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((u,c)=>{o.push(r.gu(c,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=zf.Es(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,h){const f=J(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(h,g=>O.forEach(g.Is,E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>O.forEach(g.ds,E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!di(p))throw p;q(Bf,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const E=f.Fs.get(g),k=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(k);f.Fs=f.Fs.insert(g,A)}}}(r.localStore,i))}async function TA(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){q(Xf,"User change. New user:",e.toKey());const r=await ew(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(u=>{u.forEach(c=>{c.reject(new B(V.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yo(n,r.Bs)}}function IA(t,e){const n=J(t),r=n.Eu.get(e);if(r&&r.lu)return re().add(r.key);{let s=re();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const u=n.Pu.get(o);s=s.unionWith(u.view.tu)}return s}}function ww(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_A.bind(null,e),e.hu.J_=aA.bind(null,e.eventManager),e.hu.pu=lA.bind(null,e.eventManager),e}function SA(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xA.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Ab(this.persistence,new kb,e.initialUser,this.serializer)}Du(e){return new Z1(Uf.Vi,this.serializer)}bu(e){return new Ob}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class kA extends Xl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ae(this.persistence.referenceDelegate instanceof Kl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new db(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new Z1(r=>Kl.Vi(r,n),this.serializer)}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Oy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TA.bind(null,this.syncEngine),await sA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oA}()}createDatastore(e){const n=bu(e.databaseInfo.databaseId),r=function(i){return new zb(i)}(e.databaseInfo);return function(i,o,u,c){return new Hb(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new Gb(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Oy(this.syncEngine,n,0),function(){return Cy.C()?new Cy:new Mb}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,f){const p=new hA(s,i,o,u,c,h);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);q(Zr,"RemoteStore shutting down."),i.Ia.add(5),await Xo(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="FirestoreClient";class NA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kc(t,e){t.asyncQueue.verifyOperationInProgress(),q(wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ew(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{mr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{mr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Ly(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bA(t);q(wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Py(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Py(e.remoteStore,s)),t._onlineComponents=e}async function bA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(wr,"Using user provided OfflineComponentProvider");try{await Kc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;mr("Error using user provided cache. Falling back to memory cache: "+n),await Kc(t,new Xl)}}else q(wr,"Using default OfflineComponentProvider"),await Kc(t,new kA(void 0));return t._offlineComponents}async function Ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(wr,"Using user provided OnlineComponentProvider"),await Ly(t,t._uninitializedComponentsProvider._online)):(q(wr,"Using default OnlineComponentProvider"),await Ly(t,new mh))),t._onlineComponents}function AA(t){return Ew(t).then(e=>e.syncEngine)}async function Tw(t){const e=await Ew(t),n=e.eventManager;return n.onListen=fA.bind(null,e.syncEngine),n.onUnlisten=gA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yA.bind(null,e.syncEngine),n}function CA(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const f=new xw({next:g=>{f.Ou(),o.enqueueAndForget(()=>dw(i,p));const E=g.docs.has(u);!E&&g.fromCache?h.reject(new B(V.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&c&&c.source==="server"?h.reject(new B(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new hw(jf(u.path),f,{includeMetadataChanges:!0,ka:!0});return cw(i,p)}(await Tw(t),t.asyncQueue,e,n,r)),r.promise}function RA(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const f=new xw({next:g=>{f.Ou(),o.enqueueAndForget(()=>dw(i,p)),g.fromCache&&c.source==="server"?h.reject(new B(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new hw(u,f,{includeMetadataChanges:!0,ka:!0});return cw(i,p)}(await Tw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firestore.googleapis.com",Uy=!0;class zy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=Uy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Uy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=J1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ub)throw new B(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ru{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fk;switch(r.type){case"firstParty":return new $k(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fy.get(n);r&&(q("ComponentProvider","Removing Datastore"),Fy.delete(n),r.terminate())}(this),Promise.resolve()}}function PA(t,e,n,r={}){var s;t=Qt(t,Ru);const i=oi(e),o=t._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(y_(`https://${c}`),v_("Firestore",!0)),o.host!==Sw&&o.host!==c&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Qr(h,u)&&(t._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=tt.MOCK_USER;else{f=dI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tt(g)}t._authCredentials=new Uk(new l1(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Ce{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Go(n,Ce._jsonSchema))return new Ce(e,r||null,new W(de.fromString(n.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:De("string",Ce._jsonSchemaVersion),referencePath:De("string")};class dr extends ss{constructor(e,n,r){super(e,n,jf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new W(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function kt(t,e,...n){if(t=Ge(t),c1("collection","path",e),t instanceof Ru){const r=de.fromString(e,...n);return ey(r),new dr(t,null,r)}{if(!(t instanceof Ce||t instanceof dr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return ey(r),new dr(t.firestore,null,r)}}function _t(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=Nf.newId()),c1("doc","path",e),t instanceof Ru){const r=de.fromString(e,...n);return Zg(r),new Ce(t,null,new W(r))}{if(!(t instanceof Ce||t instanceof dr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return Zg(r),new Ce(t.firestore,t instanceof dr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="AsyncQueue";class $y{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nw(this,"async_queue_retry"),this.oc=()=>{const r=Gc();r&&q(By,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Gc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new kn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!di(e))throw e;q(By,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,jn("INTERNAL UNHANDLED ERROR: ",qy(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Gf.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&G(47125,{hc:qy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function qy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class is extends Ru{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $y,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $y(e),this._firestoreClient=void 0,await e}}}function jA(t,e){const n=typeof t=="object"?t:E_(),r=typeof t=="string"?t:$l,s=mf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uI("firestore");i&&PA(s,...i)}return s}function Jf(t){if(t._terminated)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DA(t),t._firestoreClient}function DA(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,h,f){return new iN(u,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Iw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pt(Ke.fromBase64String(e))}catch(n){throw new B(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pt(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Go(e,Pt._jsonSchema))return Pt.fromBase64String(e.bytes)}}Pt._jsonSchemaVersion="firestore/bytes/1.0",Pt._jsonSchema={type:De("string",Pt._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:an._jsonSchemaVersion}}static fromJSON(e){if(Go(e,an._jsonSchema))return new an(e.latitude,e.longitude)}}an._jsonSchemaVersion="firestore/geoPoint/1.0",an._jsonSchema={type:De("string",an._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Go(e,ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ln(e.vectorValues);throw new B(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ln._jsonSchemaVersion="firestore/vectorValue/1.0",ln._jsonSchema={type:De("string",ln._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class OA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ko(e,this.data,n,this.fieldTransforms)}}class kw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:t})}}class Zf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Yl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Nw(this.Ec)&&VA.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class MA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bu(e)}Dc(e,n,r,s=!1){return new Zf({Ec:e,methodName:n,bc:r,path:qe.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(t){const e=t._freezeSettings(),n=bu(t._databaseId);return new MA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bw(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);tm("Data must be an object, but it was:",o,r);const u=Aw(r,o);let c,h;if(i.merge)c=new Tt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=ph(e,p,n);if(!o.contains(g))throw new B(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Rw(f,g)||f.push(g)}c=new Tt(f),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new OA(new mt(u),c,h)}class Vu extends ju{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vu}}class em extends ju{_toFieldTransform(e){return new CN(e.path,new Do)}isEqual(e){return e instanceof em}}function LA(t,e,n,r){const s=t.Dc(1,e,n);tm("Data must be an object, but it was:",s,r);const i=[],o=mt.empty();Ir(r,(c,h)=>{const f=nm(e,c,n);h=Ge(h);const p=s.gc(f);if(h instanceof Vu)i.push(f);else{const g=Jo(h,p);g!=null&&(i.push(f),o.set(f,g))}});const u=new Tt(i);return new kw(o,u,s.fieldTransforms)}function FA(t,e,n,r,s,i){const o=t.Dc(1,e,n),u=[ph(e,r,n)],c=[s];if(i.length%2!=0)throw new B(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(ph(e,i[g])),c.push(i[g+1]);const h=[],f=mt.empty();for(let g=u.length-1;g>=0;--g)if(!Rw(h,u[g])){const E=u[g];let k=c[g];k=Ge(k);const A=o.gc(E);if(k instanceof Vu)h.push(E);else{const P=Jo(k,A);P!=null&&(h.push(E),f.set(E,P))}}const p=new Tt(h);return new kw(f,p,o.fieldTransforms)}function UA(t,e,n,r=!1){return Jo(n,t.Dc(r?4:3,e))}function Jo(t,e){if(Cw(t=Ge(t)))return tm("Unsupported field value:",e,t),Aw(t,e);if(t instanceof ju)return function(r,s){if(!Nw(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Jo(u,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ge.fromDate(r);return{timestampValue:Gl(s.serializer,i)}}if(r instanceof ge){const i=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gl(s.serializer,i)}}if(r instanceof an)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pt)return{bytesValue:H1(s.serializer,r._byteString)};if(r instanceof Ce){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ln)return function(o,u){return{mapValue:{fields:{[_1]:{stringValue:x1},[ql]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.wc("VectorValues must only contain numeric values.");return Df(u.serializer,h)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${_u(r)}`)}(t,e)}function Aw(t,e){const n={};return f1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,s)=>{const i=Jo(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Cw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ge||t instanceof an||t instanceof Pt||t instanceof Ce||t instanceof ju||t instanceof ln)}function tm(t,e,n){if(!Cw(n)||!d1(n)){const r=_u(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function ph(t,e,n){if((e=Ge(e))instanceof Pu)return e._internalPath;if(typeof e=="string")return nm(t,e);throw Yl("Field path arguments must be of type string or ",t,!1,void 0,n)}const zA=new RegExp("[~\\*/\\[\\]]");function nm(t,e,n){if(e.search(zA)>=0)throw Yl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pu(...e.split("."))._internalPath}catch{throw Yl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new B(V.INVALID_ARGUMENT,u+t+c)}function Rw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ou("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BA extends Pw{data(){return super.data()}}function Ou(t,e){return typeof e=="string"?nm(t,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class jw extends rm{}function os(t,e,...n){let r=[];e instanceof rm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof sm).length,u=i.filter(c=>c instanceof Mu).length;if(o>1||o>0&&u>0)throw new B(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends jw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return Dw(e._query,n),new ss(e.firestore,e.converter,sh(e._query,n))}_parse(e){const n=Du(e.firestore);return function(i,o,u,c,h,f,p){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Wy(p,f);const k=[];for(const A of p)k.push(Hy(c,i,A));g={arrayValue:{values:k}}}else g=Hy(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Wy(p,f),g=UA(u,o,p,f==="in"||f==="not-in");return je.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qA(t,e,n){const r=e,s=Ou("where",t);return Mu._create(s,r,n)}class sm extends rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Dw(o,c),o=sh(o,c)}(e._query,n),new ss(e.firestore,e.converter,sh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class im extends jw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new im(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jo(i,o)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new hi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function mi(t,e="asc"){const n=e,r=Ou("orderBy",t);return im._create(r,n)}function Hy(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new B(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A1(e)&&n.indexOf("/")!==-1)throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!W.isDocumentKey(r))throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ly(t,new W(r))}if(n instanceof Ce)return ly(t,n._key);throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_u(n)}.`)}function Wy(t,e){if(!Array.isArray(t)||t.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dw(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HA{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[ql].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>be(o.doubleValue));return new ln(i)}convertGeoPoint(e){return new an(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Eu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const n=gr(e);return new ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);ae(Y1(r),9688,{name:e});const s=new Ro(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends Pw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ou("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:De("string",$r._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class ul extends $r{data(e={}){return super.data(e)}}class Us{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ul(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new ul(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new ul(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:WA(u.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Us._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){t=Qt(t,Ce);const e=Qt(t.firestore,is);return CA(Jf(e),t._key).then(n=>GA(e,t,n))}Us._jsonSchemaVersion="firestore/querySnapshot/1.0",Us._jsonSchema={type:De("string",Us._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class Mw extends HA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}function as(t){t=Qt(t,ss);const e=Qt(t.firestore,is),n=Jf(e),r=new Mw(e);return $A(t._query),RA(n,t._query).then(s=>new Us(e,r,t,s))}function Jl(t,e,n){t=Qt(t,Ce);const r=Qt(t.firestore,is),s=Vw(t.converter,e,n);return Fu(r,[bw(Du(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Vt.none())])}function Zo(t,e,n,...r){t=Qt(t,Ce);const s=Qt(t.firestore,is),i=Du(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Pu?FA(i,"updateDoc",t._key,e,n,r):LA(i,"updateDoc",t._key,e),Fu(s,[o.toMutation(t._key,Vt.exists(!0))])}function Lu(t){return Fu(Qt(t.firestore,is),[new Vf(t._key,Vt.none())])}function ti(t,e){const n=Qt(t.firestore,is),r=_t(t),s=Vw(t.converter,e);return Fu(n,[bw(Du(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Vt.exists(!1))]).then(()=>r)}function Fu(t,e){return function(r,s){const i=new kn;return r.asyncQueue.enqueueAndForget(async()=>vA(await AA(r),s,i)),i.promise}(Jf(t),e)}function GA(t,e,n){const r=n.docs.get(e._key),s=new Mw(t);return new $r(t,s,e._key,r,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}function ni(){return new em("serverTimestamp")}(function(e,n=!0){(function(s){ui=s})(ai),Ks(new Xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new is(new zk(r.getProvider("auth-internal")),new qk(o,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),ur(Kg,Qg,e),ur(Kg,Qg,"esm2017")})();var KA="firebase",QA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(KA,QA,"app");const XA={apiKey:"AIzaSyCu0IV2RZmfDxT5mfwLHryzLHMsqIN6Jzw",authDomain:"ourkandukur-website.firebaseapp.com",projectId:"ourkandukur-website",storageBucket:"ourkandukur-website.firebasestorage.app",messagingSenderId:"470549570335",appId:"1:470549570335:web:f6b5f0d75c34852411c62a"},Lw=x_(XA),fe=jA(Lw),Qc=Mk(Lw),YA=t=>{if(!t)return!1;const e=["name","phone","location","dob","gender","institutionName","educationStatus","qualification"];for(const n of e)if(!t[n])return!1;return!(t.qualification==="Other"&&!t.otherQualification||t.stream==="Other"&&!t.otherStream||t.branch==="Other"&&!t.otherBranch)},Fw=M.createContext(void 0),kr=()=>{const t=M.useContext(Fw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},JA=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(null),[i,o]=M.useState(!0);M.useEffect(()=>{const p=S2(Qc,async g=>{if(n(g),g){const E=_t(fe,"users",g.uid),k=await Ow(E);if(k.exists()){const A=k.data();A.role||(A.role="jobseeker",await Jl(E,{role:"jobseeker"},{merge:!0})),s(A)}else{const A={uid:g.uid,email:g.email||"",name:g.displayName||"New User",photoURL:g.photoURL||"",role:"jobseeker"};await Jl(E,A),s(A)}}else s(null);o(!1)});return()=>p()},[]);const u=async()=>{const p=new wn;try{await W2(Qc,p)}catch(g){console.error("Error during sign-in:",g)}},c=async()=>{try{await k2(Qc)}catch(p){console.error("Error during sign-out:",p)}},h=p=>{s(g=>g?{...g,...p}:null)},f={user:e,userProfile:r,loading:i,isProfileComplete:YA(r),signIn:u,signOut:c,updateUserProfile:h};return l.jsx(Fw.Provider,{value:f,children:!i&&t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},f)=>M.createElement("svg",{ref:f,...ZA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${eC(t)}`,u].join(" "),...h},[...e.map(([p,g])=>M.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Y("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Y("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Y("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Y("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Y("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Y("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=Y("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Y("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=Y("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Y("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Y("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Y("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Y("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Y("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Y("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Y("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Y("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Y("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=Y("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=Y("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Y("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=Y("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Y("VenetianMask",[["path",{d:"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z",key:"1g6z3j"}],["path",{d:"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z",key:"c2lwnf"}],["path",{d:"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z",key:"njd9zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Y("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),TC=()=>{const[t]=M.useState([]);return{announcements:t,loading:!1}},IC=()=>{const{announcements:t,loading:e}=TC(),[n,r]=M.useState([]);if(e||t.length===0)return null;const s=t.filter(c=>!n.includes(c.id));if(s.length===0)return null;const i=c=>{r(h=>[...h,c])},o=c=>{switch(c){case"urgent":return Mn;case"info":return uC;case"featured":return um;default:return cC}},u=c=>{switch(c){case"high":return"bg-red-600";case"medium":return"bg-orange-600";case"low":return"bg-blue-600";default:return"bg-blue-600"}};return l.jsx("div",{className:"space-y-2",children:s.slice(0,3).map(c=>{const h=o(c.type),f=u(c.priority);return l.jsx("div",{className:`${f} text-white px-4 py-3 relative`,children:l.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(h,{className:"h-5 w-5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:c.title}),l.jsx("p",{className:"text-sm opacity-90",children:c.content})]})]}),l.jsx("button",{onClick:()=>i(c.id),className:"text-white hover:text-gray-200 transition-colors",children:l.jsx(ls,{className:"h-5 w-5"})})]})},c.id)})})},SC=({currentSection:t,setCurrentSection:e})=>{const{user:n,signIn:r,signOut:s,loading:i}=kr(),[o,u]=M.useState(!1),c=["home","opportunities","about","team","contact"],h=f=>{e(f),u(!1)};return l.jsxs("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-sm shadow-sm",children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"/LOGO_KDKR.png",alt:"OUR KANDUKUR Logo",className:"h-10 w-10 rounded-full object-cover"}),l.jsx("span",{className:"ml-3 text-lg font-bold text-gray-800",children:"OUR KANDUKUR"})]}),l.jsx("nav",{className:"hidden md:flex space-x-8",children:c.map(f=>l.jsx("button",{onClick:()=>h(f),className:`capitalize text-base font-medium transition-colors ${t===f?"text-blue-600":"text-gray-500 hover:text-gray-900"}`,children:f},f))}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[l.jsx("button",{className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-900",children:l.jsx(tC,{size:20})}),!i&&l.jsx(l.Fragment,{children:n?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>h("profile"),className:"rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"View Profile",children:l.jsx("img",{src:n.photoURL||`https://ui-avatars.com/api/?name=${n.displayName||"User"}&background=random`,alt:n.displayName||"User",className:"h-8 w-8 rounded-full",referrerPolicy:"no-referrer"})}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Sign Out"})]}):l.jsxs("button",{onClick:r,className:"flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[l.jsx(Ky,{size:16,className:"mr-2"}),"Sign In"]})})]}),l.jsx("div",{className:"md:hidden",children:l.jsx("button",{onClick:()=>u(!o),className:"p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100","aria-label":"Open main menu",children:o?l.jsx(ls,{size:24}):l.jsx(dC,{size:24})})})]})]})}),o&&l.jsxs("div",{className:"md:hidden bg-white shadow-lg",children:[l.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[c.map(f=>l.jsx("button",{onClick:()=>h(f),className:`w-full text-left block px-3 py-2 rounded-md text-base font-medium ${t===f?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f)),n&&l.jsx("button",{onClick:()=>h("profile"),className:`w-full text-left block px-3 py-2 rounded-md text-base font-medium ${t==="profile"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Profile"})]}),l.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:l.jsx("div",{className:"px-2",children:!i&&l.jsx(l.Fragment,{children:n?l.jsx("button",{onClick:s,className:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"Sign Out"}):l.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[l.jsx(Ky,{size:16,className:"mr-2"}),"Sign In"]})})})})]})]})},Qy=({setCurrentSection:t})=>{const e=[{icon:rC,title:"Intellectual Capital",description:"Building knowledge and skills through workshops, seminars, and hands-on learning experiences.",color:"bg-blue-600"},{icon:aC,title:"Financial Capital",description:"Creating pathways to financial growth through internships, jobs, and entrepreneurship opportunities.",color:"bg-green-600"},{icon:gh,title:"Social Capital",description:"Fostering connections and building networks that last a lifetime through community engagement.",color:"bg-purple-600"}];return l.jsx("section",{className:"bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700 text-white gradient-shift overflow-hidden",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[l.jsxs("div",{className:"text-center mb-16 slide-in-up",children:[l.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6 float-animation",children:["Welcome to ",l.jsx("span",{className:"text-yellow-400 unique-3d-text",children:"OUR KANDUKUR"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-blue-200 mb-8 max-w-4xl mx-auto bounce-in",children:"Empowering students through comprehensive support in internships, workshops, hackathons, tech seminars, webinars, and job opportunities."}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:l.jsxs("button",{onClick:()=>t("opportunities"),className:"bg-orange-500 hover:bg-orange-600 text-white px-8 py-3 rounded-lg font-semibold btn-3d neon-glow flex items-center justify-center gap-2",children:["Explore Opportunities",l.jsx(oC,{className:"h-5 w-5"})]})})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-8 perspective-container",children:e.map((n,r)=>l.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 hover:bg-white/20 transition-all duration-300 card-3d glass-effect pulse-glow",style:{animationDelay:`${r*.2}s`},children:[l.jsx("div",{className:`${n.color} w-16 h-16 rounded-full flex items-center justify-center mb-6 float-animation`,children:l.jsx(n.icon,{className:"h-8 w-8 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold mb-4",children:n.title}),l.jsx("p",{className:"text-blue-200 leading-relaxed",children:n.description})]},r))})]})})},Gw=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"opportunities"),mi("createdAt","desc"));let h=(await as(u)).docs.map(f=>{const p=f.data();return{id:f.id,title:p.title||"No Title",description:p.description||"No Description",link:p.link||"#",category:p.category||"general",type:p.category||"general",company:p.company||"Not Specified",location:p.location||"Remote",deadline:p.deadline||new Date().toISOString(),stipend:p.stipend||"Not Disclosed",status:p.status||"open",requirements:Array.isArray(p.requirements)?p.requirements:[],createdAt:p.createdAt,isFeatured:p.isFeatured||!1,workLocation:p.workLocation||"On-site",stipendValue:p.stipendValue||0}});h.sort((f,p)=>{var T,w;if(f.isFeatured&&!p.isFeatured)return-1;if(!f.isFeatured&&p.isFeatured)return 1;const g=new Date;g.setHours(0,0,0,0);const E=new Date(f.deadline)<g||f.status==="closed",k=new Date(p.deadline)<g||p.status==="closed";if(!E&&k)return-1;if(E&&!k)return 1;const A=((T=f.createdAt)==null?void 0:T.seconds)||0;return(((w=p.createdAt)==null?void 0:w.seconds)||0)-A}),e(h)}catch(u){console.error("Error fetching opportunities: ",u),i("Failed to load opportunities.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{opportunities:t,loading:n,error:s,refetch:o}},Xc=({setCurrentSection:t})=>{const{opportunities:e,loading:n,error:r,refetch:s}=Gw(),{user:i,signIn:o,isProfileComplete:u}=kr(),[c,h]=M.useState("all"),[f,p]=M.useState(""),[g,E]=M.useState("all"),[k,A]=M.useState(0),[P,T]=M.useState(!1),w=[{id:"all",label:"All"},{id:"internships",label:"Internships"},{id:"jobs",label:"Jobs"},{id:"workshops",label:"Workshops"},{id:"hackathons",label:"Hackathons"},{id:"seminars",label:"Seminars"},{id:"webinars",label:"Webinars"}],I=M.useMemo(()=>(e||[]).filter(_=>{const v=c==="all"||_.type===c,x=_.title.toLowerCase().includes(f.toLowerCase())||_.company.toLowerCase().includes(f.toLowerCase()),S=g==="all"||_.workLocation===g,b=_.stipendValue>=k;return v&&x&&S&&b}),[e,c,f,g,k]),D=()=>{p(""),E("all"),A(0)},F=_=>{const v=new Date;return v.setHours(0,0,0,0),new Date(_.deadline)<v||_.status==="closed"?l.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:"Closed"}):l.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Open"})},U=_=>{const v=new Date;v.setHours(0,0,0,0);const x=new Date(_.deadline)<v;if(!(_.status==="closed"||x)){if(!i){alert("Please sign in to apply for this opportunity."),o();return}if(!u){alert("Please complete your profile before applying for opportunities."),t("profile");return}_.link&&window.open(_.link,"_blank","noopener,noreferrer")}};return l.jsx("section",{id:"opportunities",className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Latest Opportunities"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Discover the latest internships, jobs, workshops, and events - updated in real-time"}),l.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Updates"]}),l.jsxs("button",{onClick:s,className:"flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[l.jsx(pC,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})]}),l.jsxs("div",{className:"mb-8 space-y-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[l.jsxs("div",{className:"relative flex-grow w-full",children:[l.jsx(lm,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{id:"search-main",type:"text",placeholder:"Search by title or company...",value:f,onChange:_=>p(_.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 shadow-sm"})]}),l.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-3 bg-white text-gray-800 rounded-lg font-semibold shadow-sm border hover:bg-gray-100 w-full sm:w-auto justify-center",children:[l.jsx(vC,{className:"h-4 w-4"}),"Filters"]})]}),l.jsx("div",{className:"flex gap-2 flex-wrap items-center justify-center pt-4",children:w.map(_=>l.jsx("button",{onClick:()=>h(_.id),className:`px-4 py-2 text-sm rounded-lg font-semibold transition-all ${c===_.id?"bg-blue-600 text-white shadow-md":"bg-white text-gray-800 hover:bg-gray-100 shadow-sm border"}`,children:_.label},_.id))})]}),P&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",onClick:()=>T(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md space-y-6",onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"More Filters"}),l.jsx("button",{onClick:()=>T(!1),className:"p-2 rounded-full hover:bg-gray-200",children:l.jsx(ls,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"workLocationFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Mode"}),l.jsxs("select",{id:"workLocationFilter",value:g,onChange:_=>E(_.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"On-site",children:"On-site"}),l.jsx("option",{value:"Remote",children:"Remote"}),l.jsx("option",{value:"Hybrid",children:"Hybrid"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"stipendFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stipend/Salary: ₹",k.toLocaleString()]}),l.jsx("input",{type:"range",id:"stipendFilter",min:"0",max:"100000",step:"5000",value:k,onChange:_=>A(Number(_.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[l.jsx("button",{onClick:D,className:"text-sm font-medium text-gray-600 hover:text-red-600",children:"Reset Filters"}),l.jsx("button",{onClick:()=>T(!1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:"Done"})]})]})}),n&&l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(Ie,{className:"h-8 w-8 animate-spin text-blue-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading opportunities..."})]}),r&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Mn,{className:"h-5 w-5 text-red-600 mr-2"}),l.jsxs("span",{className:"text-red-800",children:["Error loading opportunities: ",r]}),l.jsx("button",{onClick:s,className:"ml-4 text-red-600 hover:text-red-800 underline",children:"Try again"})]})}),!n&&!r&&l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:I.map(_=>{const v=new Date(_.deadline)<new Date||_.status==="closed";return l.jsxs("div",{className:`bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex flex-col relative overflow-hidden ${_.isFeatured?"ring-2 ring-blue-500 shadow-blue-200":"border border-gray-200"}`,children:[_.isFeatured&&l.jsxs("div",{className:"absolute top-0 left-0 bg-blue-600 text-white px-3 py-1 text-xs font-bold flex items-center gap-1",children:[l.jsx(um,{className:"h-3 w-3"})," Featured"]}),l.jsxs("div",{className:"p-6 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 pt-4",children:[l.jsx("span",{className:"text-sm font-medium text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:_.type.charAt(0).toUpperCase()+_.type.slice(1)}),F(_)]}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:_.title}),l.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[l.jsx(sC,{className:"h-4 w-4 mr-2"}),_.company]}),l.jsxs("div",{className:"space-y-2 mb-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(iC,{className:"h-4 w-4 mr-2"}),_.workLocation]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(gi,{className:"h-4 w-4 mr-2"}),_.location]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(om,{className:"h-4 w-4 mr-2"}),"Deadline: ",new Date(_.deadline).toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(lC,{className:"h-4 w-4 mr-2"}),_.stipend]})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-grow",children:_.description}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:_.requirements.map((x,S)=>l.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:x},S))}),l.jsx("button",{onClick:()=>U(_),className:`w-full mt-auto py-2 px-4 rounded-lg font-medium transition-all ${v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,children:v?"Application Closed":"Apply Now"})]})]},_.id)})}),!n&&!r&&I.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500 text-lg",children:"No opportunities found matching your criteria."})})]})})},Kw=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"testimonials"),mi("createdAt","desc")),h=(await as(u)).docs.map(f=>{const p=f.data();return{id:f.id,name:p.name||"Anonymous",role:p.role||"Community Member",image:p.image||"",content:p.content||"",rating:p.rating||5,createdAt:p.createdAt}});e(h)}catch(u){console.error("Error fetching testimonials: ",u),i("Failed to load testimonials.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{testimonials:t,loading:n,error:s,refetch:o}},cm=()=>{const[t,e]=M.useState({}),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=_t(fe,"settings","links"),c=await Ow(u);c.exists()?e(c.data()):e({whatsappChannelUrl:"",whatsappCommunityUrl:"",facebookUrl:"",instagramUrl:"",linkedinUrl:"",youtubeUrl:""})}catch(u){console.error("Error fetching site settings: ",u),i("Failed to load site settings.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{settings:t,loading:n,error:s,refetch:o}},Qw=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"partners"),mi("createdAt","desc")),h=(await as(u)).docs.map(f=>({id:f.id,...f.data()}));e(h)}catch(u){console.error("Error fetching partners: ",u),i("Failed to load partners.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{partners:t,loading:n,error:s,refetch:o}},kC=["Community Partners","Education Partners","Media Partners","Outreach & Influencer Partners","Corporate & Sponsorship Partners","Government & Institutional Partners"],NC=()=>{const{partners:t,loading:e,error:n}=Qw(),r=t.reduce((s,i)=>((s[i.category]=s[i.category]||[]).push(i),s),{});return l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl",children:"Our Valued Partners"}),l.jsx("p",{className:"mt-4 text-xl text-gray-600 max-w-3xl mx-auto",children:"We are proud to collaborate with a diverse group of organizations to create opportunities."})]}),e&&l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(Ie,{className:"h-12 w-12 animate-spin text-blue-600"})}),n&&l.jsxs("div",{className:"text-center text-red-600 bg-red-50 p-6 rounded-lg",children:[l.jsx(Mn,{className:"mx-auto h-8 w-8"}),l.jsx("p",{className:"mt-2",children:n})]}),!e&&!n&&l.jsx("div",{className:"space-y-16",children:kC.map(s=>r[s]&&l.jsxs("div",{children:[l.jsxs("div",{className:"relative mb-10",children:[l.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center",children:l.jsx("span",{className:"bg-white px-4 text-2xl font-semibold text-gray-700 rounded-md",children:s})})]}),l.jsx("div",{className:"flex flex-wrap justify-center items-center gap-8 lg:gap-12",children:r[s].map(i=>l.jsx("div",{className:"text-center",title:i.name,children:l.jsx("img",{src:i.logoUrl,alt:`${i.name} logo`,className:"h-24 max-w-xs object-contain grayscale hover:grayscale-0 transition-all duration-300"})},i.id))})]},s))})]})})},bC=()=>{const{testimonials:t,loading:e,error:n}=Kw(),{settings:r,loading:s}=cm(),i=[{number:"2000+",label:"Students Empowered",icon:gh},{number:"500+",label:"Opportunities Created",icon:_C},{number:"150+",label:"Partner Companies",icon:Uw},{number:"50+",label:"Expert Mentors",icon:gh}];return l.jsx("section",{className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-xl shadow-blue-500/10 mb-16 transition-all duration-300 hover:shadow-blue-500/20 hover:shadow-2xl hover:-translate-y-1",children:[l.jsxs("div",{className:"flex items-center justify-center mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg mr-4",children:l.jsx("img",{src:"/LOGO_KDKR.png",alt:"OUR KANDUKUR Community Logo",className:"w-16 h-16 rounded-lg object-contain"})}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"About Our Community"})]}),l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("p",{className:"text-lg text-gray-600 leading-relaxed mb-6",children:"OUR KANDUKUR is a vibrant startup community that serves as a bridge between students and the industry. We provide comprehensive support through internships, workshops, hackathons, tech seminars, webinars, and job opportunities to help students build successful careers."}),l.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Based in Kandukur, Prakasam District, Andhra Pradesh, we have successfully created a network of opportunities that connects talented students with leading companies and organizations across India."})]})]}),l.jsx("div",{className:"grid md:grid-cols-4 gap-8 mb-16",children:i.map((o,u)=>l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg shadow-blue-500/10 hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-300 hover:-translate-y-1",children:[l.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(o.icon,{className:"h-6 w-6 text-blue-600"})}),l.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:o.number}),l.jsx("div",{className:"text-gray-600",children:o.label})]})},u))}),!s&&(r.whatsappChannelUrl||r.whatsappCommunityUrl)&&l.jsxs("div",{className:"mt-16 mb-16",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Join Our Conversation"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Stay updated and connect with the community through our WhatsApp channels."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[r.whatsappChannelUrl&&l.jsxs("a",{href:r.whatsappChannelUrl,target:"_blank",rel:"noopener noreferrer",className:"block bg-white p-8 rounded-lg shadow-lg shadow-green-500/10 hover:shadow-xl hover:shadow-green-500/20 transition-all duration-300 hover:-translate-y-1 text-center",children:[l.jsx(fC,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),l.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"WhatsApp Channel"}),l.jsx("p",{className:"text-gray-500 mt-2",children:"Get the latest announcements and opportunities directly."})]}),r.whatsappCommunityUrl&&l.jsxs("a",{href:r.whatsappCommunityUrl,target:"_blank",rel:"noopener noreferrer",className:"block bg-white p-8 rounded-lg shadow-lg shadow-green-500/10 hover:shadow-xl hover:shadow-green-500/20 transition-all duration-300 hover:-translate-y-1 text-center",children:[l.jsx(xC,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),l.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"WhatsApp Community"}),l.jsx("p",{className:"text-gray-500 mt-2",children:"Join the discussion, ask questions, and network with peers."})]})]})]}),l.jsx(NC,{}),l.jsxs("div",{className:"mt-16",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What Our Students Say"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Hear from our successful community members who have transformed their careers through OUR KANDUKUR"})]}),e&&l.jsx("div",{className:"flex justify-center",children:l.jsx(Ie,{className:"animate-spin"})}),n&&l.jsxs("div",{className:"text-red-500 text-center",children:[l.jsx(Mn,{className:"inline mr-2"}),n]}),!e&&!n&&t.length>0&&l.jsx("div",{className:"relative overflow-hidden",children:l.jsx("div",{className:"flex animate-scroll space-x-6 w-max",children:[...t,...t].map((o,u)=>l.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg w-80 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("img",{src:o.image||`https://ui-avatars.com/api/?name=${o.name}`,alt:o.name,className:"w-12 h-12 rounded-full object-cover mr-4"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900",children:o.name}),l.jsx("p",{className:"text-sm text-blue-600",children:o.role})]})]}),l.jsx("div",{className:"flex mb-3",children:[...Array(o.rating)].map((c,h)=>l.jsx(um,{className:"h-4 w-4 text-yellow-400 fill-current"},h))}),l.jsxs("div",{className:"relative",children:[l.jsx(mC,{className:"absolute -top-2 -left-2 h-8 w-8 text-blue-200"}),l.jsx("p",{className:"text-gray-600 italic pl-6",children:o.content})]})]},`${o.id}-${u}`))})})]})]})})},Xw=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"teamMembers"),mi("createdAt","asc")),h=(await as(u)).docs.map(f=>{const p=f.data();return{id:f.id,name:p.name||"No Name",title:p.title||"Team Member",role:p.role||"General Core Team",bio:p.bio||"An essential member of the Our Kandukur team.",location:p.location||"Kandukur, AP",email:p.email||"",imageUrl:p.imageUrl||"",linkedinUrl:p.linkedinUrl||"",twitterUrl:p.twitterUrl||"",githubUrl:p.githubUrl||"",createdAt:p.createdAt}});e(h)}catch(u){console.error("Error fetching team members: ",u),i("Failed to load team members.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{teamMembers:t,loading:n,error:s,refetch:o}},AC=()=>{const{teamMembers:t,loading:e,error:n}=Xw(),r=t.reduce((i,o)=>{const u=o.role;return i[u]||(i[u]=[]),i[u].push(o),i},{}),s=["Founder","Mentors","Research & Development Team","Event Management Team","Social Media Marketing Team","GFX / VFX Team","Content Writing Team","General Core Team"];return l.jsx("section",{id:"team",className:"py-20 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl",children:"Meet Our Team"}),l.jsx("p",{className:"mt-4 text-xl text-gray-600 max-w-3xl mx-auto",children:"The passionate individuals dedicated to empowering our community."})]}),e&&l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(Ie,{className:"h-12 w-12 animate-spin text-blue-600"})}),n&&l.jsxs("div",{className:"text-center text-red-600 bg-red-50 p-6 rounded-lg",children:[l.jsx(Mn,{className:"mx-auto h-8 w-8"}),l.jsx("p",{className:"mt-2",children:n})]}),!e&&!n&&l.jsx("div",{className:"space-y-20",children:s.map(i=>r[i]&&l.jsxs("div",{children:[l.jsxs("div",{className:"relative mb-12",children:[l.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center",children:l.jsx("span",{className:"bg-gray-50 px-4 text-2xl font-semibold text-gray-700 rounded-md",children:i})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center",children:r[i].map(o=>l.jsxs("div",{className:"bg-white rounded-lg p-6 flex flex-col text-center transition-all duration-300 max-w-xs w-full shadow-lg shadow-blue-500/10 ring-1 ring-blue-300/50 hover:shadow-2xl hover:shadow-blue-500/20 hover:-translate-y-2 hover:ring-2 hover:ring-blue-400",children:[l.jsx("img",{className:"w-24 h-24 mx-auto rounded-full object-cover mb-4 border-4 border-blue-200",src:o.imageUrl,alt:o.name,onError:u=>{u.currentTarget.src=`https://ui-avatars.com/api/?name=${o.name.replace(/\s/g,"+")}&background=random&color=fff&size=128`}}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:o.name}),l.jsx("p",{className:"text-blue-600 font-semibold mb-3",children:o.title}),l.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-grow",children:o.bio}),l.jsxs("div",{className:"space-y-2 text-sm text-left mb-4 border-t pt-4",children:[l.jsxs("div",{className:"flex items-center text-gray-500",children:[l.jsx(gi,{className:"h-4 w-4 mr-2 shrink-0"}),l.jsx("span",{children:o.location})]}),l.jsxs("div",{className:"flex items-center text-gray-500",children:[l.jsx(pi,{className:"h-4 w-4 mr-2 shrink-0"}),l.jsx("a",{href:`mailto:${o.email}`,className:"hover:text-blue-600 truncate",children:o.email})]})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[o.linkedinUrl&&l.jsx("a",{href:o.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-700",children:l.jsx(Uu,{})}),o.twitterUrl&&l.jsx("a",{href:o.twitterUrl,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-500",children:l.jsx(qw,{})}),o.githubUrl&&l.jsx("a",{href:o.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-900",children:l.jsx(Bw,{})})]})]},o.id))})]},i))})]})})},CC=()=>{const{user:t,signIn:e}=kr(),[n,r]=M.useState({name:"",email:"",phone:"",category:"General Inquiry",message:""}),[s,i]=M.useState(!1),[o,u]=M.useState(""),c=g=>{const{name:E,value:k}=g.target;if(E==="phone"){const P=k.replace(/\D/g,"").slice(0,10);r({...n,[E]:P})}else r({...n,[E]:k})},h=async g=>{if(g.preventDefault(),!n.name||!n.email||!n.message){u("Please fill out all required fields.");return}i(!0),u("");try{await ti(kt(fe,"messages"),{...n,createdAt:ni()}),u("✅ Thank you! Your message has been sent."),r({name:"",email:"",phone:"",category:"General Inquiry",message:""})}catch(E){console.error("Error sending message:",E),u("❌ Sorry, there was an error sending your message.")}finally{i(!1),setTimeout(()=>u(""),5e3)}},f=[{icon:pi,title:"Email",value:"info@ourkandukur.com",link:"mailto:info@ourkandukur.com"},{icon:am,title:"Phone",value:"+91 9876543210",link:"tel:+919876543210"},{icon:gi,title:"Address",value:"Kandukur, Prakasam District, Andhra Pradesh, India",link:"#"}],p=()=>{t?alert("Thank you for your interest! We'll be in touch."):e()};return l.jsx("section",{id:"contact",className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Get in Touch"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Have questions or want to partner with us? We'd love to hear from you. Reach out and let's build something amazing together."})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[l.jsx("div",{className:"space-y-8",children:l.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg h-full",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Contact Information"}),l.jsx("div",{className:"space-y-6",children:f.map((g,E)=>l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"bg-blue-600 w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",children:l.jsx(g.icon,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:g.title}),l.jsx("a",{href:g.link,className:"text-gray-600 hover:text-blue-600 transition-colors",children:g.value})]})]},E))})]})}),l.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),l.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:c,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:c,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email address"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),l.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter your phone number"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),l.jsxs("select",{id:"category",name:"category",value:n.category,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"General Inquiry",children:"General Inquiry"}),l.jsx("option",{value:"Student Support",children:"Student Support"}),l.jsx("option",{value:"Company Partnership",children:"Company Partnership"}),l.jsx("option",{value:"Mentor Application",children:"Mentor Application"}),l.jsx("option",{value:"Technical Support",children:"Technical Support"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),l.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:c,rows:4,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter your message"})]}),l.jsxs("div",{className:"flex justify-end items-center",children:[o&&l.jsx("p",{className:"text-sm mr-4",children:o}),l.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 flex items-center justify-center gap-2 disabled:bg-gray-400",children:[s?l.jsx(Ie,{className:"animate-spin h-5 w-5"}):l.jsx(yC,{className:"h-5 w-5"}),s?"Sending...":"Send Message"]})]})]})]})]}),l.jsx("div",{className:"mt-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-8 text-center text-white",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsx(hC,{className:"h-12 w-12 mx-auto mb-4"}),l.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Join Our Community?"}),l.jsx("p",{className:"text-xl mb-6",children:"Connect with us today and take the first step towards building your future. Whether you're a student, company, or mentor, we're here to help you succeed."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScYxDqb_KLg-rIUKKd6YAHI7lhV3jQRfXEtTbxCd3ylunafkg/viewform",target:"_blank",rel:"noopener noreferrer",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Join as Student"}),l.jsx("button",{onClick:p,className:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:"Partner with Us"})]})]})})]})})},RC=()=>{const t=new Date().getFullYear(),{settings:e}=cm(),n=[{name:"About Us",href:"#"},{name:"Opportunities",href:"#"},{name:"Contact",href:"#"}],r=[{name:"Internships",href:"#"},{name:"Job Placements",href:"#"},{name:"Workshops",href:"#"},{name:"Hackathons",href:"#"},{name:"Seminars",href:"#"},{name:"Webinars",href:"#"}],s=[{name:"Student Guide",href:"#"},{name:"Company Portal",href:"#"},{name:"Mentor Program",href:"#"},{name:"Blog",href:"#"},{name:"FAQ",href:"#"},{name:"Privacy Policy",href:"#"}],i=[{name:"Facebook",icon:zw,href:e.facebookUrl},{name:"Twitter",icon:qw,href:"#"},{name:"LinkedIn",icon:Uu,href:e.linkedinUrl},{name:"Instagram",icon:$w,href:e.instagramUrl},{name:"YouTube",icon:Ww,href:e.youtubeUrl}].filter(o=>o.href);return l.jsx("footer",{className:"bg-gray-900 text-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:"OUR KANDUKUR"}),l.jsx("p",{className:"text-gray-400",children:"Startup Community"})]}),l.jsx("p",{className:"text-gray-400 leading-relaxed",children:"Empowering students through comprehensive support in building Intellectual, Financial, and Social Capital for a successful career."}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(pi,{className:"h-4 w-4 text-blue-400"}),l.jsx("span",{className:"text-sm text-gray-400",children:"ourkandukur.ap@gmail.com"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(am,{className:"h-4 w-4 text-blue-400"}),l.jsx("span",{className:"text-sm text-gray-400",children:"+91 9876543210"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(gi,{className:"h-4 w-4 text-blue-400"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Kandukur, Andhra Pradesh"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Quick Links"}),l.jsx("ul",{className:"space-y-2",children:n.map(o=>l.jsx("li",{children:l.jsx("a",{href:o.href,className:"text-gray-400 hover:text-white transition-colors",children:o.name})},o.name))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Opportunities"}),l.jsx("ul",{className:"space-y-2",children:r.map(o=>l.jsx("li",{children:l.jsx("a",{href:o.href,className:"text-gray-400 hover:text-white transition-colors",children:o.name})},o.name))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Resources"}),l.jsx("ul",{className:"space-y-2",children:s.map(o=>l.jsx("li",{children:l.jsx("a",{href:o.href,className:"text-gray-400 hover:text-white transition-colors",children:o.name})},o.name))})]})]}),l.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[l.jsx("div",{className:"flex space-x-4 mb-4 md:mb-0",children:i.map(o=>l.jsxs("a",{href:o.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:[l.jsx("span",{className:"sr-only",children:o.name}),l.jsx(o.icon,{className:"h-6 w-6"})]},o.name))}),l.jsxs("div",{className:"text-center md:text-right",children:[l.jsxs("p",{className:"text-gray-400 text-sm",children:["© ",t," OUR KANDUKUR. All rights reserved."]}),l.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Empowering students • Building futures • Creating opportunities"})]})]})})]})})},Yc={Graduate:{"B.Tech":["CSE","IT","AIML","IoT","ECE","EEE","Mechanical","Civil","Other"],"B.Sc":["Computer Science","Mathematics","Physics","Chemistry","Biology","Other"],"B.Com":["General","Computers","Taxation","Other"],"B.A.":["History","Economics","Political Science","Literature","Other"],Other:[]},"Post-Graduate":{"M.Tech":["CSE","IT","AI","Data Science","Other"],"M.Sc":["Computer Science","Mathematics","Physics","Other"],MBA:["Finance","HR","Marketing","Systems","Other"],Other:[]},Diploma:{Polytechnic:["DCE","DME","DEEE","DECE","Other"],Other:[]},Other:[]},PC=()=>{var A;const{userProfile:t,loading:e,updateUserProfile:n}=kr(),[r,s]=M.useState({}),[i,o]=M.useState(""),[u,c]=M.useState(!1),[h,f]=M.useState("");M.useEffect(()=>{t&&s({name:t.name||"",location:t.location||"",phone:t.phone||"",gender:t.gender||"Prefer not to say",dob:t.dob||"",linkedinUrl:t.linkedinUrl||"",githubUrl:t.githubUrl||"",qualification:t.qualification||"",otherQualification:t.otherQualification||"",stream:t.stream||"",otherStream:t.otherStream||"",branch:t.branch||"",otherBranch:t.otherBranch||"",institutionName:t.institutionName||"",educationStatus:t.educationStatus||"Pursuing"})},[t]);const p=P=>{const{id:T,value:w}=P.target;if(T==="name"){const I=w.toUpperCase().replace(/[^A-Z\s]/g,"");s(D=>({...D,name:I})),o(w!==I?"Name can only contain letters and will be converted to uppercase.":"")}else if(T==="phone"){const D=w.replace(/\D/g,"").slice(0,10);s(F=>({...F,phone:D}))}else s(I=>({...I,[T]:w}))},g=async P=>{if(P.preventDefault(),!(!t||i)){c(!0),f("");try{const T=_t(fe,"users",t.uid);await Jl(T,r,{merge:!0}),n&&n(r),f("✅ Profile saved successfully!")}catch(T){console.error("Error saving profile:",T),f("❌ Failed to save profile.")}finally{c(!1),setTimeout(()=>f(""),3e3)}}};if(e)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(Ie,{className:"h-12 w-12 animate-spin text-blue-600"})});if(!t)return l.jsx("div",{className:"text-center py-20",children:l.jsx("h2",{className:"text-2xl font-bold",children:"Please sign in to view your profile."})});const E=r.qualification||"",k=r.stream||"";return l.jsx("div",{className:"bg-gray-100 min-h-screen",children:l.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden p-8",children:[l.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[l.jsx("img",{src:t.photoURL||`https://ui-avatars.com/api/?name=${t.name}&background=random`,alt:"Profile",className:"h-24 w-24 rounded-full object-cover border-4 border-blue-200",referrerPolicy:"no-referrer"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),l.jsxs("p",{className:"text-md text-gray-500 flex items-center mt-1",children:[l.jsx(pi,{className:"h-4 w-4 mr-2"}),t.email]})]})]}),l.jsxs("form",{onSubmit:g,className:"space-y-6",children:[l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-lg font-semibold px-2",children:"Personal Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),l.jsx("input",{type:"text",id:"name",value:r.name,onChange:p,className:"mt-1 w-full p-2 border rounded-md"}),i&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:i})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(am,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"tel",id:"phone",value:r.phone,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(gi,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"text",id:"location",value:r.location,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"dob",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(om,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"date",id:"dob",value:r.dob,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(EC,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsxs("select",{id:"gender",value:r.gender,onChange:p,className:"w-full pl-10 p-2 border rounded-md",children:[l.jsx("option",{children:"Male"}),l.jsx("option",{children:"Female"}),l.jsx("option",{children:"Other"}),l.jsx("option",{children:"Prefer not to say"})]})]})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-lg font-semibold px-2",children:"Academic Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"institutionName",className:"block text-sm font-medium text-gray-700",children:"Institution Name"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(gC,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"text",id:"institutionName",value:r.institutionName,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"educationStatus",className:"block text-sm font-medium text-gray-700",children:"Status"}),l.jsxs("select",{id:"educationStatus",value:r.educationStatus,onChange:p,className:"mt-1 w-full p-2 border rounded-md",children:[l.jsx("option",{children:"Pursuing"}),l.jsx("option",{children:"Completed"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"qualification",className:"block text-sm font-medium text-gray-700",children:"Qualification"}),l.jsxs("select",{id:"qualification",value:E,onChange:p,className:"mt-1 w-full p-2 border rounded-md",children:[l.jsx("option",{value:"",children:"Select..."}),Object.keys(Yc).map(P=>l.jsx("option",{children:P},P))]})]}),E==="Other"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"otherQualification",className:"block text-sm font-medium text-gray-700",children:"Please Specify Qualification"}),l.jsx("input",{type:"text",id:"otherQualification",value:r.otherQualification,onChange:p,className:"mt-1 w-full p-2 border rounded-md"})]}),E&&E!=="Other"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stream",className:"block text-sm font-medium text-gray-700",children:"Stream"}),l.jsxs("select",{id:"stream",value:k,onChange:p,className:"mt-1 w-full p-2 border rounded-md",disabled:!E,children:[l.jsx("option",{value:"",children:"Select..."}),Object.keys(Yc[E]||{}).map(P=>l.jsx("option",{children:P},P))]})]}),k==="Other"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"otherStream",className:"block text-sm font-medium text-gray-700",children:"Please Specify Stream"}),l.jsx("input",{type:"text",id:"otherStream",value:r.otherStream,onChange:p,className:"mt-1 w-full p-2 border rounded-md"})]}),k&&k!=="Other"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"branch",className:"block text-sm font-medium text-gray-700",children:"Branch"}),l.jsxs("select",{id:"branch",value:r.branch,onChange:p,className:"mt-1 w-full p-2 border rounded-md",disabled:!k,children:[l.jsx("option",{value:"",children:"Select..."}),(((A=Yc[E])==null?void 0:A[k])||[]).map(P=>l.jsx("option",{children:P},P))]})]}),r.branch==="Other"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"otherBranch",className:"block text-sm font-medium text-gray-700",children:"Please Specify Branch"}),l.jsx("input",{type:"text",id:"otherBranch",value:r.otherBranch,onChange:p,className:"mt-1 w-full p-2 border rounded-md"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-lg font-semibold px-2",children:"Professional Links (Optional)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"linkedinUrl",className:"block text-sm font-medium text-gray-700",children:"LinkedIn Profile URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Uu,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"linkedinUrl",value:r.linkedinUrl,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-gray-700",children:"GitHub Profile URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Bw,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"githubUrl",value:r.githubUrl,onChange:p,className:"w-full pl-10 p-2 border rounded-md"})]})]})]})]}),l.jsxs("div",{className:"mt-8 flex justify-end items-center",children:[h&&l.jsx("p",{className:"text-sm text-gray-600 mr-4",children:h}),l.jsxs("button",{type:"submit",disabled:u||!!i,className:"inline-flex items-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[u?l.jsx(Ie,{className:"animate-spin h-5 w-5 mr-3"}):l.jsx(yi,{className:"h-5 w-5 mr-2"}),u?"Saving...":"Save Profile"]})]})]})]})})})},Yw=()=>{const[t,e]=M.useState({title:"",company:"",location:"Remote",category:"jobs",status:"open",stipend:"Not Disclosed",deadline:"",link:"",description:"",requirements:"",workLocation:"On-site",stipendValue:0,isFeatured:!1}),[n,r]=M.useState(!1),[s,i]=M.useState(""),o=c=>{const{id:h,value:f,type:p}=c.target,E=p==="checkbox"?c.target.checked:f;e(k=>({...k,[h]:E}))},u=async c=>{c.preventDefault(),r(!0),i("");const h=t.requirements.split(",").map(f=>f.trim()).filter(Boolean);try{const f={...t,requirements:h,stipendValue:Number(t.stipendValue)||0,createdAt:ni()},p=await ti(kt(fe,"opportunities"),f);await ti(kt(fe,"notifications"),{type:"new_opportunity",title:`New ${t.category}: ${t.title}`,opportunityId:p.id,createdAt:ni()}),i("✅ Success! Opportunity has been posted."),e({title:"",company:"",location:"Remote",category:"jobs",status:"open",stipend:"Not Disclosed",deadline:"",link:"",description:"",requirements:"",workLocation:"On-site",stipendValue:0,isFeatured:!1})}catch(f){console.error("Error adding opportunity: ",f),i("❌ Error! Could not post opportunity.")}finally{r(!1),setTimeout(()=>i(""),4e3)}};return l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Post a New Opportunity"}),l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("input",{type:"text",id:"title",value:t.title,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),l.jsx("input",{type:"text",id:"company",value:t.company,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Location"}),l.jsx("input",{type:"text",id:"location",value:t.location,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"workLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Mode"}),l.jsxs("select",{id:"workLocation",value:t.workLocation,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",children:[l.jsx("option",{value:"On-site",children:"On-site"}),l.jsx("option",{value:"Remote",children:"Remote"}),l.jsx("option",{value:"Hybrid",children:"Hybrid"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),l.jsxs("select",{id:"category",value:t.category,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",children:[l.jsx("option",{value:"jobs",children:"Job"}),l.jsx("option",{value:"internships",children:"Internship"}),l.jsx("option",{value:"workshops",children:"Workshop"}),l.jsx("option",{value:"hackathons",children:"Hackathon"}),l.jsx("option",{value:"seminars",children:"Seminar"}),l.jsx("option",{value:"webinars",children:"Webinar"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stipend",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stipend (Display Text)"}),l.jsx("input",{type:"text",id:"stipend",value:t.stipend,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"e.g., ₹15,000/month"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stipendValue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stipend Value (for filtering)"}),l.jsx("input",{type:"number",id:"stipendValue",value:t.stipendValue,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"e.g., 15000"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"deadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Deadline"}),l.jsx("input",{type:"date",id:"deadline",value:t.deadline,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"link",className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration/Apply Link"}),l.jsx("input",{type:"url",id:"link",value:t.link,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{id:"description",value:t.description,onChange:o,required:!0,className:"w-full p-2 border border-gray-300 rounded-md",rows:4})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"requirements",className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirements (comma-separated)"}),l.jsx("input",{type:"text",id:"requirements",value:t.requirements,onChange:o,placeholder:"e.g. React, Node.js, Python",className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"isFeatured",type:"checkbox",checked:t.isFeatured,onChange:o,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsxs("label",{htmlFor:"isFeatured",className:"ml-2 block text-sm font-medium text-gray-900",children:["Feature this opportunity? ",l.jsx("span",{className:"text-gray-500",children:"(Will appear at the top)"})]})]})}),l.jsxs("div",{className:"flex items-center justify-end",children:[s&&l.jsx("p",{className:"text-sm text-gray-600 mr-4",children:s}),l.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",children:[n?l.jsx(Ie,{className:"animate-spin h-5 w-5 mr-3"}):l.jsx(yi,{className:"h-5 w-5 mr-2"}),n?"Submitting...":"Submit Opportunity"]})]})]})]})},jC=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"messages"),mi("createdAt","desc")),h=(await as(u)).docs.map(f=>{const p=f.data();return{id:f.id,name:p.name||"N/A",email:p.email||"N/A",message:p.message||"No message content.",createdAt:p.createdAt}});e(h)}catch(u){console.error("Error fetching messages: ",u),i("Failed to load messages.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{messages:t,loading:n,error:s,refetch:o}},DC=()=>{const{messages:t,loading:e,error:n,refetch:r}=jC();return e?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(Ie,{className:"h-8 w-8 animate-spin text-blue-600"})}):n?l.jsxs("div",{className:"text-center text-red-600 bg-red-50 p-6 rounded-lg",children:[l.jsx(Mn,{className:"mx-auto h-8 w-8"}),l.jsx("p",{className:"mt-2",children:n}),l.jsx("button",{onClick:r,className:"mt-4 text-sm font-semibold text-red-700 underline",children:"Try Again"})]}):l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Contact Form Submissions"}),t.length===0?l.jsx("p",{className:"text-gray-500",children:"No messages have been received yet."}):l.jsx("div",{className:"space-y-4",children:t.map(s=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-gray-900 flex items-center",children:[l.jsx(wC,{className:"h-4 w-4 mr-2 text-gray-500"}),s.name]}),l.jsxs("a",{href:`mailto:${s.email}`,className:"text-sm text-blue-600 flex items-center hover:underline",children:[l.jsx(pi,{className:"h-4 w-4 mr-2 text-gray-500"}),s.email]})]}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[l.jsx(om,{className:"h-4 w-4 mr-1"}),new Date(s.createdAt.seconds*1e3).toLocaleString()]})]}),l.jsx("p",{className:"mt-4 text-gray-700 bg-gray-50 p-3 rounded-md",children:s.message})]},s.id))})]})},VC=["Founder","Mentors","Research & Development Team","Event Management Team","Social Media Marketing Team","GFX / VFX Team","Content Writing Team","General Core Team"],Xy=({initialData:t={},onSubmit:e,onClose:n,isSubmitting:r})=>{const[s,i]=M.useState({name:t.name||"",title:t.title||"",role:t.role||"Mentors",bio:t.bio||"",location:t.location||"",email:t.email||"",linkedinUrl:t.linkedinUrl||"",twitterUrl:t.twitterUrl||"",githubUrl:t.githubUrl||""}),[o,u]=M.useState(null),c=p=>{p.target.files&&p.target.files[0]&&u(p.target.files[0])},h=p=>{const{id:g,value:E}=p.target;i(k=>({...k,[g]:E}))},f=p=>{p.preventDefault();const g={...s};e(g,o)};return l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Full Name"}),l.jsx("input",{type:"text",id:"name",value:s.name,onChange:h,required:!0,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium",children:"Title (e.g., Founder & CEO)"}),l.jsx("input",{type:"text",id:"title",value:s.title,onChange:h,required:!0,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium",children:"Team / Group"}),l.jsx("select",{id:"role",value:s.role,onChange:h,required:!0,className:"w-full p-2 border rounded-md",children:VC.map(p=>l.jsx("option",{value:p,children:p},p))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"location",className:"block text-sm font-medium",children:"Location (e.g., Seattle, WA)"}),l.jsx("input",{type:"text",id:"location",value:s.location,onChange:h,required:!0,className:"w-full p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email Address"}),l.jsx("input",{type:"email",id:"email",value:s.email,onChange:h,required:!0,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium",children:"Short Bio / Description"}),l.jsx("textarea",{id:"bio",value:s.bio,onChange:h,required:!0,rows:3,className:"w-full p-2 border rounded-md"})]}),l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-md font-semibold px-2",children:"Social Links (Optional)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"linkedinUrl",className:"block text-sm font-medium",children:"LinkedIn URL"}),l.jsx("input",{type:"url",id:"linkedinUrl",value:s.linkedinUrl,onChange:h,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"twitterUrl",className:"block text-sm font-medium",children:"Twitter URL"}),l.jsx("input",{type:"url",id:"twitterUrl",value:s.twitterUrl,onChange:h,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium",children:"GitHub URL"}),l.jsx("input",{type:"url",id:"githubUrl",value:s.githubUrl,onChange:h,className:"w-full p-2 border rounded-md"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"imageFile",className:"block text-sm font-medium",children:"Profile Picture"}),l.jsx("input",{type:"file",id:"imageFile",onChange:c,accept:"image/*",className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[n&&l.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 rounded-md bg-gray-200 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",disabled:r,className:"px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 flex items-center",children:[r?l.jsx(Ie,{className:"animate-spin mr-2"}):l.jsx(yi,{className:"mr-2"}),r?"Saving...":"Save Member"]})]})]})},OC=()=>{const{teamMembers:t,loading:e,error:n,refetch:r}=Xw(),[s,i]=M.useState(!1),[o,u]=M.useState(""),[c,h]=M.useState(null),f=async k=>{const A=new FormData;A.append("teamImage",k);const T=await(await fetch("https://ourkandukur.com/upload.php",{method:"POST",body:A})).json();if(T.status!=="success")throw new Error(T.message||"Image upload failed.");return T.url},p=async(k,A)=>{i(!0),u("");try{let P="";A?P=await f(A):P=`https://ui-avatars.com/api/?name=${encodeURIComponent(k.name)}&background=random&color=fff`,await ti(kt(fe,"teamMembers"),{...k,imageUrl:P,createdAt:ni()}),u("✅ Success! Team member added."),r()}catch(P){u(`❌ Error! ${P.message}`)}finally{i(!1),setTimeout(()=>u(""),5e3)}},g=async(k,A)=>{if(c){i(!0);try{let P=c.imageUrl;A&&(P=await f(A));const T=_t(fe,"teamMembers",c.id);await Zo(T,{...k,imageUrl:P}),alert("Team member updated successfully!"),h(null),r()}catch(P){alert(`Failed to update team member: ${P.message}`)}finally{i(!1)}}},E=async k=>{if(confirm("Are you sure you want to delete this team member?"))try{await Lu(_t(fe,"teamMembers",k)),alert("Team member deleted successfully."),r()}catch{alert("Failed to delete team member.")}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center",children:[l.jsx(Hw,{className:"mr-3"}),"Add a New Team Member"]}),o&&l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o}),l.jsx(Xy,{onSubmit:p,isSubmitting:s})]}),l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Current Team"}),e?l.jsx("div",{className:"flex justify-center",children:l.jsx(Ie,{className:"animate-spin h-8 w-8 text-blue-600"})}):l.jsx("div",{className:"space-y-4",children:t.map(k=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:k.imageUrl,alt:k.name,className:"h-12 w-12 rounded-full mr-4 object-cover"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:k.name}),l.jsx("p",{className:"text-sm text-gray-500",children:k.title})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>h(k),className:"text-blue-500 hover:text-blue-700 p-2 rounded-full hover:bg-blue-100",children:l.jsx(zu,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>E(k.id),className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100",children:l.jsx(Bu,{className:"h-5 w-5"})})]})]},k.id))}),n&&l.jsx("p",{className:"text-red-500 mt-4",children:"Error loading team members."})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-3xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Edit Team Member"}),l.jsx("button",{onClick:()=>h(null),className:"p-2 rounded-full hover:bg-gray-200",children:l.jsx(ls,{})})]}),l.jsx(Xy,{initialData:c,onSubmit:g,onClose:()=>h(null),isSubmitting:s})]})})]})},MC=({opportunity:t,onClose:e,onSave:n})=>{const[r,s]=M.useState(t),[i,o]=M.useState(!1),u=f=>{const{id:p,value:g}=f.target;s(E=>({...E,[p]:g}))},c=f=>{s(p=>({...p,requirements:f.target.value.split(",").map(g=>g.trim())}))},h=async f=>{f.preventDefault(),o(!0);try{const p=_t(fe,"opportunities",t.id),{id:g,...E}=r;await Zo(p,E),alert("Opportunity updated successfully!"),n(),e()}catch(p){console.error("Error updating opportunity:",p),alert("Failed to update opportunity.")}finally{o(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Edit Opportunity"}),l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-200",children:l.jsx(ls,{})})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium",children:"Title"}),l.jsx("input",{type:"text",id:"title",value:r.title,onChange:u,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"company",className:"block text-sm font-medium",children:"Company"}),l.jsx("input",{type:"text",id:"company",value:r.company,onChange:u,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium",children:"Category"}),l.jsxs("select",{id:"category",value:r.category,onChange:u,className:"w-full p-2 border rounded-md",children:[l.jsx("option",{value:"jobs",children:"Job"}),l.jsx("option",{value:"internships",children:"Internship"}),l.jsx("option",{value:"workshops",children:"Workshop"}),l.jsx("option",{value:"hackathons",children:"Hackathon"}),l.jsx("option",{value:"seminars",children:"Seminar"}),l.jsx("option",{value:"webinars",children:"Webinar"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"status",className:"block text-sm font-medium",children:"Status"}),l.jsxs("select",{id:"status",value:r.status,onChange:u,className:"w-full p-2 border rounded-md",children:[l.jsx("option",{value:"open",children:"Open"}),l.jsx("option",{value:"closed",children:"Closed"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"deadline",className:"block text-sm font-medium",children:"Deadline"}),l.jsx("input",{type:"date",id:"deadline",value:r.deadline,onChange:u,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"link",className:"block text-sm font-medium",children:"Apply Link"}),l.jsx("input",{type:"url",id:"link",value:r.link,onChange:u,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description"}),l.jsx("textarea",{id:"description",value:r.description,onChange:u,className:"w-full p-2 border rounded-md",rows:3})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"requirements",className:"block text-sm font-medium",children:"Requirements (comma-separated)"}),l.jsx("input",{type:"text",id:"requirements",value:r.requirements.join(", "),onChange:c,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md bg-gray-200 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 flex items-center",children:[i&&l.jsx(Ie,{className:"animate-spin mr-2"}),"Save Changes"]})]})]})]})})},LC=()=>{const{opportunities:t,loading:e,error:n,refetch:r}=Gw(),[s,i]=M.useState(""),[o,u]=M.useState(null),c=M.useMemo(()=>s?t.filter(f=>f.title.toLowerCase().includes(s.toLowerCase())||f.company.toLowerCase().includes(s.toLowerCase())):t,[t,s]),h=async f=>{if(window.confirm("Are you sure you want to delete this opportunity? This action cannot be undone."))try{await Lu(_t(fe,"opportunities",f)),alert("Opportunity deleted successfully."),r()}catch(p){console.error("Error deleting opportunity: ",p),alert("Failed to delete opportunity.")}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage Opportunities"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx(lm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by title or company...",value:s,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),e&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Ie,{className:"h-8 w-8 animate-spin"})}),n&&l.jsxs("div",{className:"text-red-600",children:[l.jsx(Mn,{className:"inline mr-2"}),n]}),!e&&!n&&l.jsx("div",{className:"space-y-4",children:c.length>0?c.map(f=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-md hover:bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:f.title}),l.jsx("p",{className:"text-sm text-gray-500",children:f.company})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>u(f),className:"text-blue-500 hover:text-blue-700 p-2 rounded-full hover:bg-blue-100",children:l.jsx(zu,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>h(f.id),className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100",children:l.jsx(Bu,{className:"h-5 w-5"})})]})]},f.id)):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No opportunities found."})})]}),o&&l.jsx(MC,{opportunity:o,onClose:()=>u(null),onSave:r})]})},FC=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"users"),mi("name","asc")),h=(await as(u)).docs.map(f=>f.data());e(h)}catch(u){console.error("Error fetching users: ",u),i("Failed to load user profiles.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{users:t,loading:n,error:s,refetch:o}},UC=({user:t,onClose:e,onSave:n})=>{const[r,s]=M.useState(t.name),[i,o]=M.useState(!1),u=async c=>{if(c.preventDefault(),!r.trim()){alert("Name cannot be empty.");return}o(!0);try{const h=_t(fe,"users",t.uid);await Zo(h,{name:r}),alert("Username updated successfully!"),n(),e()}catch(h){console.error("Error updating username:",h),alert("Failed to update username.")}finally{o(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Edit User Name"}),l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-200",children:l.jsx(ls,{})})]}),l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),l.jsx("input",{type:"text",id:"username",value:r,onChange:c=>s(c.target.value),required:!0,className:"w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),l.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md bg-gray-200 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",disabled:i,className:"px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 flex items-center",children:[i&&l.jsx(Ie,{className:"animate-spin mr-2"}),"Save"]})]})]})]})})},zC=()=>{const{users:t,loading:e,error:n,refetch:r}=FC(),{userProfile:s}=kr(),[i,o]=M.useState(""),[u,c]=M.useState(null),h=async(p,g)=>{if(p===(s==null?void 0:s.uid)){alert("For security, you cannot change your own role.");return}try{const E=_t(fe,"users",p);await Zo(E,{role:g}),alert("User role updated successfully!"),r()}catch(E){console.error("Error updating user role:",E),alert("Failed to update user role.")}},f=M.useMemo(()=>t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.email.toLowerCase().includes(i.toLowerCase())),[t,i]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage User Roles"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx(lm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),e&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Ie,{className:"h-8 w-8 animate-spin"})}),n&&l.jsxs("div",{className:"text-red-600",children:[l.jsx(Mn,{className:"inline mr-2"}),n]}),!e&&!n&&l.jsx("div",{className:"space-y-4",children:f.map(p=>l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-md hover:bg-gray-50",children:[l.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[l.jsx("img",{src:p.photoURL||`https://ui-avatars.com/api/?name=${p.name}&background=random`,alt:p.name,className:"h-12 w-12 rounded-full mr-4 object-cover",referrerPolicy:"no-referrer"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:p.name}),l.jsx("p",{className:"text-sm text-gray-500",children:p.email})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>c({uid:p.uid,name:p.name}),className:"text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100",children:l.jsx(zu,{className:"h-5 w-5"})}),l.jsxs("select",{value:p.role,onChange:g=>h(p.uid,g.target.value),disabled:p.uid===(s==null?void 0:s.uid),className:"p-2 border border-gray-300 rounded-md focus:ring-blue-500",children:[l.jsx("option",{value:"jobseeker",children:"Job Seeker"}),l.jsx("option",{value:"recruiter",children:"Recruiter"}),l.jsx("option",{value:"admin",children:"Admin"})]})]})]},p.uid))})]}),u&&l.jsx(UC,{user:u,onClose:()=>c(null),onSave:()=>{r(),c(null)}})]})},Yy=({initialData:t={},onSubmit:e,onClose:n,isSubmitting:r})=>{const[s,i]=M.useState({name:t.name||"",role:t.role||"",content:t.content||"",rating:t.rating||5}),[o,u]=M.useState(null),c=p=>{const{id:g,value:E,type:k}=p.target;i(A=>({...A,[g]:k==="number"?Number(E):E}))},h=p=>{p.target.files&&p.target.files[0]&&u(p.target.files[0])},f=p=>{p.preventDefault(),e(s,o)};return l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Name"}),l.jsx("input",{type:"text",id:"name",value:s.name,onChange:c,required:!0,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium",children:"Role / Position"}),l.jsx("input",{type:"text",id:"role",value:s.role,onChange:c,required:!0,className:"w-full p-2 border rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"image",className:"block text-sm font-medium",children:"Image (Optional)"}),l.jsx("input",{type:"file",id:"image",onChange:h,accept:"image/*",className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"content",className:"block text-sm font-medium",children:"Testimonial Content"}),l.jsx("textarea",{id:"content",value:s.content,onChange:c,required:!0,rows:4,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"rating",className:"block text-sm font-medium",children:"Rating (1-5)"}),l.jsxs("select",{id:"rating",value:s.rating,onChange:c,required:!0,className:"w-full p-2 border rounded-md",children:[l.jsx("option",{children:"5"}),l.jsx("option",{children:"4"}),l.jsx("option",{children:"3"}),l.jsx("option",{children:"2"}),l.jsx("option",{children:"1"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[n&&l.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 rounded-md bg-gray-200 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",disabled:r,className:"px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 flex items-center",children:[r?l.jsx(Ie,{className:"animate-spin mr-2"}):l.jsx(yi,{className:"mr-2"}),r?"Saving...":"Save Testimonial"]})]})]})},BC=()=>{const{testimonials:t,loading:e,error:n,refetch:r}=Kw(),[s,i]=M.useState(!1),[o,u]=M.useState(""),[c,h]=M.useState(null),f=async k=>{const A=new FormData;A.append("teamImage",k);const T=await(await fetch("https://ourkandukur.com/upload.php",{method:"POST",body:A})).json();if(T.status!=="success")throw new Error(T.message||"Image upload failed.");return T.url},p=async(k,A)=>{i(!0),u("");try{let P="";A?P=await f(A):P=`https://ui-avatars.com/api/?name=${encodeURIComponent(k.name)}&background=random&color=fff`,await ti(kt(fe,"testimonials"),{...k,imageUrl:P,createdAt:ni()}),u("✅ Success! Testimonial added."),r()}catch(P){u(`❌ Error! ${P.message}`)}finally{i(!1),setTimeout(()=>u(""),5e3)}},g=async(k,A)=>{if(c){i(!0);try{let P=c.image;A&&(P=await f(A));const T=_t(fe,"testimonials",c.id);await Zo(T,{...k,image:P}),alert("Testimonial updated successfully!"),h(null),r()}catch(P){alert(`Failed to update testimonial: ${P.message}`)}finally{i(!1)}}},E=async k=>{if(window.confirm("Are you sure you want to delete this testimonial?"))try{await Lu(_t(fe,"testimonials",k)),alert("Testimonial deleted successfully."),r()}catch{alert("Failed to delete testimonial.")}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center",children:[l.jsx(Hw,{className:"mr-3"}),"Add a New Testimonial"]}),o&&l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:o}),l.jsx(Yy,{onSubmit:p,isSubmitting:s})]}),l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Current Testimonials"}),e?l.jsx(Ie,{className:"animate-spin"}):l.jsx("div",{className:"space-y-4",children:t.map(k=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:k.image||`https://ui-avatars.com/api/?name=${k.name}`,alt:k.name,className:"h-12 w-12 rounded-full mr-4 object-cover"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:k.name}),l.jsx("p",{className:"text-sm text-gray-500",children:k.role})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>h(k),className:"text-blue-500 hover:text-blue-700 p-2 rounded-full hover:bg-blue-100",children:l.jsx(zu,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>E(k.id),className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100",children:l.jsx(Bu,{className:"h-5 w-5"})})]})]},k.id))})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Edit Testimonial"}),l.jsx("button",{onClick:()=>h(null),className:"p-2 rounded-full hover:bg-gray-200",children:l.jsx(ls,{})})]}),l.jsx(Yy,{initialData:c,onSubmit:g,onClose:()=>h(null),isSubmitting:s})]})})]})},$C=()=>{const{settings:t,loading:e,error:n,refetch:r}=cm(),[s,i]=M.useState({whatsappChannelUrl:"",whatsappCommunityUrl:"",facebookUrl:"",instagramUrl:"",linkedinUrl:"",youtubeUrl:""}),[o,u]=M.useState(!1),[c,h]=M.useState("");M.useEffect(()=>{t&&i({whatsappChannelUrl:t.whatsappChannelUrl||"",whatsappCommunityUrl:t.whatsappCommunityUrl||"",facebookUrl:t.facebookUrl||"",instagramUrl:t.instagramUrl||"",linkedinUrl:t.linkedinUrl||"",youtubeUrl:t.youtubeUrl||""})},[t]);const f=g=>{i(E=>({...E,[g.target.id]:g.target.value}))},p=async g=>{g.preventDefault(),u(!0),h("");try{const E=_t(fe,"settings","links");await Jl(E,s,{merge:!0}),h("✅ Settings saved successfully!"),r()}catch(E){console.error("Error saving settings:",E),h("❌ Failed to save settings.")}finally{u(!1),setTimeout(()=>h(""),3e3)}};return e?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(Ie,{className:"h-8 w-8 animate-spin"})}):n?l.jsx("div",{className:"text-red-600 p-4 bg-red-50 rounded-md",children:n}):l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Site Settings"}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-lg font-semibold px-2",children:"WhatsApp Links"}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"whatsappChannelUrl",className:"block text-sm font-medium text-gray-700",children:"Channel URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Gy,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"whatsappChannelUrl",value:s.whatsappChannelUrl,onChange:f,placeholder:"https://whatsapp.com/channel/...",className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"whatsappCommunityUrl",className:"block text-sm font-medium text-gray-700",children:"Community URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Gy,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"whatsappCommunityUrl",value:s.whatsappCommunityUrl,onChange:f,placeholder:"https://chat.whatsapp.com/...",className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-md",children:[l.jsx("legend",{className:"text-lg font-semibold px-2",children:"Social Media Links"}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"facebookUrl",className:"block text-sm font-medium text-gray-700",children:"Facebook URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(zw,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"facebookUrl",value:s.facebookUrl,onChange:f,className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"instagramUrl",className:"block text-sm font-medium text-gray-700",children:"Instagram URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx($w,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"instagramUrl",value:s.instagramUrl,onChange:f,className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"linkedinUrl",className:"block text-sm font-medium text-gray-700",children:"LinkedIn URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Uu,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"linkedinUrl",value:s.linkedinUrl,onChange:f,className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"youtubeUrl",className:"block text-sm font-medium text-gray-700",children:"YouTube URL"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Ww,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 ml-3"}),l.jsx("input",{type:"url",id:"youtubeUrl",value:s.youtubeUrl,onChange:f,className:"w-full pl-10 p-2 border border-gray-300 rounded-md"})]})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end",children:[c&&l.jsx("p",{className:"text-sm text-gray-600 mr-4",children:c}),l.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[o?l.jsx(Ie,{className:"animate-spin h-5 w-5 mr-3"}):l.jsx(yi,{className:"h-5 w-5 mr-2"}),o?"Saving...":"Save Settings"]})]})]})]})},za=["Community Partners","Education Partners","Media Partners","Outreach & Influencer Partners","Corporate & Sponsorship Partners","Government & Institutional Partners"],qC=()=>{const{partners:t,loading:e,error:n,refetch:r}=Qw(),[s,i]=M.useState(!1),[o,u]=M.useState(""),[c,h]=M.useState(""),[f,p]=M.useState(za[0]),[g,E]=M.useState(null),k=async w=>{const I=new FormData;I.append("teamImage",w);const F=await(await fetch("https://ourkandukur.com/upload.php",{method:"POST",body:I})).json();if(F.status!=="success")throw new Error(F.message||"Logo upload failed.");return F.url},A=async w=>{if(w.preventDefault(),!g){u("❌ Please select a logo to upload.");return}i(!0),u("");try{const I=await k(g);await ti(kt(fe,"partners"),{name:c,category:f,logoUrl:I,createdAt:ni()}),u("✅ Success! Partner added."),h(""),p(za[0]),E(null);const D=document.getElementById("logoFile");D&&(D.value=""),r()}catch(I){u(`❌ Error! ${I.message}`)}finally{i(!1),setTimeout(()=>u(""),5e3)}},P=async w=>{if(confirm("Are you sure you want to delete this partner?"))try{await Lu(_t(fe,"partners",w)),alert("Partner deleted successfully."),r()}catch{alert("Failed to delete partner.")}},T=t.reduce((w,I)=>((w[I.category]=w[I.category]||[]).push(I),w),{});return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center",children:[l.jsx(Uw,{className:"mr-3"}),"Add a New Partner"]}),o&&l.jsx("p",{className:"text-sm text-center font-semibold mb-4",children:o}),l.jsxs("form",{onSubmit:A,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Partner/Company Name"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:w=>h(w.target.value),required:!0,className:"w-full p-2 border rounded-md"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium",children:"Category"}),l.jsx("select",{id:"category",value:f,onChange:w=>p(w.target.value),required:!0,className:"w-full p-2 border rounded-md",children:za.map(w=>l.jsx("option",{value:w,children:w},w))})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"logoFile",className:"block text-sm font-medium",children:"Partner Logo"}),l.jsx("input",{type:"file",id:"logoFile",onChange:w=>E(w.target.files?w.target.files[0]:null),required:!0,accept:"image/*",className:"w-full p-2 border border-gray-300 rounded-md"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 flex items-center",children:[s?l.jsx(Ie,{className:"animate-spin mr-2"}):l.jsx(yi,{className:"mr-2"}),s?"Saving...":"Save Partner"]})})]})]}),l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Current Partners"}),e?l.jsx("div",{className:"flex justify-center",children:l.jsx(Ie,{className:"animate-spin h-8 w-8 text-blue-600"})}):l.jsx("div",{className:"space-y-6",children:za.map(w=>T[w]&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2 mb-3",children:w}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:T[w].map(I=>l.jsxs("div",{className:"relative group p-2 border rounded-md text-center",children:[l.jsx("img",{src:I.logoUrl,alt:I.name,className:"h-20 w-full object-contain mb-2"}),l.jsx("p",{className:"text-xs font-medium truncate",children:I.name}),l.jsx("button",{onClick:()=>P(I.id),className:"absolute top-0 right-0 m-1 p-1 bg-white rounded-full text-red-500 hover:text-red-700 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Delete partner",children:l.jsx(Bu,{className:"h-4 w-4"})})]},I.id))})]},w))}),n&&l.jsx("p",{className:"text-red-500 mt-4",children:n})]})]})},HC=()=>{const{userProfile:t,signOut:e}=kr(),[n,r]=M.useState("opportunities"),s=()=>{switch(n){case"opportunities":return l.jsx(Yw,{});case"manage-opps":return l.jsx(LC,{});case"messages":return l.jsx(DC,{});case"team":return l.jsx(OC,{});case"users":return l.jsx(zC,{});case"testimonials":return l.jsx(BC,{});case"settings":return l.jsx($C,{});case"partners":return l.jsx(qC,{});default:return null}},i=o=>`cursor-pointer whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${n===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`;return l.jsxs("div",{className:"min-h-screen bg-gray-100",children:[l.jsx("header",{className:"bg-white shadow-md",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Welcome, ",(t==null?void 0:t.name)||"Admin"]})]}),l.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Sign Out"})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[l.jsx("div",{className:"mb-6 border-b border-gray-200",children:l.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>r("opportunities"),className:i("opportunities"),children:"Post Opportunity"}),l.jsx("button",{onClick:()=>r("manage-opps"),className:i("manage-opps"),children:"Manage Opportunities"}),l.jsx("button",{onClick:()=>r("messages"),className:i("messages"),children:"View Messages"}),l.jsx("button",{onClick:()=>r("team"),className:i("team"),children:"Manage Team"}),l.jsx("button",{onClick:()=>r("partners"),className:i("partners"),children:"Manage Partners"})," ",l.jsx("button",{onClick:()=>r("users"),className:i("users"),children:"Manage Users"}),l.jsx("button",{onClick:()=>r("testimonials"),className:i("testimonials"),children:"Manage Testimonials"}),l.jsx("button",{onClick:()=>r("settings"),className:i("settings"),children:"Site Settings"})]})}),l.jsx("div",{children:s()})]})]})},WC=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!0),[s,i]=M.useState(null),o=M.useCallback(async()=>{r(!0),i(null);try{const u=os(kt(fe,"users"),qA("role","==","jobseeker")),h=(await as(u)).docs.map(f=>f.data());e(h)}catch(u){console.error("Error fetching job seekers: ",u),i("Failed to load job seeker profiles.")}finally{r(!1)}},[]);return M.useEffect(()=>{o()},[o]),{jobSeekers:t,loading:n,error:s,refetch:o}},GC=()=>{const{jobSeekers:t,loading:e,error:n,refetch:r}=WC();return e?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(Ie,{className:"h-8 w-8 animate-spin text-blue-600"})}):n?l.jsxs("div",{className:"text-center text-red-600 bg-red-50 p-6 rounded-lg",children:[l.jsx(Mn,{className:"mx-auto h-8 w-8"}),l.jsx("p",{className:"mt-2",children:n}),l.jsx("button",{onClick:r,className:"mt-4 text-sm font-semibold text-red-700 underline",children:"Try Again"})]}):l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Browse Job Seekers"}),t.length===0?l.jsx("p",{className:"text-gray-500",children:"No job seekers have registered yet."}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center hover:shadow-lg transition-shadow",children:[l.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${s.name}&background=random`,alt:s.name,className:"w-24 h-24 mx-auto rounded-full object-cover mb-4",referrerPolicy:"no-referrer"}),l.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),l.jsxs("a",{href:`mailto:${s.email}`,className:"text-sm text-blue-600 hover:underline flex items-center justify-center mt-1",children:[l.jsx(pi,{className:"h-4 w-4 mr-1"})," Contact"]}),l.jsxs("div",{className:"text-left mt-4 space-y-2 text-sm text-gray-600",children:[s.location&&l.jsxs("p",{className:"flex items-start",children:[l.jsx(gi,{className:"h-4 w-4 mr-2 mt-1 flex-shrink-0"})," ",s.location]}),s.academics&&l.jsxs("p",{className:"flex items-start",children:[l.jsx(nC,{className:"h-4 w-4 mr-2 mt-1 flex-shrink-0"})," ",s.academics]})]})]},s.uid))})]})},KC=()=>{const{userProfile:t,signOut:e}=kr(),[n,r]=M.useState("browse");return l.jsxs("div",{className:"min-h-screen bg-gray-100",children:[l.jsx("header",{className:"bg-white shadow-md",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recruiter Dashboard"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Welcome, ",(t==null?void 0:t.name)||"Recruiter"]})]}),l.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Sign Out"})]})}),l.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[l.jsx("div",{className:"mb-6 border-b border-gray-200",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>r("browse"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${n==="browse"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Browse Candidates"}),l.jsx("button",{onClick:()=>r("post"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${n==="post"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Post an Opportunity"})]})}),l.jsxs("div",{children:[n==="browse"&&l.jsx(GC,{}),n==="post"&&l.jsx(Yw,{})]})]})]})},QC=()=>{const[t,e]=M.useState("home"),n=()=>{switch(t){case"home":return l.jsxs(l.Fragment,{children:[l.jsx(Qy,{setCurrentSection:e}),l.jsx(Xc,{setCurrentSection:e})]});case"opportunities":return l.jsx(Xc,{setCurrentSection:e});case"about":return l.jsx(bC,{});case"team":return l.jsx(AC,{});case"contact":return l.jsx(CC,{});case"profile":return l.jsx(PC,{});default:return l.jsxs(l.Fragment,{children:[l.jsx(Qy,{setCurrentSection:e}),l.jsx(Xc,{setCurrentSection:e})]})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(IC,{}),l.jsx(SC,{currentSection:t,setCurrentSection:e}),l.jsx("main",{children:n()}),l.jsx(RC,{})]})},XC=()=>{const{userProfile:t,loading:e}=kr();return e?l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(Ie,{className:"h-12 w-12 animate-spin text-blue-600"})}):(t==null?void 0:t.role)==="admin"?l.jsx(HC,{}):(t==null?void 0:t.role)==="recruiter"?l.jsx(KC,{}):l.jsx(QC,{})};function YC(){return l.jsx(JA,{children:l.jsx(XC,{})})}c_(document.getElementById("root")).render(l.jsx(M.StrictMode,{children:l.jsx(YC,{})}));
